<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Tools and practices for FAIR research software: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo.svg"><span class="badge text-bg-warning">
          <abbr title="This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#field-testing-alpha-stage" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-triangle" style="border-radius: 5px"></i>
              Alpha
            </a>
            <span class="visually-hidden">This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.</span>
          </abbr>
        </span>
        
      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>
      
      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Tools and practices for FAIR research software
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Tools and practices for FAIR research software
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Tools and practices for FAIR research software
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->
      
            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-introduction.html">1. Course introduction</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-fair-research-software.html">2. FAIR research software</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-tools.html">3. Tools and practices for research software development</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-version-control.html">4. Version control</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-code-readability.html">5. Code readability</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-code-testing.html">6. Code testing</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-documenting-code.html">7. Documenting code</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-open-collaboration.html">8. Open project collaboration &amp; management</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-code-ethics.html">9. Ethical considerations for research software</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-wrap-up.html">10. Wrap-up</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width resources">
<a href="aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">
            
            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-introduction"><p>Content from <a href="01-introduction.html">Course introduction</a></p>
<hr>
<p>Last updated on 2024-07-04 |
        
        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/01-introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is open, reproducible and FAIR research?</li>
<li>Why are these practices important?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Understand the concept of open and reproducible research</li>
<li>Understand why these principles are of value in the research
community</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="jargon-busting"><h2 class="section-heading">Jargon busting<a class="anchor" aria-label="anchor" href="#jargon-busting"></a>
</h2>
<hr class="half-width">
<p>Before we start with the course, below we cover the terminology and
explain terms, phrases, and concepts associated with software
development in reproducible research that we will use in this
course.</p>
<ul>
<li>
<strong>Reproducibility</strong> - the ability to be reproduced or
copied; the extent to which consistent results are obtained when an
experiment is repeated (definition from <a href="https://languages.oup.com/google-dictionary-en/" class="external-link">Google’s English
dictionary is provided by Oxford Languages</a>)</li>
<li>
<strong>Computational reproducibility</strong> - obtaining
consistent results using the same input data, computational methods
(code), and conditions of analysis; work that can be independently
recreated from the same data and the same code (<a href="https://the-turing-way.netlify.app/reproducible-research/overview/overview-definitions" class="external-link">definition</a>
by the <a href="https://the-turing-way.netlify.app/reproducible-research/reproducible-research" class="external-link">Turing
Way’s “Guide to Reproducible Research”</a>)</li>
<li>
<strong>Reproducible research</strong> - the idea that scientific
results should be documented in such a way that their deduction is fully
transparent (<a href="https://en.wikipedia.org/wiki/Reproducibility" class="external-link">definition</a> from
Wikipedia)</li>
<li>
<strong>Open research</strong> - research that is openly accessible
by others; concerned with making research more transparent, more
collaborative, more wide-reaching, and more efficient (<a href="https://en.wikipedia.org/wiki/Open_research" class="external-link">definition</a> from
Wikipedia)</li>
<li>
<strong>FAIR</strong> - an acronym that stands for Findable,
Accessible, Interoperable, and Reusable</li>
<li>
<strong>Sustainable software development</strong> - software
development practice that takes into account longevity and
maintainability of code (e.g. beyond the lifetime of the project),
environmental impact, societal responsibility and ethics in our software
practices.</li>
</ul>
<div id="computational-reproducibility" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="computational-reproducibility" class="callout-inner">
<h3 class="callout-title">Computational reproducibility<a class="anchor" aria-label="anchor" href="#computational-reproducibility"></a>
</h3>
<div class="callout-content">
<p>In this course, we use the term “reproducibility” as a synonym for
“computational reproducibility”.</p>
</div>
</div>
</div>
<div id="what-does-open-and-reproducible-research-mean-to-you" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="what-does-open-and-reproducible-research-mean-to-you" class="callout-inner">
<h3 class="callout-title">What does open and reproducible research mean
to you?<a class="anchor" aria-label="anchor" href="#what-does-open-and-reproducible-research-mean-to-you"></a>
</h3>
<div class="callout-content">
<p>Think about the questions below. Your instructors may ask you to
share your answers in a shared notes document and/or discuss them with
other participants.</p>
<ul>
<li>What do you understand by the words “open” and “reproducible” in the
context of research?</li>
<li>How many people or groups can you list that might benefit from your
work being open and reproducible?</li>
<li>How many times did you wish that someone else’s work you came across
was more open or accessible to you? Can you provide some examples?</li>
</ul>
</div>
</div>
</div>
</section><section id="what-is-reproducible-research"><h2 class="section-heading">What is reproducible research?<a class="anchor" aria-label="anchor" href="#what-is-reproducible-research"></a>
</h2>
<hr class="half-width">
<p><a href="https://the-turing-way.netlify.app/reproducible-research/reproducible-research" class="external-link">The
Turing Way’s “Guide to Reproducible Research”</a> provides an <a href="https://the-turing-way.netlify.app/reproducible-research/overview/overview-definitions" class="external-link">excellent
overview of definitions of “reproducibility” and “replicability”</a>
found in literature, and their different aspects and levels.</p>
<p>In this course, we adopt the Turing Way’s definitions:</p>
<ul>
<li>
<strong>Reproducible research</strong>: a result is reproducible
when the same analysis steps performed on the same data consistently
produce the same answer.
<ul>
<li>For example, two different people drop a pen 10 times each and every
time it falls to the floor. Or, we run the same code multiple times on
different machines and each time it produces the same result.</li>
</ul>
</li>
<li>
<strong>Replicable research</strong>: a result is replicable when
the same analysis performed on different data produces qualitatively
similar answers.
<ul>
<li>For example, instead of a pen, we drop a pencil, and it also falls
to the floor. Or, we collect two different datasets as part of two
different studies and run the same code over these datasets with the
same result each time.</li>
</ul>
</li>
<li>
<strong>Robust research</strong>: a result is robust when the same
data is subjected to different analysis workflows to answer the same
research question and a qualitatively similar or identical answer is
produced.
<ul>
<li>For example, I lend you my pen and you drop it out the window, and
it still falls to the floor. Or we run the same analysis implemented in
both Python and R over the same data and it produces the same
result.</li>
</ul>
</li>
<li>
<strong>Generalisable research</strong>: combining replicable and
robust findings allow us to form generalisable results that are broadly
applicable to different types of data or contexts.
<ul>
<li>For example, everything we drop - falls, therefore gravity
exists.</li>
</ul>
</li>
</ul>
<figure><img src="https://the-turing-way.netlify.app/_images/reproducible-definition-grid.svg" alt="Four cartoon images depicting two researchers at two machines which take in data and output the same landscape image in 4 different ways. These visually describe the four scenarios listed above." class="figure mx-auto d-block"><div class="figcaption"><em>The Turing Way project illustration of
aspects of reproducible research by Scriberia, used under a CC-BY 4.0
licence, <a href="https://doi.org/10.5281/zenodo.3332807" class="external-link">DOI:
10.5281/zenodo.3332807</a></em></div>
</figure><p>In this course we mainly address the aspect of reproducibility -
i.e. enabling others to run our code to obtain the same results.</p>
<p>We can also further differentiate between:</p>
<ul>
<li>
<strong>Computational reproducibility</strong>: when detailed
information is provided about code, software, hardware and
implementation details.</li>
<li>
<strong>Empirical reproducibility</strong>: when detailed
information is provided about non-computational empirical scientific
experiments and observations. In practice, this is enabled by making the
data and details of how it was collected freely available.</li>
<li>
<strong>Statistical reproducibility</strong>: when detailed
information is provided, for example, about the choice of statistical
tests, model parameters, and threshold values. This mostly relates to
pre-registration of study design to prevent p-value hacking and other
manipulations.</li>
</ul>
<p>In this course, we are concerned with computational reproducibility,
i.e. when the application of computer science and software engineering
is used to aid solving research problems.</p>
</section><section id="why-do-reproducible-research"><h2 class="section-heading">Why do reproducible research?<a class="anchor" aria-label="anchor" href="#why-do-reproducible-research"></a>
</h2>
<hr class="half-width">
<p>Scientific transparency and rigor are key factors in research.
Scientific methodology and results need to be published openly and
replicated and confirmed by several independent parties. However,
research papers often lack the full details required for independent
reproduction or replication. Many attempts at reproducing or replicating
the results of scientific studies have failed in a variety of
disciplines ranging from psychology (<a href="https://www.science.org/doi/10.1126/science.aac4716" class="external-link">The Open
Science Collaboration (2015)</a>) to cancer sciences (<a href="https://elifesciences.org/articles/71601" class="external-link">Errington et al
(2021)</a>). These are called <a href="https://en.wikipedia.org/wiki/Replication_crisis" class="external-link"><strong>the
reproducibility and replicability crises</strong></a> - ongoing
methodological crises in which the results of many scientific studies
are difficult or impossible to repeat.</p>
<p>Reproducible research is a practice that ensures that researchers can
repeat the same analysis multiple times with the same results. It offers
many benefits to those who practice it:</p>
<ul>
<li>Reproducible research helps researchers remember how and why they
performed specific tasks and analyses; this enables easier explanation
of work to collaborators and reviewers.</li>
<li>Reproducible research enables researchers to quickly modify analyses
and figures - this is often required at all stages of research and
automating this process saves loads of time.</li>
<li>Reproducible research enables reusability of previously conducted
tasks so that new projects that require the same or similar tasks become
much easier and efficient by reusing or reconfiguring previous
work.</li>
<li>Reproducible research supports researchers’ career development by
facilitating the reuse and citation of all research outputs - including
both code and data.</li>
<li>Reproducible research is a strong indicator of rigor,
trustworthiness, and transparency in scientific research. This can
increase the quality and speed of peer review, because reviewers can
directly access the analytical process described in a manuscript. It
increases the probability that errors are caught early on - by
collaborators or during the peer-review process, helping alleviate the
reproducibility crisis.</li>
</ul>
<p>However, reproducible research often requires that researchers
implement new practices and learn new tools. This course aims to teach
some of these practices and tools pertaining to the use of software to
conduct reproducible research.</p>
</section><section id="software-in-research-and-research-software"><h2 class="section-heading">Software in research and research software<a class="anchor" aria-label="anchor" href="#software-in-research-and-research-software"></a>
</h2>
<hr class="half-width">
<p>Software is <a href="https://www.software.ac.uk/blog/quick-and-dirty-analysis-software-being-used-research-python-matlab-and-r" class="external-link">fundamental
to modern research</a> - some of it would even be impossible without
software. From short, thrown-together temporary scripts written to help
with day-to-day research tasks, through an abundance of complex data
analysis spreadsheets, to the hundreds of software engineers and
millions of lines of code behind international efforts such as the Large
Hadron Collider, there are few areas of research where software does not
have a fundamental role.</p>
<p>However, it is important to note that not all software that is used
in research is “research software”. We define “research software” as
software or code that is used to generate, process or analyse results of
a research for publication. For example, software used to guide a
telescope is not considered “research software”. On the other hand,
formulas or macros in spreadsheets used to analyse data are considered
“research code” as they are a form of computer programming that allow
one to create, calculate, and change data sets in a number of different
ways.</p>
<figure><img src="https://esciencecenter-digital-skills.github.io/research-software-support/modules/fairsoftware/media/definition.png" alt="Quote: Research Software includes source code files, algorithms, scripts, computational workflows and executables that were created during the research process or for a research purpose. Software components (e.g., operating systems, libraries, dependencies, packages, scripts, etc.) that are used for research but were not created during or with a clear research intent should be considered software in research and not Research Software." class="figure mx-auto d-block"><div class="figcaption"><em>Definition of “research software” from the
FAIR4RS working group, image by the Netherlands eScience Center licensed
under CC-BY 4.0</em></div>
</figure><p>In the <a href="https://www.software.ac.uk/blog/quick-and-dirty-analysis-software-being-used-research-python-matlab-and-r" class="external-link">software
survey conducted by the Software Sustainability Institute in 2014</a>,
92% of researchers indicated they used some kind of software to aid or
conduct their research. This was not limited to researchers from <a href="https://en.wikipedia.org/wiki/Computational_science" class="external-link">computational
science</a> (aka scientific computing), the “hard” sciences or to those
involved in “traditional” uses of computing infrastructure such as
running simulations or developing computational methods. The <strong>use
of research software is ubiquitous and fairly even across all
disciplines</strong>.</p>
<p>Research software is increasingly being developed - researchers do
not just use “off the shelf” software and the majority of researchers
develop their own. In order to be able to produce quality software that
outputs correct and verifiable results and that can be reused over time
- researchers require training. This course teaches good practises and
reproducible working methods that are agnostic of a programming language
(although we will use Python code in our examples) and aims to provide
researchers with the tools and knowledge to feel confident when writing
good quality and sustainable software to support their research.
Typically, we think of such software as being <strong>FAIR</strong>.</p>
<p>In the rest of the course, we will explore what exactly we mean by
“FAIR research software”, why it is important and what practices can
help us along our “FAIRification” journey.</p>
</section><section id="further-reading"><h2 class="section-heading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://the-turing-way.netlify.app/reproducible-research/reproducible-research" class="external-link">The
Turing Way’s “Guide for Reproducible Research”</a></li>
<li>
<a href="https://esajournals.onlinelibrary.wiley.com/doi/10.1002/bes2.1801" class="external-link">A
Beginner’s Guide to Conducting Reproducible Research</a>, Jesse M.
Alston, Jessica A. Rick, Bulletin of The Ecological Society of America
102 (2) (2021), <a href="https://doi.org/10.1002/bes2.1801" class="external-link uri">https://doi.org/10.1002/bes2.1801</a>
</li>
<li><a href="https://guereslib.github.io/ten-reproducible-research-things/" class="external-link">“Ten
reproducible research things” tutorial</a></li>
<li>[FORCE11’s FAIR 4 Research Software (FAIR4RS) Working
Group][fair4rs-working-group]</li>
<li><a href="https://carpentries-lab.github.io/good-enough-practices/index.html" class="external-link">“Good
Enough Practices in Scientific Computing” course</a></li>
<li>
<a href="https://www.repro4everyone.org/" class="external-link">Reproducibility for
Everyone’s (R4E) resources</a>, community-led education initiative to
increase adoption of open research practices at scale</li>
<li>
<a href="https://intersect-training.org/training-links/" class="external-link">Training
materials on different aspects of research software engineering</a>
(including open source, reproducibility, research software testing,
engineering, design, continuous integration, collaboration, version
control, packaging, etc.), compiled by the <a href="https://intersect-training.org/" class="external-link">INTERSECT project</a>
</li>
<li>
<a href="https://forrt.org/resources/" class="external-link">Curated resources</a> by the
<a href="https://forrt.org/" class="external-link">Framework for Open and Reproducible
Research Training</a> (FORRT)</li>
</ul></section><section id="acknowledgements-and-references"><h2 class="section-heading">Acknowledgements and references<a class="anchor" aria-label="anchor" href="#acknowledgements-and-references"></a>
</h2>
<hr class="half-width">
<p>The content of this course borrows from or references <a href="reference.html#litref">various work</a>.</p>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</section></section><section id="aio-02-fair-research-software"><p>Content from <a href="02-fair-research-software.html">FAIR research software</a></p>
<hr>
<p>Last updated on 2024-07-04 |
        
        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/02-fair-research-software.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are FAIR research principles?</li>
<li>How do FAIR principles apply to software (and data)?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Explain the FAIR research principles in the context of research
software and data</li>
<li>Explain why these principles are of value in the research
community</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="motivation" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="motivation" class="callout-inner">
<h3 class="callout-title">Motivation<a class="anchor" aria-label="anchor" href="#motivation"></a>
</h3>
<div class="callout-content">
<p>Think about the questions below. Your instructors may ask you to
share your answers in a shared notes document and/or discuss them with
other participants.</p>
<ul>
<li>What motivated you to attend this course? Did you come by choice or
were you advised to attend?</li>
<li>What do you hope to learn or change in your current research
software practice? Describe how your knowledge, work or attitude may be
different afterwards.</li>
</ul>
</div>
</div>
</div>
<section id="fair-software"><h2 class="section-heading">FAIR software<a class="anchor" aria-label="anchor" href="#fair-software"></a>
</h2>
<hr class="half-width">
<p>FAIR stands for Findable, Accessible, Interoperable, and Reusable and
comprises a set of principles designed to increase the visibility and
usefulness of your research to others. The FAIR data principles, first
published <a href="https://www.nature.com/articles/sdata201618" class="external-link">in
2016</a>, are widely known and applied today. Similar <a href="https://www.nature.com/articles/s41597-022-01710-x" class="external-link">FAIR
principles for software</a> have now been defined too. In general, they
mean:</p>
<ul>
<li>
<strong>Findable</strong> - software and its associated metadata
must be easy to discover by humans and machines.</li>
<li>
<strong>Accessible</strong> - in order to reuse software, the
software and its metadata must be retrievable by standard protocols,
free and legally usable.</li>
<li>
<strong>Interoperable</strong> - when interacting with other
software it must be done by exchanging data and/or metadata through
standardised protocols and application programming interfaces
(APIs).</li>
<li>
<strong>Reusable</strong> - software should be usable (can be
executed) and reusable (can be understood, modified, built upon, or
incorporated into other software).</li>
</ul>
<p>Each of the above principles can be achieved by a number of practices
listed below. This is not an exact science, and by all means the list
below is not exhaustive, but any of the practices that you employ in
your research software workflow will bring you closer to the gold
standard of a fully reproducible research.</p>
<ul>
<li>Findable
<ul>
<li>Create a description of your software</li>
<li>Place your software in a public software repository (and ideally
register it in a <a href="https://github.com/NLeSC/awesome-research-software-registries" class="external-link">software
registry</a>)</li>
<li>Use a unique and persistent identifier (DOI) for your software
(e.g. by depositing your code on Zenodo), which is also useful for
citations - note that depositing your data/code on GitHub and similar
software repositories may not be enough as they may change their open
access model or disappear completely in the future</li>
</ul>
</li>
<li>Accessible
<ul>
<li>Make sure people can freely, legally and easily get a copy your
software</li>
<li>Use coding conventions and comments to make your code readable and
understandable by people (once they get a copy of it)</li>
</ul>
</li>
<li>Interoperable
<ul>
<li>Explain the functionality of your software</li>
<li>Use standard formats for inputs and outputs</li>
<li>Communicate with other software via standard protocols and APIs</li>
</ul>
</li>
<li>Reusable
<ul>
<li>Document your software (including its functionality, and how to
install and run it)</li>
<li>Follow best practices for software development (including coding
conventions, code readability and verifying its correctness)</li>
<li>Test your software and make sure it works on different
platforms/operating systems</li>
<li>Give a licence to your software clearly stating how it can be
reused</li>
<li>State how to cite your software</li>
</ul>
</li>
</ul>
<div id="fair-is-a-process-not-a-perfect-metric" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="fair-is-a-process-not-a-perfect-metric" class="callout-inner">
<h3 class="callout-title">FAIR is a process, not a perfect metric<a class="anchor" aria-label="anchor" href="#fair-is-a-process-not-a-perfect-metric"></a>
</h3>
<div class="callout-content">
<p>FAIR is not a binary metric - there is no such thing as “FAIR or not
FAIR”.</p>
<p>FAIR is not a perfect metric, nor does it provide a full and
exhaustive software quality checklist. Software may be FAIR but still
not very good in terms of its functionality.</p>
<p>FAIR is <strong>not meant</strong> to criticise or discredit
work.</p>
<p>FAIR refers to the specific <strong>values</strong> of and describes
a set of <strong>principles</strong> to aid open and reproducible
research that can be a helpful guide for researchers who want to improve
their practices (by helping them see where they are on the <strong>FAIR
spectrum</strong> and help them on a <strong>journey</strong> to make
their software more FAIR).</p>
<figure><img src="fig/fair-spectrum.png" alt="FAIR represented as as a 4-dimensional spectrum with 4 axes - findable, accessible, interoperable and reusable, image by the Netherlands eScience Center licensed under CC-BY 4.0" class="figure mx-auto d-block"><div class="figcaption"><em>FAIR as a 4D spectrum, image by the
Netherlands eScience Center licensed under CC-BY 4.0</em></div>
</figure>
</div>
</div>
</div>
<p>We are going to explore the above practices on an example software
project we will be working on as part of this course.</p>
<div id="discussion2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#discussion2"></a>
</h3>
<div class="callout-content">
<p>Think of a piece of software you use in your research - any
computational tool used for data gathering, modelling &amp; simulation,
processing &amp; visualising results or others. If you have a bit of
code or software you wrote yourself, in any language, feel free to use
that.</p>
<p>Think where on the FAIR spectrum it fits, using the following scale
as a guide for each principle:</p>
<ul>
<li>1 - requires loads of improvement</li>
<li>2 - on a good path, but improvements still needed</li>
<li>3 - decent, a few things could still be improved</li>
<li>4 - very good, only tiny things to improve upon</li>
<li>5 - excellent</li>
</ul>
</div>
</div>
</div>
</section><section id="software-and-data-used-in-this-course"><h2 class="section-heading">Software and data used in this course<a class="anchor" aria-label="anchor" href="#software-and-data-used-in-this-course"></a>
</h2>
<hr class="half-width">
<p>We are going to follow a fairly typical experience of a new PhD or
postdoc joining a research group. They were emailed some data and
analysis code bundled in a <code>.zip</code> archive and written by
another group member who works on similar things. They need to be able
to install and run this code on their machine, check they understand it
and then adapt it to their own project.</p>
<p>As part of the <a href="./index.html#astronaut-data-and-analysis-code">setup for this
course</a>, you should have downloaded a <code>.zip</code> archive
containing the software project the new research team member was given.
Let’s unzip this archive and inspect its content in VS Code. The
software project contains:</p>
<ol style="list-style-type: decimal">
<li>a JSON file (<code>data.json</code>) - a snippet of which is shown
below - with data on extra-vehicular activities (EVAs or spacewalks)
undertaken by astronauts and cosmonauts from 1965 to 2013 (data provided
by NASA via its <a href="https://data.nasa.gov/Raw-Data/Extra-vehicular-Activity-EVA-US-and-Russia/9kcy-zwvn/about_data" class="external-link">Open
Data Portal</a>) <img src="fig/astronaut-data-json-snippet.png" alt="JSON data file snippet showing EVA/spacewalk data including EVA id, country, crew members, vehicle type, date of the spacewalk, duration, and purpose" class="figure">
</li>
<li>a Python script (<code>my code v2.py</code>) containing some
analysis. <img src="fig/astronaut-analysis-bad-code-screenshot.png" alt="A first few lines of a Python script used as example code for the episode" class="figure">
</li>
</ol>
<p>The code in the Python script does some common research tasks:</p>
<ul>
<li>Read in the data from the JSON file</li>
<li>Change the data from one data format to another and save to a file
in the new format (CSV)</li>
<li>Perform some calculations to generate summary statistics about the
data</li>
<li>Make a plot to visualise the data</li>
</ul>
<p>Let’s have a critical look at this code and think about how FAIR this
piece of software is.</p>
<div id="discussion3" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discussion<a class="anchor" aria-label="anchor" href="#discussion3"></a>
</h3>
<div class="callout-content">
<p>Compare this data and code to the software you chose earlier. Do you
think it is Findable, Accessible, Interoperable and Reusable? Give it a
score from 1 to 5 in each category, as in the previous exercise, and
then we will discuss it together.</p>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Give me a hint </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" aria-labelledby="headingHint1" data-bs-parent="#accordionHint1">
<div class="accordion-body">
<p>Here are some questions to help you assess where on the FAIR spectrum
the code is:</p>
<ol style="list-style-type: decimal">
<li><strong>Findable</strong></li>
</ol>
<ul>
<li>If these files were emailed to you, or sent on a chat platform, or
handed to you on a memory stick, how easy would it be to find them again
in 6 months, or 3 years?</li>
<li>If you asked your collaborator to give you the files again later on,
how would you describe them? Do they have a clear name?</li>
<li>If more data was added to the data set later, could you explain
exactly which data you used in the original analysis?</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><strong>Accessible</strong></li>
</ol>
<ul>
<li>If the person who gave you the files left your institution, how
would you get access to the files again?</li>
<li>Once you have the files, can you understand the code? Does it make
sense to you?</li>
<li>Do you need to log into anything to use this? Does it require
purchase or subscription to a service, platform or tool?</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><strong>Interoperable</strong></li>
</ol>
<ul>
<li>Is it clear what kind of input data it can read and what kind of
output data is produced? Will you be able to create the input files and
read the output files with the tools your community generally uses?</li>
<li>If you wanted to use this tool as part of a larger data processing
pipeline, does it allow you to link it with other tools in standard ways
such as an API or command-line interface?</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li><strong>Reusable</strong></li>
</ol>
<ul>
<li>Can you run the code on your platform/operating system (is there
documentation that covers installation instructions)? What programs or
libraries do you need to install to make it work (and which versions)?
Are these commonly used tools in your field?</li>
<li>Do you have explicit permission to use your collaborators code in
your own research and do they expect credit of some form (paper
authorship, citation or acknowledgement)? Are you allowed to edit,
publish or share the files with others?</li>
<li>Is the language used familiar to you and people in your research
field? Can you read the variable names in the code and the column names
in the data file and understand what they mean?</li>
<li>Is the code written in a way that allows you to easily modify or
extend it? Can you easily see what parameters to change to make it
calculate a different statistic, or run on a different input file?</li>
</ul>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>I would give the following scores:</p>
<p>F - 1/5</p>
<ul>
<li>Positive: None</li>
<li>Negative: No descriptive name, identifier or version number. No way
to find again except through one person and they might not remember what
file you mean.</li>
</ul>
<p>A - 2/5</p>
<ul>
<li>Positive: No accounts or paid services needed. Python is free, the
data is free and under a shareable license</li>
<li>Negative: No way to get the code without that one person. Not clear
where the data comes or what license it has unless you check the URL in
the comment.</li>
</ul>
<p>I - 3/5</p>
<ul>
<li>Positive: CSV and JSON files are common and well documented formats.
They are machine- and human-readable. They could be generated by or fed
into other programs in a pipeline.</li>
<li>Negative: JSON might not be well used in some fields. No API or
CLI.</li>
</ul>
<p>R - 2/5</p>
<ul>
<li>Positive: Can ask collaborator for explicit permissions for using
and modifying and how to credit them, if they did not specify before.
Python is a common language.</li>
<li>Negative: Python and library versions not specified. Bad variable
names, hardcoded inputs, no clear structure or documentation.</li>
</ul>
</div>
</div>
</div>
</div>
<p>Let’s now have a look into tools and practices that are commonly used
in research that can help us develop software in a more FAIR way.</p>
</section><section id="further-reading"><h2 class="section-heading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://fair-software.eu/" class="external-link">“Five recommendations for FAIR
software”</a></li>
<li><a href="https://librarycarpentry.org/Top-10-FAIR/files/poster_10things_FAIRsoftware.pdf" class="external-link">“10
easy things to make your research software FAIR”</a></li>
<li><a href="https://zenodo.org/records/11096498" class="external-link">Automating assessment
of the FAIR Principles for Research Software (FAIR4RS)</a></li>
<li>
<a href="https://esciencecenter-digital-skills.github.io/software-support-essentials/" class="external-link">Short
online courses</a> on various aspects of research software (including <a href="https://esciencecenter-digital-skills.github.io/software-support-essentials/fairsoftware" class="external-link">FAIR
reseach software</a> and data), by the NeSC Research Software
Support</li>
<li>
<a href="https://coderefinery.org/" class="external-link">CodeRefinery</a> - training and
e-Infrastructure for research software development</li>
<li>A <a href="https://fairsoftwarechecklist.net/" class="external-link">self-assessment
checklist for FAIR research software</a>, by the Netherlands eScience
Center and Australian Research Data Commons</li>
<li>
<a href="https://github.com/NLeSC/awesome-research-software-registries" class="external-link">Awesome
Research Software Registries</a> - a list of research software
registries (by country, organisation, domain and programming language)
where research software can be registered to help promote its
discovery</li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Open research means the outputs of publicly funded research are
publicly accessible with no or minimal restrictions.</li>
<li>Reproducible research means the data and software is available to
recreate the analysis.</li>
<li>FAIR data and software is Findable, Accessible, Interoperable,
Reusable.</li>
<li>These principles support research and researchers by saving time,
reducing barriers to discovery, and increasing impact of the research
output.</li>
</ul>
</div>
</div>
</div>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</section></section><section id="aio-03-tools"><p>Content from <a href="03-tools.html">Tools and practices for research software development</a></p>
<hr>
<p>Last updated on 2024-07-04 |
        
        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/03-tools.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What tools are available to help us develop research software in a
FAIR way?</li>
<li>How do the tools fit together to enable FAIR research?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Identify some key tools for FAIR research software</li>
<li>Explain how can these tools help us work in a FAIR way</li>
<li>Install and run these key tools on learner’s machines</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this course we will introduce you to a group of tools and
practices that are commonly used in research to help you develop
software in a FAIR way. You should already have these tools installed on
your machine following the setup instructions. Here we will give an
overview of the tools, how they help you achieve the aims of FAIR
research software and how they work together. In later episodes we will
describe some of these tools in more detail.</p>
<p>The table below summarises some tools and practices that can help
with each of the FAIR software principles.</p>
<table class="table">
<colgroup>
<col width="67%">
<col width="6%">
<col width="8%">
<col width="10%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th>Tools and practices</th>
<th>Findable</th>
<th>Accessible</th>
<th>Interoperable</th>
<th>Reusable</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Integrated development environments (e.g. VS Code) - development
environments (run, test, debug)</td>
<td></td>
<td></td>
<td></td>
<td>x</td>
</tr>
<tr class="even">
<td>Command line terminal (e.g. Bash)- reproducible
workflows/pipelines</td>
<td></td>
<td></td>
<td>x</td>
<td>x</td>
</tr>
<tr class="odd">
<td>Version control tools</td>
<td>x</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Testing</td>
<td></td>
<td>x</td>
<td></td>
<td>x</td>
</tr>
<tr class="odd">
<td>Coding conventions and documentation</td>
<td></td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="even">
<td>License</td>
<td></td>
<td>x</td>
<td></td>
<td>x</td>
</tr>
<tr class="odd">
<td>Citation</td>
<td>x</td>
<td></td>
<td></td>
<td>x</td>
</tr>
<tr class="even">
<td>Software repositories (e.g. GitHub)</td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<section id="writing-your-code"><h2 class="section-heading">Writing your code<a class="anchor" aria-label="anchor" href="#writing-your-code"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="development-environment">Development environment<a class="anchor" aria-label="anchor" href="#development-environment"></a>
</h3>
<p>One of the first choices we make when writing code is what tool to
use to do the writing. You can use a simple text editor such as Notepad,
a terminal based editor with syntax highlighting such as Vim or Emacs,
or one of many Integrated Development Environments (IDEs) which give you
the tools to write, run and debug your code and inspect the output all
in one place. Note that you should not use word processing software such
as Microsoft Word or Apple Pages to write code - these tools are
designed to create nicely formatted text for humans to read, so they may
add or change formatting, or insert invisible characters that the
programming language cannot interpret. Try opening a Word document in
Notepad to see an example.</p>
<p>This is mostly a personal choice as an experienced user of any of
these tools can write good, FAIR software efficiently, but IDEs are
popular because they are designed specifically for writing and running
code. There are some language specific IDEs such as PyCharm, and some
that can work with many languages like VS Code (Visual Studio Code).
IDEs also have add-ons that provide extra functionality, such as
checking your code as you type (similar to a spell-checker in Word),
highlighting when you are not following best practice, or even
automatically generating bits of code for you.</p>

<p>In this course we will use VS Code IDE, as it is free, available on
Windows, Mac and Linux operating systems, and can be used with many
programming languages. It is a single tool in which we can:</p>
<ul>
<li>view our file system</li>
<li>open many kinds of files</li>
<li>edit, compile, run and debug code</li>
<li>open a terminal to run command line tools (including version control
tool Git) or view code outputs</li>
</ul>
<p>Use VS Code to open the Python script and the data file from our
project.</p>
</div>
<div class="section level3">
<h3 id="command-line-toolshell">Command line tool/shell<a class="anchor" aria-label="anchor" href="#command-line-toolshell"></a>
</h3>
<p>In VS Code and similar IDEs you can often run the code by clicking a
button or pressing some keyboard shortcut. If you gave your code to a
colleague or collaborator they might use the same IDE or something
different, so you cannot guarantee that they will have the same buttons
and shortcuts as you.</p>
<p>In the previous episode we mentioned that interoperable software
should use standard protocols so that it can integrate with other tools.
One of these standard protocols/tools is using the inputs and outputs
via the command line terminal or shell. Command line terminal provides
one of the oldest ways of interacting with operating system so many
programs will have command line interfaces. Command line terminals, such
as Bash and Zsh, have their own language syntax that allow you to write
scripts and/or group and chain commands together to build up complex
workflows using several programs in different steps. They also use less
resources than a graphical user interface tool like an IDE, so are
commonly used on high-performance computers and other shared systems
where time, memory and processing power are expensive or in high
demand.</p>
<p>In this course we will use the Bash shell, which is one of the most
common and comes already installed on Mac and Linux operating systems.
You can create a command line interface to your program which will allow
it to be run on any system that has a Bash shell, and allow users to
change things like input and output files or choose different settings
or parameters without editing your code. With a command line interface,
your code can be built into automated workflows so that the whole
process from data gathering to analysis to saving publication-quality
results can be written in one Bash script and saved and reused.</p>
</div>
<div class="section level3">
<h3 id="version-control">Version control<a class="anchor" aria-label="anchor" href="#version-control"></a>
</h3>
<p>Version control means knowing what changes were made to your code and
when. Many people who have worked on large documents such as essays
start doing this by saving files called <code>essay_draft</code>,
<code>essay_version1.doc</code>, <code>essay_version2.doc</code>, and so
on. This can work on a small scale but most people find it quickly gets
confusing which version a certain change was made, or which version is
the one that you got feedback from a supervisor on. Using a version
control system helps you keep track of changes, including when you might
be working on shared code being edited by more than one person at a
time.</p>
<p>It also lets you assign version numbers or tags to particular
versions so you can then use those to refer back to them later. For
example, you can run your code and output some results and add a comment
to your output that those results were produced by version 2.4 of your
code, so if you try to run the same thing later and find it is
different, you can check if it is a change in the code due to using a
newer version, or a change in the data, or something else.</p>
<p>We will be using the Git version control system, which can be used
through the command line terminal, in a browser or in a desktop
application.</p>
</div>
<div class="section level3">
<h3 id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a>
</h3>
<p>Testing ensures that your code is correct and does what it is set out
to do. When you write code you often feel very confident that it is
perfect, but when writing bigger codes or code that is meant to do
complex operations it is very hard to consider all possible edge cases
or notice every single typing mistake. Testing also gives other people
confidence in your code as they can see an example of how it is meant to
run and be assured that it does work correctly on their machine.</p>
<p>We will show different ways to test your code for different purposes.
You need to think about what it is that is important to you and any
future users or collaborators to decide what kind of testing is most
useful for you.</p>
</div>
<div class="section level3">
<h3 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h3>
<p>Documentation comes in many forms - from the names of variables and
functions in your code, additional comments that explain some lines, up
to a whole website full of documentation with function definitions,
usage examples, tutorials and guides. You many not need as much
documentation as a large commercial software product, but making your
code Reusable relies on other people being able to understand what your
code does and how to use it.</p>
</div>
<div class="section level3">
<h3 id="licences-and-citation">Licences and citation<a class="anchor" aria-label="anchor" href="#licences-and-citation"></a>
</h3>
<p>A licence states what people can legally do with your code, and what
restrictions you have placed on it. Whenever you want to use someone
else’s code you should check what license they have and make sure your
use is legal. You may be restricted by your institution, your grant
funding, or by other tools you use that require certain licenses for you
to be compatible with them.</p>
<p>Having a citation instructions is not a legal requirement but if you
want to get academic credit for your work, you can make other people’s
life much easier by telling them how you would like to be credited.
Similarly, follow citation instructions ensures that when you use
others’ code in your research they will be credited accordingly.</p>
<p>Both licensing law and citation procedures can vary depending on your
country and institution, so remember to check with a local team where
you are. Your local research IT support or library teams would be a good
place to start.</p>
</div>
<div class="section level3">
<h3 id="code-repositories-and-registries">Code repositories and registries<a class="anchor" aria-label="anchor" href="#code-repositories-and-registries"></a>
</h3>
<p>Having somewhere to share your code is fundamental to making it
Findable. Your institution might have a code repository, your research
field may have a practice of sharing code via a specific website or
journal, or your version control system might include an online
component that makes sharing different versions of your code easy.
Again, remember to check the rules of your institution and grant on
publishing code, and any licenses for code you depend on or reuse.</p>
<p>We will discuss later how to share your code on GitHub and make it
easy for others to find and use.</p>
</div>
</section><section id="summary"><h2 class="section-heading">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="findable">Findable<a class="anchor" aria-label="anchor" href="#findable"></a>
</h3>
<ul>
<li>Describe your software - README</li>
<li>Software repository/registry - GitHub, registries</li>
<li>Unique persistent identifier - GitHub commits/tags/releases,
Zenodo</li>
</ul>
</div>
<div class="section level3">
<h3 id="accessible">Accessible<a class="anchor" aria-label="anchor" href="#accessible"></a>
</h3>
<ul>
<li>Software repository/registry</li>
<li>License</li>
<li>Language and dependencies</li>
</ul>
</div>
<div class="section level3">
<h3 id="interoperable">Interoperable<a class="anchor" aria-label="anchor" href="#interoperable"></a>
</h3>
<ul>
<li>Explain functionality - readme, inline comments and
documentation</li>
<li>Standard formats</li>
<li>Communication protocols - CLI/API</li>
</ul>
</div>
<div class="section level3">
<h3 id="reusable">Reusable<a class="anchor" aria-label="anchor" href="#reusable"></a>
</h3>
<ul>
<li>Document functionality/installation/running</li>
<li>Follow best practices where appropriate</li>
<li>License</li>
<li>Citation</li>
</ul>
</div>
</section><section id="checking-your-setup"><h2 class="section-heading">Checking your setup<a class="anchor" aria-label="anchor" href="#checking-your-setup"></a>
</h2>
<hr class="half-width">
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge1"></a>
</h3>
<div class="callout-content">
<p>Open a command line terminal and look at the prompt. Compare what you
see in the terminal with your neighbour, does it look the same or
different? What information is it telling you and why might this be
useful? What other information might you want?</p>
<p>Run the following commands in a terminal to check you have installed
the tools listed in the Setup page. Compare the output with your
neighbour and see if you can see any differences.</p>
<p>Checking the command line terminal:</p>
<ol style="list-style-type: decimal">
<li><code>date</code></li>
<li><code>echo $SHELL</code></li>
<li><code>pwd</code></li>
<li><code>whoami</code></li>
</ol>
<p>Checking Python:</p>
<ol start="5" style="list-style-type: decimal">
<li><code>python --version</code></li>
<li><code>python3 --version</code></li>
<li><code>which python</code></li>
<li><code>which python3</code></li>
</ol>
<p>Checking Git and GitHub:</p>
<ol start="9" style="list-style-type: decimal">
<li><code>git --help</code></li>
<li><code>git config --list</code></li>
<li><code>ssh -T git@github.com</code></li>
</ol>
<p>Checking VS Code:</p>
<ol start="12" style="list-style-type: decimal">
<li><code>code</code></li>
<li><code>code --list-extensions</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Give me a hint </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" aria-labelledby="headingHint1" data-bs-parent="#accordionHint1">
<div class="accordion-body">
<p>The prompt is the <code>$</code> character and any text that comes
before it, that is shown on every new line before you type in commands.
Type each of the commands one at a time and press enter. They should
give you a result by printing some text in the terminal.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The expected out put of each command is:</p>
<ol style="list-style-type: decimal">
<li>Today’s date</li>
<li>
<code>bash</code> or <code>zsh</code> - this tells you what shell
language you are using. In this course we show examples in Bash.</li>
<li>Your “present working directory” or the folder where your shell is
running</li>
<li>Your username</li>
<li>In this course we are using Python 3. If
<code>python --version</code> gives you Python 2.x you may have two
versions of Python installed on your computer and need to be careful
which one you are using.</li>
<li>Use this command to be certain you are using Python version 3, not
2, if you have both installed.</li>
<li>The file path to where the Python version you are calling is
installed.</li>
<li>If you have more than one version these should be different paths,
if both 5. and 6. gave the same result then 7. and 8. should match as
well.</li>
<li>The help message explaining how to use the <code>git</code>
command.</li>
<li>You should have <code>user.name</code>, <code>user.email</code> and
<code>core.editor</code> set in your Git configuration. Check that the
editor listed is one you know how to use.</li>
<li>This checks if you have set up your connection to GitHub correctly.
If is says <code>permission denied</code> you may need to look at the
instructions for setting up SSH keys again on the Setup page.</li>
<li>This should open VSCode in your current working directory. macOS
users may need to first open VS Code and <a href="https://code.visualstudio.com/docs/setup/mac#_launching-from-the-command-line" class="external-link">add
it to the PATH</a>.</li>
<li>You should have the extensions GitLens, Git Graph, Python, JSON and
Excel Viewer installed to use in this course.</li>
</ol>
</div>
</div>
</div>
</div>
<p>You may have noticed that our researcher has received the software
project they are meant to be working as a <code>.zip</code> archive via
email. In the next episode, we will learn a better practice for sharing
and tracking changes to a software project using version control
software Git and project sharing and collaboration platform GitHub.</p>
</section><section id="further-reading"><h2 class="section-heading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://coderefinery.github.io/reproducible-research/" class="external-link">CodeRefinery:
Reproducible research - preparing code to be usable by you and others in
the future</a></li>
<li>[Python IDEs and Code Editors (Guide) - Real
Python][real-python-ides]</li>
<li><a href="https://zenodo.org/" class="external-link">The Zenodo data repository</a></li>
<li><a href="https://faircookbook.elixir-europe.org/content/recipes/findability/zenodo-deposition.html" class="external-link">The
Fair Cookbook - Depositing to generic repositories - Zenodo use
case</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Automating your analysis with shell scripts allows you to save and
reproduce your methods.</li>
<li>Version control helps you back up your work, see how data and code
change over time and identify which analysis used which data and
code.</li>
<li>Programming languages each have advantages and disadvantages in
different situations. Use the correct tools for your own work.</li>
<li>Integrated development environments (IDEs) automate many coding
tasks, provide easy access to documentation, and can identify common
errors.</li>
<li>Testing helps you check that your code is behaving as expected and
will continue to do so in the future or when used by someone else.</li>
</ul>
</div>
</div>
</div>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</section></section><section id="aio-04-version-control"><p>Content from <a href="04-version-control.html">Version control</a></p>
<hr>
<p>Last updated on 2024-07-04 |
        
        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/04-version-control.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a version control system?</li>
<li>How can a version control system help make my work
reproducible?</li>
<li>What does a standard version control workflow look like?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Create self-contained commits using Git to incrementally save
work</li>
<li>Inspect logs to review the history of work</li>
<li>Push new work from a local machine to a remote server</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this episode, we will begin to cover the basics of version control
and explore how this tool assists us in producing reproducible and
sustainable scientific projects. We will create a new software project
from our existing code, make some changes to it and track them with
version control, and then push those changes to a remote server for
safe-keeping.</p>
<div class="section level3">
<h3 id="what-is-a-version-control-system">What is a version control system?<a class="anchor" aria-label="anchor" href="#what-is-a-version-control-system"></a>
</h3>
<p>Version control is the practice of tracking and managing changes to
files. Version control systems are software tools that assist in the
management of these file changes over time. They keep track of every
modification to the files in a special database that allows users to
“travel through time” and compare earlier versions of the files with the
current state.</p>
</div>
<div class="section level3">
<h3 id="motivation-for-using-a-version-control-system">Motivation for using a version control system<a class="anchor" aria-label="anchor" href="#motivation-for-using-a-version-control-system"></a>
</h3>
<p>The main motivation as scientists to use version control in our
projects is for reproducibility purposes. As hinted to above, by
tracking and storing every change we make, we can more effectively
restore the state of the project at any point in time. This is
incredibly useful if we want to reproduce results from a specific
version of the code, or track down changes that broke some
functionality.</p>
<p>The other benefit we gain is that version control provides us with
the provenance of the project. As we make each change, we also leave a
message about what the change was and why it was made. This improves the
transparency of the project and makes it auditable, which is good
scientific practice.</p>
<p>Later on in this workshop, we will also see how using a version
control system allows many people to collaborate on the same project
without a lot of manual effort to combine different items of work.</p>
</div>
<div class="section level3">
<h3 id="git-version-control-system">Git version control system<a class="anchor" aria-label="anchor" href="#git-version-control-system"></a>
</h3>
<p>Git is one of the version control systems around and the one we will
be using in this course. It is primarily used for source code management
in software development but it can be used to track changes in files in
general - it is particularly effective for tracking text-based files
(e.g. source code files in any programming language, CSV, Markdown,
HTML, CSS, Tex, etc. files).</p>
<p>The diagram below shows a typical software development lifecycle with
Git (starting from making changes locally) and the commonly used
commands to interact with different parts of the Git infrastructure. We
will cover all of the commands below during this course, this is just a
high level overview.</p>
<figure><img src="fig/ep03_fig05-git-lifecycle.svg" alt="Software development lifecycle with Git showing Git commands and flow of data between components of a Git system, including working directory, staging area, local and remote repository" class="figure mx-auto d-block"><div class="figcaption">Software development lifecycle with Git</div>
</figure><ul>
<li>
<strong>working directory</strong> - a local directory (including
any subdirectories) where your project files live and where you are
currently working. It is also known as the “untracked” area of Git. Any
changes to files will be marked by Git in the working directory. If you
make changes to the working directory and do not explicitly tell Git to
save them - you will likely lose those changes. Using
<code>git add FILENAME</code> command, you tell Git to start tracking
changes to file FILENAME within your working directory.</li>
<li>
<strong>staging area (index)</strong> - once you tell Git to start
tracking changes to files (with <code>git add FILENAME</code> command),
Git saves those changes in the staging area on your local machine. Each
subsequent change to the same file needs to be followed by another
<code>git add FILENAME</code> command to tell Git to update it in the
staging area. To see what is in your working directory and staging area
at any moment (i.e. what changes is Git tracking), run the command
<code>git status</code>.</li>
<li>
<strong>local repository</strong> - stored within the
<code>.git</code> directory of your project locally, this is where Git
wraps together all your changes from the staging area and puts them
using the <code>git commit</code> command. Each commit is a new,
permanent snapshot (checkpoint, record) of your project in time, which
you can share or revert to.</li>
<li>
<strong>remote repository</strong> - this is a version of your
project that is hosted somewhere on the Internet (e.g., on GitHub,
GitLab or somewhere else). While your project is nicely
version-controlled in your local repository, and you have snapshots of
its versions from the past, if your machine crashes - you still may lose
all your work. Furthermore, you cannot share or collaborate on this
local work with others easily. Working with a remote repository involves
pushing your local changes remotely (using <code>git push</code>) and
pulling other people’s changes from a remote repository to your local
copy (using <code>git fetch</code> or <code>git pull</code>) to keep the
two in sync in order to collaborate (with a bonus that your work also
gets backed up to another machine). Note that a common best practice
when collaborating with others on a shared repository is to always do a
<code>git pull</code> before a <code>git push</code>, to ensure you have
any latest changes before you push your own.</li>
</ul>
<p>Git is a distributed version control system allowing for multiple
people to be working on the same project (even the same file) at the
same time. Initially, we will use Git to start tracking changes to files
on our local machines; later on we will start sharing our work on GitHub
allowing other people to see and contribute to our work.</p>
</div>
<div class="section level3">
<h3 id="create-a-new-repository">Create a new repository<a class="anchor" aria-label="anchor" href="#create-a-new-repository"></a>
</h3>
<p>Create a new directory in the <code>Desktop</code> folder for our
work, and then change the current working directory to the newly created
one:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> mkdir spacewalks</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="ex">$</span> cd spacewalks</span></code></pre>
</div>
<p>We tell Git to make <code>spacewalks</code> a repository – a place
where Git can store versions of our files:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">git</span> init</span></code></pre>
</div>
<p>We can check everything is setup correctly by asking Git to tell us
the status of our project:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main

No commits yet

nothing to commit (create/copy files and use "git add" to track)</code></pre>
</div>
<p>The exact wording of this output may be slightly different if you are
using a different version of Git.</p>
</div>
<div class="section level3">
<h3 id="add-initial-files-into-our-repository">Add initial files into our repository<a class="anchor" aria-label="anchor" href="#add-initial-files-into-our-repository"></a>
</h3>
<p>During the <a href="./index.html#astronaut-data-and-analysis-code">setup</a> for this
course, you have been provided with a <code>.zip</code> archive with two
files:</p>
<ul>
<li><code>my code v2.py</code></li>
<li><code>data.json</code></li>
</ul>
<p>We need to move these files into our git folder. You can either drag
and drop the files from a file explorer window into the left pane of the
VS Code IDE, or you can use the <a href="https://linuxcommandlibrary.com/man/mv" class="external-link"><code>mv</code>
command</a> in the command line terminal.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">mv</span> /path/where/you/saved/the/file/my\ code\ v2.py ~/Desktop/spacewalks/</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">mv</span> /path/where/you/saved/the/file/data.json ~/Desktop/spacewalks/</span></code></pre>
</div>
<p>Let’s see what that has done to our repository by running
<code>git status</code> again:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">git</span> status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main

No commits yet

Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)
	data.json
	my code v2.py

nothing added to commit but untracked files present (use "git add" to track)</code></pre>
</div>
<p>This is telling us that Git has noticed the new files. The “untracked
files” message means that there is a file in the directory that Git
isn’t keeping track of. We can tell Git to track a file using
<code>git add</code>:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> git add my<span class="dt">\ </span>code<span class="dt">\ </span>v2.py</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">$</span> git add data.json</span></code></pre>
</div>
<p>and then check the right thing happened:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main

No commits yet

Changes to be committed:
  (use "git rm --cached &lt;file&gt;..." to unstage)
	new file:   data.json
	new file:   my code v2.py</code></pre>
</div>
<p>Git now knows that it’s supposed to keep track of
<code>my code v2.py</code> and <code>data.json</code>, but it hasn’t
recorded these changes as a commit yet. To get it to do that, we need to
run one more command:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add an example script and dataset to work on"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main (root-commit) bf55eb7] Add and example script and dataset to work on
 2 files changed, 437 insertions(+)
 create mode 100644 data.json
 create mode 100644 my code v2.py</code></pre>
</div>
<p>When we run <code>git commit</code>, Git takes everything we have
told it to save by using <code>git add</code> and stores a copy
permanently in a special <code>.git</code> directory. This permanent
copy is called a commit (or revision).</p>
<p>We use the flag <code>-m</code> (for message) to record a short,
descriptive, and specific comment that will help us remember later on
what we did and why. If we only run <code>git commit</code> without the
<code>-m</code> option, Git will launch a text editor so that we can
write a longer message.</p>
<p>Good commit messages start with a brief (&lt;50 characters) statement
about the changes made in the commit. Generally, the message should
complete the sentence “If applied, this commit will…”. If you want to go
into more detail, add a blank line between the summary line and your
additional notes. Use this additional space to explain why you made
changes and/or what their impact will be.</p>
<p>If we run <code>git status</code> now, we see:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
nothing to commit, working tree clean</code></pre>
</div>
<p>This tells us that everything is up to date.</p>
<div id="where-are-my-changes" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="where-are-my-changes" class="callout-inner">
<h3 class="callout-title">Where are my changes?<a class="anchor" aria-label="anchor" href="#where-are-my-changes"></a>
</h3>
<div class="callout-content">
<p>If we run <code>ls</code> at this point, we will still see only two
files, the script and the dataset. That’s because Git saves information
about files’ history in the special <code>.git</code> directory
mentioned earlier so that our filesystem does not become cluttered (and
so that we cannot accidentally edit or delete an old version).</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="make-a-change">Make a change<a class="anchor" aria-label="anchor" href="#make-a-change"></a>
</h3>
<p>Did you notice how when we were typing the Python script into the
terminal, we had to add a slash before the space like this:
<code>my\ code\ v2.py</code>? Using a backslash in this way is called
‘escaping’ and it lets the terminal know to treat the space as part of
the filename, and not a separate argument. However, it is pretty
annoying and considered bad practice to have spaces in your filenames
like this, especially if you will be manipulating them from the
terminal. So, let’s go ahead and remove the space from the filename
altogether and replace it with a hyphen instead. You can use the
<code>mv</code> command again like so:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> mv my<span class="dt">\ </span>code<span class="dt">\ </span>v2.py my-code-v2.py</span></code></pre>
</div>
<p>If you run <code>git status</code> again, you’ll see Git has noticed
the change in the filename.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes not staged for commit:
  (use "git add/rm &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
	deleted:    my code v2.py

Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)
	my-code-v2.py

no changes added to commit (use "git add" and/or "git commit -a")</code></pre>
</div>
<div id="add-and-commit-the-changed-file" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="add-and-commit-the-changed-file" class="callout-inner">
<h3 class="callout-title">Add and commit the changed file<a class="anchor" aria-label="anchor" href="#add-and-commit-the-changed-file"></a>
</h3>
<div class="callout-content">
<p>Using the Git commands demonstrated so far, save the change you just
made to the Python script.</p>
<p>Remember, commit messages should be descriptive and complete the
sentence “If applied, this commit will…”. You can also use
<code>git status</code> to check the status of your project at any
time.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>To save the changes to the renamed Python file, use the following Git
commands:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> git add my<span class="dt">\ </span>code<span class="dt">\ </span>v2.py my-code-v2.py</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
	renamed:    my code v2.py -&gt; my-code-v2.py</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Replace spaces in Python filename with hyphens"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main 8ea2a0b] Replace spaces in Python filename with hyphens
 1 file changed, 0 insertions(+), 0 deletions(-)
 rename my code v2.py =&gt; my-code-v2.py (100%)</code></pre>
</div>
<div class="section level3">
<h3 id="advanced-solution">Advanced solution<a class="anchor" aria-label="anchor" href="#advanced-solution"></a>
</h3>
<p>We initially renamed the Python file using the <code>mv</code>
command, and we than had to <code>git add</code> <em>both</em>
<code>my-code-v2.py</code> and <code>my\ code\ v2.py</code>.
Alternatively, we could have used Git’s own <code>mv</code> command like
so:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> git mv my<span class="dt">\ </span>code<span class="dt">\ </span>v2.py my-code-v2.py</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
	renamed:    my code v2.py -&gt; my-code-v2.py</code></pre>
</div>
<p><code>git mv</code> is the equivalent of running <code>mv ...</code>
followed immediately by <code>git add ...</code> of the old and new
filenames, so the changes have been staged automatically. All that needs
to be done is to commit them.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Replace spaces in Python filename with hyphens"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main 6499bd7] Replace spaces in Python filename with hyphens
 1 file changed, 0 insertions(+), 0 deletions(-)
 rename my code v2.py =&gt; my-code-v2.py (100%)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="rename-our-data-and-output-files">Rename our data and output files<a class="anchor" aria-label="anchor" href="#rename-our-data-and-output-files"></a>
</h3>
<p>Now that we have seen how to rename files in Git, let’s:</p>
<ol style="list-style-type: lower-roman">
<li>give our input data file and script more meaningful names and</li>
<li>choose informative file names for our output data file and
plot.</li>
</ol>
<p>First let’s update file names in our script.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>data_f <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>data_t <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>,<span class="st">'w'</span>)</span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>g_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span>   </span></code></pre>
</div>
<p>Now, let’s actually rename our files on the file system using git and
commit our changes.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">git</span> mv data.json eva-data.json</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="fu">git</span> mv my-code-v2.py eva_data_analysis.py</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="fu">git</span> add eva_data_analysis.py</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="fu">git</span> status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
	renamed:    data.json -&gt; eva-data.json
	renamed:    my-code-v2.py -&gt; eva_data_analysis.py</code></pre>
</div>
<p>Finally, let’s commit out changes:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Implement informative file names"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="commit-messages">Commit messages<a class="anchor" aria-label="anchor" href="#commit-messages"></a>
</h3>
<p>We have already met the concept of commit messages when we made and
stored changes to our code files. Commit messages are short descriptions
of, and the motivation for, what a commit will achieve. It is therefore
important to take some time to ensure these commit messages are helpful
and descriptive, as when work is reviewed (by your future self or a
collaborator) they provide the context about what changes were made and
why. This can make tracking down specific changes in commits much
easier, without having to inspect the code or files themselves.</p>
<p>Generally, commit messages should complete the sentence “If applied,
this commit will…”. Most often a short, 50 character (ish) title will
suffice, but a longer-form description of the changes can also be
provided by leaving a blank space between the summary line and the rest
of the message. There are many different conventions that can be used
for commit messages that range from very structured (such as <a href="https://www.conventionalcommits.org/en/v1.0.0/" class="external-link">conventional
commits</a>) to the fun (such as <a href="https://gitmoji.dev/" class="external-link">gitmoji</a>). The important thing is that it
is clear to the reader what a commit is doing and why. If a project is
using a specific commit message convention, this will often be described
in their <a href="https://en.wikipedia.org/wiki/Contributing_guidelines" class="external-link">contributing
guidelines</a>.</p>
<div id="good-commit-messages" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="good-commit-messages" class="callout-inner">
<h3 class="callout-title">Good commit messages<a class="anchor" aria-label="anchor" href="#good-commit-messages"></a>
</h3>
<div class="callout-content">
<p>Read the two commit messages below. In pairs or small groups, discuss
which messages help you understand more about what the commit author
did. What about the commit messages do you find helpful or not?</p>
<ol style="list-style-type: decimal">
<li><div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   [main 7cf85f6] Change variable
     1 file changed, 1 insertion(+), 1 deletion(-)</code></pre>
</div></li>
<li><div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   [main 8baf69d] Change variable name from columns to column_headers
    1 file changed, 1 insertion(+), 1 deletion(-)</code></pre>
</div></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Commit message (2) is the better commit message since it is more
descriptive about what the author did. This message could be improved
further by adding a blank line then further describing the change
discussing, for example, why the variable name was changed.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="self-contained-commits">Self-contained commits<a class="anchor" aria-label="anchor" href="#self-contained-commits"></a>
</h3>
<p>If we want our commit messages to be descriptive and help us
understand the changes in the project over time, then we also have to
make commits that are very self-contained. That is to say that each
commit we make should only change one, logical thing. By “logical” here,
we mean that one aspect of updating the files has been achieved to
completion - such as adding docstrings or refactoring a function - we
don’t mean that changes are committed line-by-line. See the <a href="https://wiki.openstack.org/wiki/GitCommitMessages#Things_to_avoid_when_creating_commits" class="external-link">“Things
to avoid when creating commits” section</a> of <a href="https://wiki.openstack.org/wiki/GitCommitMessages" class="external-link">Openstack’s
“Git Commit Good Practice” documentation</a> for examples of logical,
self-contained commits, and commits that don’t follow this practice.</p>
<p>The reasons that self-contained commits are important are that: it
helps with reviewing changes if each commit tackles one step; if code
breaks, tracking down the specific change that caused the break is
simpler; if you need to undo changes, you can remove them in small
increments, rather than losing a lot of unrelated work along with the
change you do want to remove.</p>
<div id="understanding-commit-contents" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="understanding-commit-contents" class="callout-inner">
<h3 class="callout-title">Understanding commit contents<a class="anchor" aria-label="anchor" href="#understanding-commit-contents"></a>
</h3>
<div class="callout-content">
<p>Below are the <code>diffs</code> of two commits. A <code>diff</code>
shows the differences in a file (or files!) compared to the previous
commit in the history so you can what has changed. The lines that begin
with <code>+</code>s represent additions, and the lines that begin with
<code>-</code>s represent deletions. Compare these two commit
<code>diff</code>s. Can you understand what the commit author was trying
to achieve in each commit? How many changes have they tried to make in
each commit? Discuss in pairs or small groups.</p>
<ol style="list-style-type: decimal">
<li><figure><img src="fig/ex-diff-1.png" alt="Example Diff 1" class="figure mx-auto d-block"><div class="figcaption">Example Diff 1</div>
</figure></li>
<li><figure><img src="fig/ex-diff-2.png" alt="Example Diff 2" class="figure mx-auto d-block"><div class="figcaption">Example Diff 2</div>
</figure></li>
</ol>
<p>To find out more about how to generate <code>diffs</code>, you can
read the <a href="git-diff-docs">Git documentation</a> or the <a href="https://swcarpentry.github.io/git-novice/04-changes.html" class="external-link">Tracking
Changes episode</a> from the <a href="https://swcarpentry.github.io/git-novice" class="external-link">Software Carpentry
Version control with Git lesson</a>.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>The git <code>diff</code> presented in option (1) is cleaner. The
author has only tackled one thing: placing the import statements at the
top of the file. This kind of commit is much easier to review in
isolation, and will be easier to track down if <a href="https://git-scm.com/docs/git-bisect" class="external-link"><code>git bisect</code></a>
is required.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="git-logs">Git logs<a class="anchor" aria-label="anchor" href="#git-logs"></a>
</h3>
<p>If we want to know what we’ve done recently, we can ask Git to show
us the project’s history using <code>git log</code>:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="ex">$</span> git log</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>commit 6499bd731ab50fde2731ce2642f143cea86450b6 (HEAD -&gt; main)
Author: Sarah Gibson &lt;drsarahlgibson@gmail.com&gt;
Date:   Mon Jun 17 11:55:17 2024 +0100

    Replace spaces in Python filename with hyphens

commit bf55eb7639a6508658aaa1bfeaeb9f115d1bcc40
Author: Sarah Gibson &lt;drsarahlgibson@gmail.com&gt;
Date:   Mon Jun 17 11:52:02 2024 +0100

    Add and example script and dataset to work on</code></pre>
</div>
<p>This output demonstrates why it is important to write meaningful and
descriptive commit messages. Without the messages, we will only have the
commit hashes (the strings of random numbers and letters after “commit”)
to identify each commit, which would be impossible for us.</p>
<p>We may need to inspect our recent commits to establish where a bug
was introduced or because we have decided that our recent work isn’t
suitable and we wish to discard it and start again. Once we have
identified the last commit we want to keep, we can revert the state of
our project back to that commit with a few different methods:</p>
<ul>
<li>
<a href="https://git-scm.com/docs/git-revert" class="external-link"><code>git revert</code></a>:
This command reverts a commit by creating a new commit that reverses the
action of the supplied commit or list of commits. Because this command
creates new commits, your Git history is more complete and tells the
story of exactly what work you did, i.e., deciding to discard some
work.</li>
<li>
<a href="https://git-scm.com/docs/git-reset" class="external-link"><code>git reset</code></a>:
This command will recover the state of the project at the specified
commit. What is done with the commits you had mave since is defined by
some optional flags:
<ul>
<li>
<code>--soft</code>: Any changes you have made since the specified
commit would be preserved and left as “Changes to be committed”</li>
<li>
<code>--mixed</code>: Any changes you have made since the specified
commit would be preserved but not marked for commit (this is the default
action)</li>
<li>
<code>--hard</code>: Any changes you have made since the specified
commit are discarded.</li>
</ul>
</li>
</ul>
<p>Using <code>git reset</code> command produces a “cleaner” history,
but does not tell the full story and your work.</p>
</div>
<div class="section level3">
<h3 id="pushing-to-a-git-server">Pushing to a Git server<a class="anchor" aria-label="anchor" href="#pushing-to-a-git-server"></a>
</h3>
<p>Git is also a distributed version control system, allowing us to
synchronise work between any two or more copies of the same repository -
the ones that are not located on your machine. So far we have have been
working with a project on our local machines and, even though we have
been incrementally saving our work in a way that is recoverable (version
control), if anything happened to our laptops, the whole project would
be lost. However, we can use the distribution aspect of Git to push our
projects and histories to a server (someone else’s computer) so that
they are accessible and retrievable if the worst were to happen to our
machines.</p>
<figure><img src="fig/git-distributed.png" alt="2 Git repositories belonging to 2 different developers linked to a central repository and one another showing two way flow of information in each link" class="figure mx-auto d-block"><div class="figcaption">Git - distributed version control system, image
from W3Docs (freely available)</div>
</figure><p>Distributing our projects in this way also opens us up to
collaboration, since colleagues would be able to access our projects,
make their own copies on their machines, and conduct their own work.</p>
<p>We will now go through how to push a local project to <a href="https://github.com" class="external-link">GitHub</a>, though other Git hosting services
are available, such as <a href="https://gitlab.com" class="external-link">GitLab</a> and <a href="https://bitbucket.org" class="external-link">Bitbucket</a>.</p>
<ol style="list-style-type: decimal">
<li><p>In your browser, navigate to <a href="https://github.com" class="external-link uri">https://github.com</a> and sign into your account</p></li>
<li>
<p>In the top right hand corner of the screen, there is a menu
labelled “+” with a dropdown. Click the dropdown and select “New
repository” from the options.</p>
<figure><img src="fig/ep03_fig01-create_new_repo.jpg" class="image-with-shadow figure mx-auto d-block" alt-text="Selecting the 'New repository' option from GitHub's dropdown menu" alt="Creating a new GitHub repository"><div class="figcaption"><em>Creating a new GitHub repository</em></div>
</figure>
</li>
<li>
<p>You will be presented with some options to fill in or select
while creating your repository. In the “Repository Name” field, type
“spacewalks”. This is the name of your project and matches the name of
your local folder.</p>
<figure><img src="fig/ep03_fig02-repository_name.png" class="image-with-shadow figure mx-auto d-block" alt-text="Setting the name of the repository on GitHub" alt="Naming the GitHub repository"><div class="figcaption"><em>Naming the GitHub repository</em></div>
</figure><p>Ensure the visibility of the repository is “Public” and leave all
other options blank. Since this repository will be connected to a local
repository, it needs to be empty which is why we don’t initialise with a
README or add a license or <code>.gitignore</code> file. Click “Create
repository” at the bottom of the page.</p>
<figure><img src="fig/ep03_fig03-create_repository.jpg" class="image-with-shadow figure mx-auto d-block" alt-text="Completing the creation of the GitHub repository" alt="Complete GitHub repository creation"><div class="figcaption"><em>Complete GitHub repository
creation</em></div>
</figure>
</li>
<li>
<p>Now you have created your repository, you need to send the files
and the history you have stored on your local computer to GitHub’s
servers. GitHub provides some instructions on how to do that for
different scenarios. You want to use the instructions under the heading
“…or push an existing repository from the command line”. These
instructions will look like this:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="fu">git</span> remote add origin https://github.com/<span class="op">&lt;</span>YOUR_GITHUB_HANDLE<span class="op">&gt;</span>/spacewalks.git</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-M</span> main</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin main</span></code></pre>
</div>
<p>You can copy these commands using the button that looks like two
overlapping squares to the right-hand side of the commands. Paste them
into your terminal and run them.</p>
<figure><img src="fig/ep03_fig04-copy_commands.jpg" class="image-with-shadow figure mx-auto d-block" alt-text="Copying the commands to sync the local and remote repositories" alt="Copy the commands to sync the local and remote repositories"><div class="figcaption"><em>Copy the commands to sync the local and
remote repositories</em></div>
</figure>
</li>
<li><p>If you refresh your browser window, you should now see the two
files <code>my-code-v2.py</code> and <code>data.json</code> visible in
the GitHub repository, matching what you have locally on your
machine.</p></li>
</ol>
<p>Let’s explain a bit more about what those commands did…</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="fu">git</span> remote add origin https://github.com/<span class="op">&lt;</span>YOUR_GITHUB_HANDLE<span class="op">&gt;</span>/spacewalks.git</span></code></pre>
</div>
<p>This command tells Git to create a <code>remote</code> called
“origin” and link it to the URL of your GitHub repository. A
<code>remote</code> is a version control concept where two (or more)
repositories are connected to each other in such a way that they can be
kept in sync by exchanging commits. “origin” is a name used to refer to
the remote repository. It could be called anything, but “origin” is a
convention that is often used by default in Git and GitHub since it
indicates which repository is considered the “source of truth”,
particularly useful when many people are collaborating on the same
repository.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-M</span> main</span></code></pre>
</div>
<p><code>git branch</code> is a command used to manage branches. We will
discuss branches later on in the course. This command ensures the branch
we are working on is called “main”. This will be the default branch of
the project for everyone working on it.</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin main</span></code></pre>
</div>
<p>The <code>git push</code> command is used to update remote references
with any changes you have made locally. This command tells Git to update
the “main” branch on the “origin” remote. The <code>-u</code> flag
(short for <code>--set-upstream</code>) will set a tracking reference,
so that in the future <code>git push</code> can be run without the need
to specify the remote and reference name.</p>
<div id="terminology" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="terminology" class="callout-inner">
<h3 class="callout-title">Terminology<a class="anchor" aria-label="anchor" href="#terminology"></a>
</h3>
<div class="callout-content">
<p>In pairs or small groups, discuss the difference between the terms
<code>remote</code> and <code>origin</code>. What is the definition of
each term?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<ul>
<li>
<code>remote</code>: a version control concept where two (or more)
repositories are linked together in such a way that they can be kept in
sync by exchanging commits</li>
<li>
<code>origin</code>: a common Git/GitHub naming convention for the
remote repository to designate the source of truth for
collaborators</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>During this episode, we have covered the basics of using version
control to track changes to our projects. We have seen how to: create
new projects, incrementally save progress, construct informative commit
messages and content, inspect the history of our projects and retrieve
the state, and push our projects to distributed servers.</p>
<p>These skills are critical to reproducible and sustainable science
since using version control makes our work self-documenting - the commit
messages provide the narrative of what changed and why - and we can
recover the exact state of our projects at a specific time, so we can
more reliably run the “same” code again. We can also back up our
projects by pushing them to distributed, remote servers and reduce the
risk of data loss over the course of a project’s lifetime.</p>
<p>Version control is a vast topic and we have only covered the absolute
basics here as a brief introduction. For a deeper and more complete dive
into the subject matter, please see the “Further reading” section
below.</p>
</div>
<section id="further-reading"><h2 class="section-heading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://swcarpentry.github.io/git-novice" class="external-link">Software
Carpentry’s Git Novice lesson</a></li>
<li><a href="https://the-turing-way.netlify.app/reproducible-research/vcs" class="external-link">The
Turing Way’s “Guide to Version Control”</a></li>
<li><a href="https://www.pluralsight.com/courses/how-git-works" class="external-link">“How Git
Works” course on Pluralsight</a></li>
<li><a href="https://cbea.ms/git-commit/" class="external-link">How to Write a Good Commit
Message</a></li>
<li><a href="https://wiki.openstack.org/wiki/GitCommitMessages" class="external-link">Git
Commit Good Practice</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>A version control system is software that tracks and manages changes
to a project over time</li>
<li>Using version control aids reproducibility since the exact state of
the software that produced an output can be recovered</li>
<li>A commit represents the smallest unit of change to a project</li>
<li>Commit messages describe what each commit contains and should be
descriptive</li>
<li>Logs can be used to overview the history of a project</li>
</ul>
</div>
</div>
</div>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</section></section><section id="aio-05-code-readability"><p>Content from <a href="05-code-readability.html">Code readability</a></p>
<hr>
<p>Last updated on 2024-07-04 |
        
        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/05-code-readability.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Why does code readability matter?</li>
<li>How can I organise my code to be more readable?</li>
<li>What types of documentation can I include to improve the readability
of my code?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Organise code into reusable functions that achieve a singular
purpose</li>
<li>Choose function and variable names that help explain the purpose of
the function or variable</li>
<li>Write informative inline comments and docstrings to provide more
detail about what the code is doing</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this episode, we will introduce the concept of readable code and
consider how it can help create reusable scientific software and empower
collaboration between researchers.</p>
<section id="motivation-for-code-readability"><h2 class="section-heading">Motivation for code readability<a class="anchor" aria-label="anchor" href="#motivation-for-code-readability"></a>
</h2>
<hr class="half-width">
<p>When someone writes code, they do so based on requirements that are
likely to change in the future. Requirements change because software
interacts with the real world, which is dynamic. When these requirements
change, the developer (who is not necessarily the same person who wrote
the original code) must implement the new requirements. They do this by
reading the original code to understand the different abstractions, and
identify what needs to change. Readable code facilitates the reading and
understanding of the abstraction phases and, as a result, facilitates
the evolution of the codebase. Readable code saves future developers’
time and effort.</p>
<p>In order to develop readable code, we should ask ourselves: “If I
re-read this piece of code in fifteen days or one year, will I be able
to understand what I have done and why?” Or even better: “If a new
person who just joined the project reads my software, will they be able
to understand what I have written here?”</p>
<p>We will now learn about a few software best practices we can follow
to help create readable code.</p>
</section><section id="code-layout"><h2 class="section-heading">Code layout<a class="anchor" aria-label="anchor" href="#code-layout"></a>
</h2>
<hr class="half-width">
<p>Our script currently places import statements throughout the code.
Python convention is to place all import statements at the top of the
script so that dependant libraries are clearly visible and not buried
inside the code (even though there are standard ways of describing
dependencies - e.g. using <code>requirements.txt</code> file). This will
help readability (accessibility) and reusability of our code.</p>
<p>Our code after the modification should look like the following.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>data_f <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>data_t <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>,<span class="st">'w'</span>)</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>g_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span>   </span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>fieldnames <span class="op">=</span> (<span class="st">"EVA #"</span>, <span class="st">"Country"</span>, <span class="st">"Crew    "</span>, <span class="st">"Vehicle"</span>, <span class="st">"Date"</span>, <span class="st">"Duration"</span>, <span class="st">"Purpose"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>data<span class="op">=</span>[]</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">374</span>):</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>    line<span class="op">=</span>data_f.readline()</span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>    <span class="bu">print</span>(line)</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>    data.append(json.loads(line[<span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="co">#data.pop(0)</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="co">## Comment out this bit if you don't want the spreadsheet</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a>w<span class="op">=</span>csv.writer(data_t)</span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a>time <span class="op">=</span> []</span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a>date <span class="op">=</span>[]</span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a>j<span class="op">=</span><span class="dv">0</span></span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> data:</span>
<span id="cb1-28"><a href="#cb1-28" tabindex="-1"></a>    <span class="bu">print</span>(data[j])</span>
<span id="cb1-29"><a href="#cb1-29" tabindex="-1"></a>    <span class="co"># and this bit</span></span>
<span id="cb1-30"><a href="#cb1-30" tabindex="-1"></a>    w.writerow(data[j].values())</span>
<span id="cb1-31"><a href="#cb1-31" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'duration'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb1-32"><a href="#cb1-32" tabindex="-1"></a>        tt<span class="op">=</span>data[j][<span class="st">'duration'</span>]</span>
<span id="cb1-33"><a href="#cb1-33" tabindex="-1"></a>        <span class="cf">if</span> tt <span class="op">==</span> <span class="st">''</span>:</span>
<span id="cb1-34"><a href="#cb1-34" tabindex="-1"></a>            <span class="cf">pass</span></span>
<span id="cb1-35"><a href="#cb1-35" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-36"><a href="#cb1-36" tabindex="-1"></a>            t<span class="op">=</span>dt.datetime.strptime(tt,<span class="st">'%H:%M'</span>)</span>
<span id="cb1-37"><a href="#cb1-37" tabindex="-1"></a>            ttt <span class="op">=</span> dt.timedelta(hours<span class="op">=</span>t.hour, minutes<span class="op">=</span>t.minute, seconds<span class="op">=</span>t.second).total_seconds()<span class="op">/</span>(<span class="dv">60</span><span class="op">*</span><span class="dv">60</span>)</span>
<span id="cb1-38"><a href="#cb1-38" tabindex="-1"></a>            <span class="bu">print</span>(t,ttt)</span>
<span id="cb1-39"><a href="#cb1-39" tabindex="-1"></a>            time.append(ttt)</span>
<span id="cb1-40"><a href="#cb1-40" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">'date'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb1-41"><a href="#cb1-41" tabindex="-1"></a>                date.append(dt.datetime.strptime(data[j][<span class="st">'date'</span>][<span class="dv">0</span>:<span class="dv">10</span>], <span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))</span>
<span id="cb1-42"><a href="#cb1-42" tabindex="-1"></a>                <span class="co">#date.append(data[j]['date'][0:10])</span></span>
<span id="cb1-43"><a href="#cb1-43" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb1-45"><a href="#cb1-45" tabindex="-1"></a>                time.pop(<span class="dv">0</span>)</span>
<span id="cb1-46"><a href="#cb1-46" tabindex="-1"></a>    j<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb1-47"><a href="#cb1-47" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" tabindex="-1"></a>t<span class="op">=</span>[<span class="dv">0</span>]</span>
<span id="cb1-49"><a href="#cb1-49" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> time:</span>
<span id="cb1-50"><a href="#cb1-50" tabindex="-1"></a>    t.append(t[<span class="op">-</span><span class="dv">1</span>]<span class="op">+</span>i)</span>
<span id="cb1-51"><a href="#cb1-51" tabindex="-1"></a></span>
<span id="cb1-52"><a href="#cb1-52" tabindex="-1"></a>date,time <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span><span class="bu">sorted</span>(<span class="bu">zip</span>(date, time)))</span>
<span id="cb1-53"><a href="#cb1-53" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" tabindex="-1"></a>plt.plot(date,t[<span class="dv">1</span>:], <span class="st">'ko-'</span>)</span>
<span id="cb1-55"><a href="#cb1-55" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb1-56"><a href="#cb1-56" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb1-57"><a href="#cb1-57" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb1-58"><a href="#cb1-58" tabindex="-1"></a>plt.savefig(g_file)</span>
<span id="cb1-59"><a href="#cb1-59" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>Let’s make sure we commit our changes.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">git</span> add eva_data_analysis.py</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Move import statements to the top of the script"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main a97a9e1] Move import statements to the top of the script
 1 file changed, 4 insertions(+), 4 deletions(-)</code></pre>
</div>
</section><section id="standard-libraries"><h2 class="section-heading">Standard libraries<a class="anchor" aria-label="anchor" href="#standard-libraries"></a>
</h2>
<hr class="half-width">
<p>Our script currently reads the data line-by-line from the JSON data
file and uses custom code to manipulate the data. Variables of interest
are stored in lists but there are more suitable data structures
(e.g. data frames) to store data in our case. By choosing custom code
over standard and well-tested libraries, we are making our code less
readable and understandable and more error-prone.</p>
<p>The main functionality of our code can be rewritten as follows using
<code>Pandas</code> library to load and manipulate the data in data
frames.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>data_f <span class="op">=</span> <span class="st">'./eva-data.json'</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>data_t <span class="op">=</span> <span class="st">'./eva-data.csv'</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>g_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>data <span class="op">=</span> pd.read_json(data_f, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>data[<span class="st">'eva'</span>] <span class="op">=</span> data[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>data.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>data.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>data.to_csv(data_t, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>data[<span class="st">'duration_hours'</span>] <span class="op">=</span> data[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a>data[<span class="st">'cumulative_time'</span>] <span class="op">=</span> data[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a>plt.plot(data[<span class="st">'date'</span>], data[<span class="st">'cumulative_time'</span>], <span class="st">'ko-'</span>)</span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a>plt.savefig(g_file)</span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>We should replace the existing code in our Python script
<code>eva_data_analysis.py</code> with the above code and commit the
changes. Remember to use an informative commit message.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">git</span> add eva_data_analysis.py</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Refactor code to use standard libraries"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main 0ba9b04] "Refactor code to use standard libraries""
 1 file changed, 11 insertions(+), 46 deletions(-)</code></pre>
</div>
</section><section id="command-line-interface-to-code"><h2 class="section-heading">Command-line interface to code<a class="anchor" aria-label="anchor" href="#command-line-interface-to-code"></a>
</h2>
<hr class="half-width">
<p>Let’s add a command-line interface to our script to allow us pass the
data file to be read and the output file to be written to as parameters
to our script and avoid hard-coding them. This improves interoperability
and reusability of our code as it can now be run from the command line
terminal and integrated into other scripts or workflows/pipelines
(e.g. another script can produce our input data and can be “chained”
with our code in a data analysis pipeline).</p>
<p>We will use <code>sys.argv</code> library to read the command line
arguments passes to our script and make them available in our code as a
list. The first element of the list is the name of the script itself,
and the following elements are the arguments passed to the script.</p>
<p>Our modified code will now look as follows.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">&lt;</span> <span class="dv">3</span>:</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>        data_f <span class="op">=</span> <span class="st">'./eva-data.json'</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>        data_t <span class="op">=</span> <span class="st">'./eva-data.csv'</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'Using default input and output filenames'</span>)</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>        data_f <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>        data_t <span class="op">=</span> sys.argv[<span class="dv">2</span>]</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Using custom input and output filenames'</span>)</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>    g_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>data_f<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a>    data <span class="op">=</span> pd.read_json(data_f, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a>    data[<span class="st">'eva'</span>] <span class="op">=</span> data[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a>    data.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-23"><a href="#cb7-23" tabindex="-1"></a>    data.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-24"><a href="#cb7-24" tabindex="-1"></a></span>
<span id="cb7-25"><a href="#cb7-25" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>data_t<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb7-26"><a href="#cb7-26" tabindex="-1"></a>    data.to_csv(data_t, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb7-27"><a href="#cb7-27" tabindex="-1"></a></span>
<span id="cb7-28"><a href="#cb7-28" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>g_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb7-29"><a href="#cb7-29" tabindex="-1"></a>    data[<span class="st">'duration_hours'</span>] <span class="op">=</span> data[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb7-30"><a href="#cb7-30" tabindex="-1"></a>    data[<span class="st">'cumulative_time'</span>] <span class="op">=</span> data[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb7-31"><a href="#cb7-31" tabindex="-1"></a>    plt.plot(data.date, data.cumulative_time, <span class="st">'ko-'</span>)</span>
<span id="cb7-32"><a href="#cb7-32" tabindex="-1"></a>    plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb7-33"><a href="#cb7-33" tabindex="-1"></a>    plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb7-34"><a href="#cb7-34" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb7-35"><a href="#cb7-35" tabindex="-1"></a>    plt.savefig(g_file)</span>
<span id="cb7-36"><a href="#cb7-36" tabindex="-1"></a>    plt.show()</span>
<span id="cb7-37"><a href="#cb7-37" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>We can now run our script from the command line passing the json
input data file and csv output data file as:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">python</span> eva_data_analysis.py eva_data.json eva_data.csv</span></code></pre>
</div>
<p>Remember to commit our changes.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">git</span> add eva_data_analysis.py</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Add commandline functionality to script"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main b5883f6] Add commandline functionality to script
 1 file changed, 30 insertions(+), 16 deletions(-)</code></pre>
</div>
</section><section id="meaningful-variable-names"><h2 class="section-heading">Meaningful variable names<a class="anchor" aria-label="anchor" href="#meaningful-variable-names"></a>
</h2>
<hr class="half-width">
<p>Variables are the most common thing you will assign when coding, and
it’s really important that it is clear what each variable means in order
to understand what the code is doing. If you return to your code after a
long time doing something else, or share your code with a colleague, it
should be easy enough to understand what variables are involved in your
code from their names. Therefore we need to give them clear names, but
we also want to keep them concise so the code stays readable. There are
no “hard and fast rules” here, and it’s often a case of using your best
judgment.</p>
<p>Some useful tips for naming variables are:</p>
<ul>
<li>Short words are better than single character names
<ul>
<li>For example, if we were creating a variable to store the speed to
read a file, <code>s</code> (for ‘speed’) is not descriptive enough but
<code>MBReadPerSecondAverageAfterLastFlushToLog</code> is too long to
read and prone to mispellings. <code>ReadSpeed</code> (or
<code>read_speed</code>) would suffice.</li>
<li>If you’re finding it difficult to come up with a variable name that
is <em>both</em> short and descriptive, go with the short version and
use an inline comment to desribe it further (more on those in the next
section!)</li>
<li>This guidance doesn’t necessarily apply if your variable is a
well-known constant in your domain, for example, <em>c</em> represents
the speed of light in Physics</li>
</ul>
</li>
<li>Try to be descriptive where possible, and avoid names like
<code>foo</code>, <code>bar</code>, <code>var</code>,
<code>thing</code>, and so on</li>
</ul>
<p>There are also some gotchas to consider when naming variables:</p>
<ul>
<li>There may be some restrictions on which characters you can use in
your variable names. For instance, in Python, only alphanumeric
characters and underscores are permitted.</li>
<li>Particularly in Python, you cannot <em>begin</em> your variable
names with numerical characters as this will raise a syntax error.
<ul>
<li>Numerical characters can be included in a variable name, just not as
the first character. For example, <code>read_speed1</code> is a valid
variable name, but <code>1read_speed</code> isn’t. (This behaviour may
be different for other programming languages.)</li>
</ul>
</li>
<li>In some programming languages, such as Python, variable names are
case sensitive. So <code>speed_of_light</code> and
<code>Speed_Of_Light</code> will <strong>not</strong> be
equivalent.</li>
<li>Programming languages often have global pre-built functions, such as
<code>input</code>, which you may accidentally overwrite if you assign a
variable with the same name.
<ul>
<li>Again in Python, you would actually reassign the <code>input</code>
name and no longer be able to access the original <code>input</code>
function if you used this as a variable name. So in this case opting for
something like <code>input_data</code> would be preferable. (This
behaviour may be explicitly disallowed in other programming
languages.)</li>
</ul>
</li>
</ul>
<div id="give-a-descriptive-name-to-a-variable" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="give-a-descriptive-name-to-a-variable" class="callout-inner">
<h3 class="callout-title">Give a descriptive name to a variable<a class="anchor" aria-label="anchor" href="#give-a-descriptive-name-to-a-variable"></a>
</h3>
<div class="callout-content">
<p>Below we have a variable called <code>var</code> being set the value
of 9.81. <code>var</code> is not a very descriptive name here as it
doesn’t tell us what 9.81 means, yet it is a very common constant in
physics! Go online and find out which constant 9.81 relates to and
suggest a new name for this variable.</p>
<p>Hint: the units are <em>metres per second squared</em>!</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>var <span class="op">=</span> <span class="fl">9.81</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Yes, <span class="math display">\[9.81 m/s^2 \]</span> is the <a href="https://en.wikipedia.org/wiki/Gravity_of_Earth" class="external-link">gravitational
force exerted by the Earth</a>. It is often referred to as “little g” to
distinguish it from “big G” which is the <a href="https://en.wikipedia.org/wiki/Gravitational_constant" class="external-link">Gravitational
Constant</a>. A more decriptive name for this variable therefore might
be:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>g_earth <span class="op">=</span> <span class="fl">9.81</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge2"></a>
</h3>
<div class="callout-content">
<p>Let’s apply this to <code>eva_data_analysis.py</code>.</p>
<ol style="list-style-type: lower-alpha">
<li>
<p>Edit the code as follows to use descriptive variable names:</p>
<ul>
<li>Change data_f to input_file</li>
<li>Change data_t to output_file</li>
<li>Change g_file to graph_file</li>
<li>Change data to eva_df</li>
</ul>
</li>
<li><p>Commit your changes to your repository. Remember to use an
informative commit message.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Updated code:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">&lt;</span> <span class="dv">3</span>:</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>        input_file <span class="op">=</span> <span class="st">'./eva-data.json'</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>        output_file <span class="op">=</span> <span class="st">'./eva-data.csv'</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'Using default input and output filenames'</span>)</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>        input_file <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>        output_file <span class="op">=</span> sys.argv[<span class="dv">2</span>]</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Using custom input and output filenames'</span>)</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>    graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a>    eva_df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a></span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a>    eva_df[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_df[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a>    eva_df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb13-26"><a href="#cb13-26" tabindex="-1"></a>    plt.plot(eva_df.date, eva_df.cumulative_time, <span class="st">'ko-'</span>)</span>
<span id="cb13-27"><a href="#cb13-27" tabindex="-1"></a>    plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb13-28"><a href="#cb13-28" tabindex="-1"></a>    plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb13-29"><a href="#cb13-29" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb13-30"><a href="#cb13-30" tabindex="-1"></a>    plt.savefig(graph_file)</span>
<span id="cb13-31"><a href="#cb13-31" tabindex="-1"></a>    plt.show()</span>
<span id="cb13-32"><a href="#cb13-32" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>Commit changes:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">git</span> add eva_data_analysis.py</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Use descriptive variable names"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="inline-comments"><h2 class="section-heading">Inline comments<a class="anchor" aria-label="anchor" href="#inline-comments"></a>
</h2>
<hr class="half-width">
<p>Commenting is a very useful practice to help convey the context of
the code. It can be helpful as a reminder for your future self or your
collaborators as to why code is written in a certain way, how it is
achieving a specific task, or the real-world implications of your
code.</p>
<p>There are many ways to add comments to code, the most common of which
is inline comments.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># In Python, inline comments begin with the `#` symbol and a single space.</span></span></code></pre>
</div>
<p>Again, there are few hard and fast rules to using comments, just
apply your best judgment. But here are a few things to keep in mind when
commenting your code:</p>
<ul>
<li>
<strong>Avoid using comments to explain <em>what</em> your code
does.</strong> If your code is too complex for other programmers to
understand, consider rewriting it for clarity rather than adding
comments to explain it.</li>
<li>Focus on the <strong><em>why</em></strong> and the
<strong><em>how</em></strong>.</li>
<li>Make sure you’re not reiterating something that your code already
conveys on its own. Comments shouldn’t echo your code.</li>
<li>Keep them short and concise. Large blocks of text quickly become
unreadable and difficult to maintain.</li>
<li>Comments that contradict the code are worse than no comments. Always
make a priority of keeping comments up-to-date when code changes.</li>
</ul>
<div class="section level3">
<h3 id="examples-of-helpful-vs--unhelpful-comments">Examples of helpful vs. unhelpful comments<a class="anchor" aria-label="anchor" href="#examples-of-helpful-vs--unhelpful-comments"></a>
</h3>
<div class="section level4">
<h4 id="unhelpful">Unhelpful:<a class="anchor" aria-label="anchor" href="#unhelpful"></a>
</h4>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>statetax <span class="op">=</span> <span class="fl">1.0625</span>  <span class="co"># Assigns the float 1.0625 to the variable 'statetax'</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>citytax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># Assigns the float 1.01 to the variable 'citytax'</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>specialtax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># Assigns the float 1.01 to the variable 'specialtax'</span></span></code></pre>
</div>
<p>The comments in this code simply tell us what the code does, which is
easy enough to figure out without the inline comments.</p>
</div>
<div class="section level4">
<h4 id="helpful">Helpful:<a class="anchor" aria-label="anchor" href="#helpful"></a>
</h4>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>statetax <span class="op">=</span> <span class="fl">1.0625</span>  <span class="co"># State sales tax rate is 6.25% through Jan. 1</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>citytax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># City sales tax rate is 1% through Jan. 1</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>specialtax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># Special sales tax rate is 1% through Jan. 1</span></span></code></pre>
</div>
<p>In this case, it might not be immediately obvious what each variable
represents, so the comments offer helpful, real-world context. The date
in the comment also indicates when the code might need to be
updated.</p>
<div id="add-some-comments-to-a-code-block" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="add-some-comments-to-a-code-block" class="callout-inner">
<h3 class="callout-title">Add some comments to a code block<a class="anchor" aria-label="anchor" href="#add-some-comments-to-a-code-block"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: lower-alpha">
<li>Examine <code>eva_data_analysis.py</code>. Add as many inline
comments as you think is required to help yourself and others understand
what that code is doing.</li>
<li>Commit your changes to your repository. Remember to use an
informative commit message.</li>
</ol>
<p>Hint: Inline comments in Python are denoted by a <code>#</code>
symbol.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Some good inline comments may look like the example below.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">&lt;</span> <span class="dv">3</span>:</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>        input_file <span class="op">=</span> <span class="st">'./eva-data.json'</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a>        output_file <span class="op">=</span> <span class="st">'./eva-data.csv'</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'Using default input and output filenames'</span>)</span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a>        input_file <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a>        output_file <span class="op">=</span> sys.argv[<span class="dv">2</span>]</span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Using custom input and output filenames'</span>)</span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a>    graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a></span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a>    <span class="co"># Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a>    <span class="co"># Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb18-25"><a href="#cb18-25" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb18-26"><a href="#cb18-26" tabindex="-1"></a></span>
<span id="cb18-27"><a href="#cb18-27" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb18-28"><a href="#cb18-28" tabindex="-1"></a>    <span class="co"># Save dataframe to CSV file for later analysis</span></span>
<span id="cb18-29"><a href="#cb18-29" tabindex="-1"></a>    eva_df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb18-30"><a href="#cb18-30" tabindex="-1"></a></span>
<span id="cb18-31"><a href="#cb18-31" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb18-32"><a href="#cb18-32" tabindex="-1"></a>    <span class="co"># Plot cumulative time spent in space over years</span></span>
<span id="cb18-33"><a href="#cb18-33" tabindex="-1"></a>    eva_df[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_df[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb18-34"><a href="#cb18-34" tabindex="-1"></a>    eva_df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb18-35"><a href="#cb18-35" tabindex="-1"></a>    plt.plot(eva_df.date, eva_df.cumulative_time, <span class="st">'ko-'</span>)</span>
<span id="cb18-36"><a href="#cb18-36" tabindex="-1"></a>    plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb18-37"><a href="#cb18-37" tabindex="-1"></a>    plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb18-38"><a href="#cb18-38" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb18-39"><a href="#cb18-39" tabindex="-1"></a>    plt.savefig(graph_file)</span>
<span id="cb18-40"><a href="#cb18-40" tabindex="-1"></a>    plt.show()</span>
<span id="cb18-41"><a href="#cb18-41" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>Commit changes:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="fu">git</span> add eva_data_analysis.py</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Add inline comments to the code"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section id="functions"><h2 class="section-heading">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>
<hr class="half-width">
<p>Functions are a fundamental concept in writing software and are one
of the core ways you can organise your code to improve its readability.
A function is an isolated section of code that performs a single,
<em>specific</em> task that can be simple or complex. It can then be
called multiple times with different inputs throughout a codebase, but
it’s definition only needs to appear once.</p>
<p>Breaking up code into functions in this manner benefits readability
since the smaller sections are easier to read and understand. Since
functions can be reused, codebases naturally begin to follow the <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" class="external-link">Don’t
Repeat Yourself principle</a> which prevents software from becoming
overly long and confusing. The software also becomes easier to maintain
because, if the code encapsulated in a function needs to change, it only
needs updating in one place instead of many. As we will learn in a
future episode, testing code also becomes simpler when code is written
in functions. Each function can be individually checked to ensure it is
doing what is intended, which improves confidence in the software as a
whole.</p>
<div id="create-a-function" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="create-a-function" class="callout-inner">
<h3 class="callout-title">Create a function<a class="anchor" aria-label="anchor" href="#create-a-function"></a>
</h3>
<div class="callout-content">
<p>Below is a function that reads in a JSON file into a dataframe
structure using the <a href="https://pandas.pydata.org/" class="external-link"><code>pandas</code> library</a> - but
the code is out of order!</p>
<p>Reorder the lines of code within the function so that the JSON file
is read in using the <code>read_json</code> method, any incomplete rows
are <em>dropped</em>, the values are <em>sorted</em> by date, and then
the cleaned dataframe is <em>returned</em>. There is also a
<code>print</code> statement that will display which file is being read
in on the command line for verification.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Here is the correct order of the code for the function.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span></code></pre>
</div>
<p>We have chosen to create a function for reading in data files since
this is a very common task within research software. While this isn’t
that many lines of code, thanks to using pandas inbuilt methods, it can
be useful to package this together into a function if you need to read
in a lot of similarly structured files and process them in the same
way.</p>
</div>
</div>
</div>
</div>
</section><section id="docstrings"><h2 class="section-heading">Docstrings<a class="anchor" aria-label="anchor" href="#docstrings"></a>
</h2>
<hr class="half-width">
<p>Docstrings are a specific type of documentation that are provided
within functions, and <a href="https://docs.python.org/3/tutorial/classes.html" class="external-link">classes</a> too.
A function docstring should explain what the isolated code is doing,
what parameters the function needs (these are inputs) and what form they
should take, what the function outputs (you may see words like ‘returns’
or ‘yields’ here), and errors (if any) that might be raised.</p>
<p>Providing these docstrings helps improve code readability since it
makes the function code more transparent and aids understanding.
Particularly, docstrings that provide information on the input and
output of functions makes it easier to reuse them in other parts of the
code, without having to read the full function to understand what needs
to be provided and what will be returned.</p>
<p>Docstrings are another case where there are no hard and fast rules
for writing them. Acceptable docstring formats can range from single- to
multi-line. You can use your best judgment on how much documentation a
particular function needs.</p>
<div class="section level3">
<h3 id="example-of-a-single-line-docstring">Example of a single-line docstring<a class="anchor" aria-label="anchor" href="#example-of-a-single-line-docstring"></a>
</h3>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="kw">def</span> add(x, y):</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>    <span class="co">"""Add two numbers together"""</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> y</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="example-of-a-multi-line-docstring">Example of a multi-line docstring:<a class="anchor" aria-label="anchor" href="#example-of-a-multi-line-docstring"></a>
</h3>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="kw">def</span> add(x, y<span class="op">=</span><span class="fl">1.0</span>):</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="co">    Adds two numbers together.</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a><span class="co">        x: A number to be included in the addition.</span></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a><span class="co">        y (float, optional): A float number to be included in the addition. Defaults to 1.0.</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a><span class="co">        float: The sum of x and y.</span></span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> y</span></code></pre>
</div>
<p>Some projects may have their own guidelines on how to write
docstrings, such as <a href="https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard" class="external-link">numpy</a>.
If you are contributing code to a wider project or community, try to
follow the guidelines and standards they provide for codestyle.</p>
<p>As your code grows and becomes more complex, the docstrings can form
the content of a reference guide allowing developers to quickly look up
how to use the APIs, functions, and classes defined in your codebase.
Hence, it is common to find tools that will automatically extract
docstrings from your code and generate a website where people can learn
about your code without downloading/installing and reading the code
files - such as <a href="https://www.mkdocs.org/" class="external-link">MkDocs</a>.</p>
<div id="writing-docstrings" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="writing-docstrings" class="callout-inner">
<h3 class="callout-title">Writing docstrings<a class="anchor" aria-label="anchor" href="#writing-docstrings"></a>
</h3>
<div class="callout-content">
<p>Write a docstring for the <code>read_json_to_dataframe</code>
function from the previous exercise. Things you may want to consider
when writing your docstring are:</p>
<ul>
<li>Describing what the function does</li>
<li>What kind of inputs does the function take? Are they required or
optional? Do they have default values?</li>
<li>What output will the function produce?</li>
</ul>
<p>Hint: Python docstrings are defined by enclosing the text with
<code>"""</code> above and below. This text is also indented to the same
level as the code defined beneath it, which is 4 whitespaces.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>A good enough docstring for this function would look like this:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, </span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a>                          convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span></code></pre>
</div>
<p>Using <a href="google-doc-string">Google’s docstring convention</a>,
the docstring may look more like this:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="co">        input_file_ (str): The path to the JSON file.</span></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The cleaned and sorted data as a dataframe structure</span></span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a><span class="co">    """</span>        </span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, </span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a>                          convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb25-16"><a href="#cb25-16" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb25-17"><a href="#cb25-17" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section id="improving-our-code"><h2 class="section-heading">Improving our code<a class="anchor" aria-label="anchor" href="#improving-our-code"></a>
</h2>
<hr class="half-width">
<p>Finally, let’s apply these good practices to
<code>eva_data_analysis.py</code> and organise our code into functions
with descriptive names and docstrings.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file_):</span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb26-12"><a href="#cb26-12" tabindex="-1"></a><span class="co">        input_file_ (str): The path to the JSON file.</span></span>
<span id="cb26-13"><a href="#cb26-13" tabindex="-1"></a></span>
<span id="cb26-14"><a href="#cb26-14" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb26-15"><a href="#cb26-15" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The loaded dataframe.</span></span>
<span id="cb26-16"><a href="#cb26-16" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb26-17"><a href="#cb26-17" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file_<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb26-18"><a href="#cb26-18" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file_, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb26-19"><a href="#cb26-19" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb26-20"><a href="#cb26-20" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb26-21"><a href="#cb26-21" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb26-22"><a href="#cb26-22" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb26-23"><a href="#cb26-23" tabindex="-1"></a></span>
<span id="cb26-24"><a href="#cb26-24" tabindex="-1"></a></span>
<span id="cb26-25"><a href="#cb26-25" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df_, output_file_):</span>
<span id="cb26-26"><a href="#cb26-26" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb26-27"><a href="#cb26-27" tabindex="-1"></a><span class="co">    Write the dataframe to a CSV file.</span></span>
<span id="cb26-28"><a href="#cb26-28" tabindex="-1"></a></span>
<span id="cb26-29"><a href="#cb26-29" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb26-30"><a href="#cb26-30" tabindex="-1"></a><span class="co">        df_ (pd.DataFrame): The input dataframe.</span></span>
<span id="cb26-31"><a href="#cb26-31" tabindex="-1"></a><span class="co">        output_file_ (str): The path to the output CSV file.</span></span>
<span id="cb26-32"><a href="#cb26-32" tabindex="-1"></a></span>
<span id="cb26-33"><a href="#cb26-33" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb26-34"><a href="#cb26-34" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb26-35"><a href="#cb26-35" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb26-36"><a href="#cb26-36" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file_<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb26-37"><a href="#cb26-37" tabindex="-1"></a>    df_.to_csv(output_file_, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb26-38"><a href="#cb26-38" tabindex="-1"></a></span>
<span id="cb26-39"><a href="#cb26-39" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb26-40"><a href="#cb26-40" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb26-41"><a href="#cb26-41" tabindex="-1"></a><span class="co">    Convert a text format duration "HH:MM" to duration in hours</span></span>
<span id="cb26-42"><a href="#cb26-42" tabindex="-1"></a></span>
<span id="cb26-43"><a href="#cb26-43" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb26-44"><a href="#cb26-44" tabindex="-1"></a><span class="co">        duration (str): The text format duration</span></span>
<span id="cb26-45"><a href="#cb26-45" tabindex="-1"></a></span>
<span id="cb26-46"><a href="#cb26-46" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb26-47"><a href="#cb26-47" tabindex="-1"></a><span class="co">        duration_hours (float): The duration in hours</span></span>
<span id="cb26-48"><a href="#cb26-48" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb26-49"><a href="#cb26-49" tabindex="-1"></a>    hours, minutes <span class="op">=</span> duration.split(<span class="st">":"</span>)</span>
<span id="cb26-50"><a href="#cb26-50" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">60</span></span>
<span id="cb26-51"><a href="#cb26-51" tabindex="-1"></a>    <span class="cf">return</span> duration_hours</span>
<span id="cb26-52"><a href="#cb26-52" tabindex="-1"></a></span>
<span id="cb26-53"><a href="#cb26-53" tabindex="-1"></a></span>
<span id="cb26-54"><a href="#cb26-54" tabindex="-1"></a><span class="kw">def</span> add_duration_hours_variable(df_):</span>
<span id="cb26-55"><a href="#cb26-55" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb26-56"><a href="#cb26-56" tabindex="-1"></a><span class="co">    Add duration in hours (duration_hours) variable to the dataset</span></span>
<span id="cb26-57"><a href="#cb26-57" tabindex="-1"></a></span>
<span id="cb26-58"><a href="#cb26-58" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb26-59"><a href="#cb26-59" tabindex="-1"></a><span class="co">        df_ (pd.DataFrame): The input dataframe.</span></span>
<span id="cb26-60"><a href="#cb26-60" tabindex="-1"></a></span>
<span id="cb26-61"><a href="#cb26-61" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb26-62"><a href="#cb26-62" tabindex="-1"></a><span class="co">        df_copy (pd.DataFrame): A copy of df_ with the new duration_hours variable added</span></span>
<span id="cb26-63"><a href="#cb26-63" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb26-64"><a href="#cb26-64" tabindex="-1"></a>    df_copy <span class="op">=</span> df_.copy()</span>
<span id="cb26-65"><a href="#cb26-65" tabindex="-1"></a>    df_copy[<span class="st">"duration_hours"</span>] <span class="op">=</span> df_copy[<span class="st">"duration"</span>].<span class="bu">apply</span>(</span>
<span id="cb26-66"><a href="#cb26-66" tabindex="-1"></a>        text_to_duration</span>
<span id="cb26-67"><a href="#cb26-67" tabindex="-1"></a>    )</span>
<span id="cb26-68"><a href="#cb26-68" tabindex="-1"></a>    <span class="cf">return</span> df_copy</span>
<span id="cb26-69"><a href="#cb26-69" tabindex="-1"></a></span>
<span id="cb26-70"><a href="#cb26-70" tabindex="-1"></a></span>
<span id="cb26-71"><a href="#cb26-71" tabindex="-1"></a><span class="kw">def</span> plot_cumulative_time_in_space(df_, graph_file_):</span>
<span id="cb26-72"><a href="#cb26-72" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb26-73"><a href="#cb26-73" tabindex="-1"></a><span class="co">    Plot the cumulative time spent in space over years</span></span>
<span id="cb26-74"><a href="#cb26-74" tabindex="-1"></a></span>
<span id="cb26-75"><a href="#cb26-75" tabindex="-1"></a><span class="co">    Convert the duration column from strings to number of hours</span></span>
<span id="cb26-76"><a href="#cb26-76" tabindex="-1"></a><span class="co">    Calculate cumulative sum of durations</span></span>
<span id="cb26-77"><a href="#cb26-77" tabindex="-1"></a><span class="co">    Generate a plot of cumulative time spent in space over years and</span></span>
<span id="cb26-78"><a href="#cb26-78" tabindex="-1"></a><span class="co">    save it to the specified location</span></span>
<span id="cb26-79"><a href="#cb26-79" tabindex="-1"></a></span>
<span id="cb26-80"><a href="#cb26-80" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb26-81"><a href="#cb26-81" tabindex="-1"></a><span class="co">        df_ (pd.DataFrame): The input dataframe.</span></span>
<span id="cb26-82"><a href="#cb26-82" tabindex="-1"></a><span class="co">        graph_file_ (str): The path to the output graph file.</span></span>
<span id="cb26-83"><a href="#cb26-83" tabindex="-1"></a></span>
<span id="cb26-84"><a href="#cb26-84" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb26-85"><a href="#cb26-85" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb26-86"><a href="#cb26-86" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb26-87"><a href="#cb26-87" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file_<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb26-88"><a href="#cb26-88" tabindex="-1"></a>    df_ <span class="op">=</span> add_duration_hours_variable(df_)</span>
<span id="cb26-89"><a href="#cb26-89" tabindex="-1"></a>    df_[<span class="st">'cumulative_time'</span>] <span class="op">=</span> df_[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb26-90"><a href="#cb26-90" tabindex="-1"></a>    plt.plot(df_.date, df_.cumulative_time, <span class="st">'ko-'</span>)</span>
<span id="cb26-91"><a href="#cb26-91" tabindex="-1"></a>    plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb26-92"><a href="#cb26-92" tabindex="-1"></a>    plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb26-93"><a href="#cb26-93" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb26-94"><a href="#cb26-94" tabindex="-1"></a>    plt.savefig(graph_file_)</span>
<span id="cb26-95"><a href="#cb26-95" tabindex="-1"></a>    plt.show()</span>
<span id="cb26-96"><a href="#cb26-96" tabindex="-1"></a></span>
<span id="cb26-97"><a href="#cb26-97" tabindex="-1"></a></span>
<span id="cb26-98"><a href="#cb26-98" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb26-99"><a href="#cb26-99" tabindex="-1"></a></span>
<span id="cb26-100"><a href="#cb26-100" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">&lt;</span> <span class="dv">3</span>:</span>
<span id="cb26-101"><a href="#cb26-101" tabindex="-1"></a>        input_file <span class="op">=</span> <span class="st">'./eva-data.json'</span></span>
<span id="cb26-102"><a href="#cb26-102" tabindex="-1"></a>        output_file <span class="op">=</span> <span class="st">'./eva-data.csv'</span></span>
<span id="cb26-103"><a href="#cb26-103" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'Using default input and output filenames'</span>)</span>
<span id="cb26-104"><a href="#cb26-104" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb26-105"><a href="#cb26-105" tabindex="-1"></a>        input_file <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb26-106"><a href="#cb26-106" tabindex="-1"></a>        output_file <span class="op">=</span> sys.argv[<span class="dv">2</span>]</span>
<span id="cb26-107"><a href="#cb26-107" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Using custom input and output filenames'</span>)</span>
<span id="cb26-108"><a href="#cb26-108" tabindex="-1"></a></span>
<span id="cb26-109"><a href="#cb26-109" tabindex="-1"></a>    graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb26-110"><a href="#cb26-110" tabindex="-1"></a></span>
<span id="cb26-111"><a href="#cb26-111" tabindex="-1"></a>    eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb26-112"><a href="#cb26-112" tabindex="-1"></a></span>
<span id="cb26-113"><a href="#cb26-113" tabindex="-1"></a>    write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb26-114"><a href="#cb26-114" tabindex="-1"></a></span>
<span id="cb26-115"><a href="#cb26-115" tabindex="-1"></a>    plot_cumulative_time_in_space(eva_data, graph_file)</span>
<span id="cb26-116"><a href="#cb26-116" tabindex="-1"></a></span>
<span id="cb26-117"><a href="#cb26-117" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>Finally, let’s commit these changes to our local repository and then
push to our remote repository on GitHub to publish these changes.
Remember to use an informative commit message.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="fu">git</span> add eva_data_analysis.py</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Organise code into functions"</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="fu">git</span> push origin main</span></code></pre>
</div>
</section><section id="summary"><h2 class="section-heading">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<hr class="half-width">
<p>During this episode, we have discussed the importance of code
readability and explored some software engineering practices that help
facilitate this.</p>
<p>Code readability is important because it makes it simpler and quicker
for a person (future you or a collaborator) to understand what purpose
the code is serving, and therefore begin contributing to it more easily,
saving time and effort.</p>
<p>Some best practices we have covered towards code readability
include:</p>
<ul>
<li>Variable naming practices for descriptive yet concise code</li>
<li>Inline comments to provide real-world context</li>
<li>Functions to isolate specific code sections for re-use</li>
<li>Docstrings for documenting functions to facilitate their re-use</li>
</ul></section><section id="further-reading"><h2 class="section-heading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://www.theguardian.com/info/2019/jan/29/code-readability-matters" class="external-link">‘Code
Readability Matters’ from the Guardian’s engineering blog</a></li>
<li><a href="https://peps.python.org/pep-0008/#comments" class="external-link">PEP 8 Style
Guide for Python</a></li>
<li><a href="https://www.coursera.org/tutorials/python-comment#inline-commenting-in-python" class="external-link">Coursera:
Inline commenting in Python</a></li>
<li><a href="https://introtopython.org/introducing_functions.html" class="external-link">Introducing
Functions from Introduction to Python</a></li>
<li><a href="https://www.w3schools.com/python/python_functions.asp" class="external-link">W3Schools.com
Python Functions</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Readable code is easier to understand, maintain, debug and
extend!</li>
<li>Creating functions from the smallest, reusable units of code will
help compartmentalise which parts of the code are doing what
actions</li>
<li>Choosing descriptive variable and function names will communicate
their purpose more effectively</li>
<li>Using inline comments and docstrings to describe parts of the code
will help transmit understanding, and verify that the code is
correct</li>
</ul>
</div>
</div>
</div>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</section></section><section id="aio-06-code-testing"><p>Content from <a href="06-code-testing.html">Code testing</a></p>
<hr>
<p>Last updated on 2024-07-05 |
        
        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/06-code-testing.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can we verify that our code is correct?</li>
<li>How can we automate our software tests?</li>
<li>What makes a “good” test?</li>
<li>Which parts of our code should we prioritize for testing?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Explain why code testing is important and how this supports FAIR
software.</li>
<li>Describe the different types of software tests (unit tests,
integration tests, regression tests).</li>
<li>Implement unit tests to verify that function(s) behave as expected
using the Python testing framework <code>pytest</code>.</li>
<li>Interpret the output from <code>pytest</code> to identify which
function(s) are not behaving as expected.</li>
<li>Write tests using typical values, edge cases and invalid inputs to
ensure that the code can handle extreme values and invalid inputs
appropriately.</li>
<li>Evaluate code coverage to identify how much of the codebase is being
tested and identify areas that need further tests.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="motivation-for-code-testing"><h2 class="section-heading">Motivation for Code Testing<a class="anchor" aria-label="anchor" href="#motivation-for-code-testing"></a>
</h2>
<hr class="half-width">
<p>The goal of software testing is to check that the actual results
produced by a piece of code meet our expectations i.e. are correct.</p>
<p>Adopting software testing as part of our research workflow helps us
to conduct better research and produce FAIR software.</p>
<div class="section level3">
<h3 id="better-research">Better Research<a class="anchor" aria-label="anchor" href="#better-research"></a>
</h3>
<p>Software testing can help us be better, more productive
researchers.</p>
<p>Testing helps us to identify and fix problems with our code early and
quickly and allows us to demonstrate to ourselves and others that our
code does what we claim. More importantly, we can share our tests
alongside our code, allowing others to check this for themselves.</p>
</div>
<div class="section level3">
<h3 id="fair-software">FAIR Software<a class="anchor" aria-label="anchor" href="#fair-software"></a>
</h3>
<p>Software testing also underpins the FAIR process by giving us the
confidence to engage in open research practices.</p>
<p>If we are not sure that our code works as intended and produces
accurate results, we are unlikely to feel confident about sharing our
code with others. Software testing brings piece of mind by providing a
step-by-step approach that we can apply to verify that our code is
correct.</p>
<p>Software testing also supports the FAIR process by improving the
<strong>accessibility</strong> and <strong>reusability</strong> of our
code.</p>
<p><strong>Accessible</strong>:</p>
<ul>
<li>Well written software tests capture the expected behaviour of our
code and can be used alongside documentation to help developers quickly
make sense of our code.</li>
</ul>
<p><strong>Reusable</strong>:</p>
<ul>
<li>A well tested codebase allows developers to experiment with new
features safe in the knowledge that tests will reveal if their changes
have broken any existing functionality.<br>
</li>
<li>The act of writing tests encourages to structure our code as
individual functions and often results in a more modular, readable,
maintainable codebase that is easier to extend or repurpose.</li>
</ul>
</div>
<div class="section level3">
<h3 id="types-of-software-tests">Types of Software Tests<a class="anchor" aria-label="anchor" href="#types-of-software-tests"></a>
</h3>
<p>There are many different types of software testing including:</p>
<ul>
<li><p><strong>Unit Tests</strong>: Unit tests focus on testing
individual functions in isolation. They ensure that each small part of
the software performs as intended. By verifying the correctness of these
individual units, we can catch errors early in the development
process.</p></li>
<li><p><strong>Integration Tests</strong>: Integration tests, check how
different parts of the code e.g. functions work together.</p></li>
<li><p><strong>Regression Tests</strong>: Regression tests are used to
ensure that new changes or updates to the codebase do not adversely
affect the existing functionality. They involve checking whether a
program or part of a program still generates the same results after
changes have been made.</p></li>
<li><p><strong>End-to-end</strong> tests are a special type of
integration testing which checks that a program as a whole behaves as
expected.</p></li>
</ul>
<p>In this course, our primary focus will be on unit testing. However,
the concepts and techniques we cover will provide a solid foundation
applicable to other types of testing.</p>
<div id="types-of-software-tests-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="types-of-software-tests-1" class="callout-inner">
<h3 class="callout-title">Types of Software Tests<a class="anchor" aria-label="anchor" href="#types-of-software-tests-1"></a>
</h3>
<div class="callout-content">
<p>Fill in the blanks in the sentences below:</p>
<ul>
<li>__________ tests compare the ______ output of a program to its
________ output to demonstrate correctness.</li>
<li>Unit tests compare the actual output of a ______ ________ to the
expected output to demonstrate correctness.</li>
<li>__________ tests check that results have not changed since the
previous test run.</li>
<li>__________ tests check that two or more parts of a program are
working together correctly.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<ul>
<li>End-to-end tests compare the actual output of a program to the
expected output to demonstrate correctness.</li>
<li>Unit tests compare the actual output of a single function to the
expected output to demonstrate correctness.</li>
<li>Regression tests check that results have not changed since the
previous test run.</li>
<li>Integration tests check that two or more parts of a program are
working together correctly.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="informal-testing">Informal Testing<a class="anchor" aria-label="anchor" href="#informal-testing"></a>
</h3>
<p><strong>How should we test our code?</strong> Let’s start by
considering the following scenario. A collaborator on our project has
sent us the following code to add a <code>crew_size</code> variable to
our data frame - a column which captures the number of astronauts
participating in a given spacewalk. How do we know that it works as
intended?</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="im">import</span> pandas</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="kw">def</span> calculate_crew_size(crew):</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co">    Calculate crew_size for a single crew entry</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co">        crew (str): The text entry in the crew column</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="co">        int: The crew size</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>    <span class="cf">if</span> crew.split() <span class="op">==</span> []:</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">len</span>(re.split(<span class="vs">r';'</span>, crew))<span class="op">-</span><span class="dv">1</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="kw">def</span> add_crew_size_variable(df_):</span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a><span class="co">    Add crew size (crew_size) variable to the dataset</span></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a><span class="co">        df_ (pd.DataFrame): The input data frame.</span></span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb1-28"><a href="#cb1-28" tabindex="-1"></a><span class="co">        df_copy (pd.DataFrame): A copy of df_ with the new crew_size variable added</span></span>
<span id="cb1-29"><a href="#cb1-29" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb1-30"><a href="#cb1-30" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Adding crew size variable (crew_size) to dataset'</span>)</span>
<span id="cb1-31"><a href="#cb1-31" tabindex="-1"></a>    df_copy <span class="op">=</span> df_.copy()</span>
<span id="cb1-32"><a href="#cb1-32" tabindex="-1"></a>    df_copy[<span class="st">"crew_size"</span>] <span class="op">=</span> df_copy[<span class="st">"crew"</span>].<span class="bu">apply</span>(</span>
<span id="cb1-33"><a href="#cb1-33" tabindex="-1"></a>        calculate_crew_size</span>
<span id="cb1-34"><a href="#cb1-34" tabindex="-1"></a>    )</span>
<span id="cb1-35"><a href="#cb1-35" tabindex="-1"></a>    <span class="cf">return</span> df_copy</span>
<span id="cb1-36"><a href="#cb1-36" tabindex="-1"></a>    </span></code></pre>
</div>
<p>One approach is to copy/paste the function(s) into a python
interpreter and check that they behave as expected with some input
values where we know what the correct return value should be.</p>
<p>Since <code>add_crew_size_variable</code> contains boiler plate code
for deriving one column from another let’s start with
<code>calculate_crew_size</code>:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>calculate_crew_size(<span class="st">"Valentina Tereshkova;"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>calculate_crew_size(<span class="st">"Judith Resnik; Sally Ride;"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">1</span></span>
<span><span class="fl">2</span></span></code></pre>
</div>
<p>We can then explore the behaviour of
<code>add_crew_size_variable</code> by creating a toy data frame:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Create a toy DataFrame</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>data <span class="op">=</span> pd.DataFrame({</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>    <span class="st">'crew'</span>: [<span class="st">'Anna Lee Fisher;'</span>, <span class="st">'Marsha Ivins; Helen Sharman;'</span>]</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>})</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>add_crew_size_variable(data)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Adding crew size variable (crew_size) to dataset
                           crew  crew_size
0              Anna Lee Fisher;          1
1  Marsha Ivins; Helen Sharman;          2</code></pre>
</div>
<p>Although this is an important process to go through as we draft our
code for the first time, there are some serious drawbacks to this
approach if used as our only form of testing.</p>
<div id="what-are-the-limitations-of-informally-testing-code-5-minutes" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="what-are-the-limitations-of-informally-testing-code-5-minutes" class="callout-inner">
<h3 class="callout-title">What are the limitations of informally testing code? (5 minutes)<a class="anchor" aria-label="anchor" href="#what-are-the-limitations-of-informally-testing-code-5-minutes"></a>
</h3>
<div class="callout-content">
<p>Think about the questions below. Your instructors may ask you to
share your answers in a shared notes document and/or discuss them with
other participants.</p>
<ul>
<li>Why might we choose to test our code informally?</li>
<li>What are the limitations of relying solely on informal tests to
verify that a piece of code is behaving as expected?</li>
</ul>
</div>
</div>
</div>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Discussion Spoilers </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>It can be tempting to test our code informally because this
approach:</p>
<ul>
<li>is quick and easy</li>
<li>provides immediate feedback</li>
</ul>
<p>However, there are limitations to this approach:</p>
<ul>
<li>Working interactively is error prone</li>
<li>We must repeat our tests every time we update our code; this is time
consuming</li>
<li>We must rely on memory to keep track of how we have tested our code
e.g. what input values we tried</li>
<li>We must rely on memory to keep track of which functions have been
tested and which have not</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</section><section id="formal-testing"><h2 class="section-heading">Formal Testing<a class="anchor" aria-label="anchor" href="#formal-testing"></a>
</h2>
<hr class="half-width">
<p>We can overcome some of these limitations by formalising our testing
process. A formal approach to testing our function(s) is to write
dedicated test functions to check our code. These test functions:</p>
<ul>
<li>Run the function we want to test - the target function with known
inputs</li>
<li>Compare the output to known, valid results</li>
<li>Raises an error if the function’s actual output does not match the
expected output</li>
<li>Are recorded in a test script that can be re-run on demand.</li>
</ul>
<p>Let’s explore this process by writing some formal tests for our
<code>text_to_duration</code> function. (We’ll come back to our
colleague’s calculate_crew_size function later).</p>
<p>The <code>text_to_duration</code> function converts a duration stored
as a string (HH:MM) to a duration in hours e.g. duration “1.15” should
return a value of 1.25.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co">    Convert a text format duration "HH:MM" to duration in hours</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co">        duration (str): The text format duration</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">        float: The duration in hours</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>    hours, minutes <span class="op">=</span> duration.split(<span class="st">":"</span>)</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">60</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>    <span class="cf">return</span> duration_hours</span></code></pre>
</div>
<p>Let’s create a new python file <code>test_code.py</code> in the root
of our project folder to store our tests.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="bu">cd</span> Spacewalks</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">touch</span> test_code.py</span></code></pre>
</div>
<p>First, we import text_to_duration into our test script. Then, we then
add our first test function:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>    input_value <span class="op">=</span> <span class="st">"10:00"</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>    test_result <span class="op">=</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"text_to_duration('10:00') == 10? </span><span class="sc">{</span>test_result<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>test_text_to_duration()</span></code></pre>
</div>
<p>This test checks that when we apply text_to_duration to input value
“10:00”, the output matches the expected value of 10.</p>
<p>In this example, we use a print statement to report whether the
actual output from text_to_duration meets our expectations.</p>
<p>However, this does not meet our requirement to “Raise an error if the
function’s output does not match the expected output” and means that we
must carefully read our test function’s output to identify whether it
has failed.</p>
<p>To ensure that our code raises an error if the function’s output does
not match the expected output, we can use an assert statement.</p>
<p>The assert statement in Python checks whether a condition is True or
False. If the statement is True, then assert does not return a value but
if the statement is false, then assert raises an AssertError.</p>
<p>Let’s rewrite our test with an assert statement:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>test_text_to_duration_integer()</span></code></pre>
</div>
<p>Notice that when we run test_text_to_duration_integer(), nothing
happens - there is no output. That is because our function is working
correctly and returning the expected value of 10.</p>
<p>Let’s see what happens when we deliberately introduce a bug into
<code>text_to_duration</code>: In the Spacewalks data analysis script
let’s change <code>int(hours)</code> to <code>int(hour)/60</code> and
<code>int(minutes)/60</code> to <code>int(minutes)</code>to mimic a
simple mistake in our code where the wrong element is divided by 60.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co">    Convert a text format duration "HH:MM" to duration in hours</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">        duration (str): The text format duration</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co">        duration (float): The duration in hours</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>    hours, minutes <span class="op">=</span> duration.split(<span class="st">":"</span>)</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours)<span class="op">/</span><span class="dv">60</span> <span class="op">+</span> <span class="bu">int</span>(minutes) <span class="co"># Divide the wrong element by 60</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>    <span class="cf">return</span> duration_hours</span></code></pre>
</div>
<p>Notice that this time, our test fails noisily. Our assert statement
has raised an <code>AssertionError</code> - a clear signal that there is
a problem in our code that we need to fix.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>test_text_to_duration_integer()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Traceback (most recent call last):
  File "/Users/AnnResearchers/Desktop/Spacewalks/test_code.py", line 7, in &lt;module&gt;
    test_text_to_duration_integer()
  File "/Users/AnnResearchers/Desktop/Spacewalks/test_code.py", line 5, in test_text_to_duration_integer
    assert text_to_duration("10:00") == 10
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError</code></pre>
</div>
<p>What happens if we add another test to our test script? This time
we’ll check that our function can handle durations with a non-zero
minute component. Notice that this time our expected value is a
floating-point number. Importantly, we cannot use a simple double equals
sign (<code>==</code>) to compare the equality of floating-point
numbers. Floating-point arithmetic can introduce very small differences
due to how computers represent these numbers internally - as a result,
we check that our floating point numbers are equal within a very small
tolerance (1e-5).</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>    </span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">abs</span>(text_to_duration(<span class="st">"10:20"</span>) <span class="op">-</span> <span class="fl">10.33333333</span>) <span class="op">&lt;</span> <span class="fl">1e-5</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>test_text_to_duration_integer()</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>test_text_to_duration_float()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Traceback (most recent call last):
  File "/Users/AnnResearcher/Desktop/Spacewalks/test_code.py", line 9, in &lt;module&gt;
    test_text_to_duration_integer()
  File "/Users/AnnResearcher/Desktop/Spacewalks/test_code.py", line 4, in test_text_to_duration_integer
    assert text_to_duration("10:00") == 10
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError</code></pre>
</div>
<p>What happens when we run our updated test script? Our script stops
after the first test failure and the second test is not run. To run our
remaining tests we would have to manually comment out our failing test
and re-run the test script. As our code base and tests grow, this will
become cumbersome. This is not ideal and can be overcome by automating
our tests using a testing framework.</p>
</section><section id="using-a-testing-framework"><h2 class="section-heading">Using a Testing Framework<a class="anchor" aria-label="anchor" href="#using-a-testing-framework"></a>
</h2>
<hr class="half-width">
<p>Our approach so far has had two major limitations:</p>
<ul>
<li>We had to carefully examine the output of our test script to work
out if our test failed.</li>
<li>Our test script only ran our tests up to the first test
failure.</li>
</ul>
<p>We can do better than this! Testing frameworks can automatically find
all the tests in our code base, run all of them and present the test
results as a readable summary.</p>
<p>We will use the python testing framework pytest with its code
coverage plugin pytest-cov. To install these libraries, open a terminal
and type:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install pytest pytest-cov</span></code></pre>
</div>
<p>Let’s make sure that our tests are ready to work with pytest.</p>
<ul>
<li>
<p>pytest automatically discovers tests based on specific naming
patterns. pytest looks for files that start with <code>test_</code> or
end with <code>_test.py</code>. Then, within these files, pytest looks
for functions that start with test_.<br>
Our test file already meets these requirements, so there is nothing to
do here. However, our script does contain lines to run each of our test
functions. These are no-longer required as pytest will run our tests so
we will remove them:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># Delete</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>test_text_to_duration_integer()</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>test_text_to_duration_float()</span></code></pre>
</div>
</li>
<li><p>It is also conventional when working with a testing framework to
place test files in a tests directory at the root of our project and to
name each test file after the code file that it targets. This helps in
maintaining a clean structure and makes it easier for others to
understand where the tests are located.</p></li>
</ul>
<p>A set of tests for a given piece of code is called a test suite. Our
test suite is currently located in the root folder of our project. Let’s
move it to a dedicated test folder and rename our test_code.py file to
test_eva_analysis.py.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">mkdir</span> tests</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="fu">mv</span> test_code.py tests/test_eva_analysis.py</span></code></pre>
</div>
<p>Before we re-run our tests using pytest, let’s update our second
test. to use pytest’s <code>approx</code> function which is specifically
intended for comparing floating point numbers within a tolerance.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>    </span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:20"</span>) <span class="op">==</span> pytest.approx(<span class="fl">10.33333333</span>)</span></code></pre>
</div>
<p>Let’s also add some inline comments to clarify what each test is
doing and expand our syntax to highlight the logic behind our
approach:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="co">    Test that text_to_duration returns expected ground truth values</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="co">    for typical whole hour durations </span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a>    actual_result <span class="op">=</span>  text_to_duration(<span class="st">"10:00"</span>)</span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a>    </span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a><span class="co">    Test that text_to_duration returns expected ground truth values</span></span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a><span class="co">    for typical durations with a non-zero minute component</span></span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb19-18"><a href="#cb19-18" tabindex="-1"></a>    actual_result <span class="op">=</span> text_to_duration(<span class="st">"10:20"</span>) </span>
<span id="cb19-19"><a href="#cb19-19" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="fl">10.33333333</span></span>
<span id="cb19-20"><a href="#cb19-20" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> pytest.approx(expected_result)</span></code></pre>
</div>
<p>Writing our tests this way highlights the key idea that each test
should compare the actual results returned by our function with expected
values.</p>
<p>Similarly, writing inline comments for our tests that complete the
sentence “Test that …” helps us to understand what each test is doing
and why it is needed.</p>
<p>Finally, let’s also modify our bug to something that will affect
durations with a non-zero minute component like “10:20” but not those
that are whole hours e.g. “10:00”.</p>
<p>Let’s change <code>int(hours)/60 + int(minutes)</code> to
<code>int(hours) + int(minutes)/6</code> a simple typo.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co">    Convert a text format duration "HH:MM" to duration in hours</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="co">        duration (str): The text format duration</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a><span class="co">        duration (float): The duration in hours</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a>    hours, minutes <span class="op">=</span> duration.split(<span class="st">":"</span>)</span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">6</span> <span class="co"># Divide by 6 instead of 60</span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>    <span class="cf">return</span> duration_hours</span></code></pre>
</div>
<p>Finally, let’s run our tests:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pytest </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>========================================================== test session starts 
platform darwin -- Python 3.12.3, pytest-8.2.2, pluggy-1.5.0
rootdir: /Users/AnnResearcher/Desktop/Spacewalks
plugins: cov-5.0.0
collected 2 items                                                                                                                        

tests/test_eva_data_analysis.py .F                                                                                                 [100%]

================================================================ FAILURES 
______________________________________________________ test_text_to_duration_float 

    def test_text_to_duration_float():
        """
        Test that text_to_duration returns expected ground truth values
        for typical durations with a non-zero minute component
        """
        actual_result = text_to_duration("10:20")
        expected_result = 10.33333333
&gt;       assert actual_result == pytest.approx(expected_result)
E       assert 13.333333333333334 == 10.33333333 ± 1.0e-05
E         
E         comparison failed
E         Obtained: 13.333333333333334
E         Expected: 10.33333333 ± 1.0e-05

tests/test_eva_data_analysis.py:23: AssertionError
======================================================== short test summary info 
FAILED tests/test_eva_data_analysis.py::test_text_to_duration_float - assert 13.333333333333334 == 10.33333333 ± 1.0e-05
====================================================== 1 failed, 1 passed in 0.32s
</code></pre>
</div>
<ul>
<li>Notice how if the test function finishes without triggering an
assertion, the test is considered successful and is marked with a dot
(‘.’).</li>
<li>If an assertion fails or an error occurs, the test is marked as a
failure with an ‘F’. and the output includes details about the error to
help identify what went wrong.</li>
</ul>
<div id="interpreting-pytest-output" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="interpreting-pytest-output" class="callout-inner">
<h3 class="callout-title">Interpreting pytest output<a class="anchor" aria-label="anchor" href="#interpreting-pytest-output"></a>
</h3>
<div class="callout-content">
<p>A colleague has asked you to conduct a pre-publication review of
their code <code>Spacetravel</code> which analyses time spent in space
by various individual astronauts.</p>
<p>Inspect the pytest output provided and answer the questions
below.</p>
<div class="section level3">
<h3 id="pytest-output-for-spacetravel">pytest output for <code>Spacetravel</code>
<a class="anchor" aria-label="anchor" href="#pytest-output-for-spacetravel"></a>
</h3>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>============================================================ test session starts 
platform darwin -- Python 3.12.3, pytest-8.2.2, pluggy-1.5.0
rootdir: /Users/Desktop/AnneResearcher/projects/Spacetravel
collected 9 items                                                                                                                                                              

tests/test_analyse.py FF....                                              [ 66%]
tests/test_prepare.py s..                                                 [100%]

====================================================================== FAILURES 
____________________________________________________________ test_total_duration

    def test_total_duration():
    
      durations = [10, 15, 20, 5]
      expected  = 50/60
      actual  = calculate_total_duration(durations)
&gt;     assert actual == pytest.approx(expected)
E     assert 8.333333333333334 == 0.8333333333333334 ± 8.3e-07
E       
E       comparison failed
E       Obtained: 8.333333333333334
E       Expected: 0.8333333333333334 ± 8.3e-07

tests/test_analyse.py:9: AssertionError
______________________________________________________________________________ test_mean_duration 

    def test_mean_duration():
       durations = [10, 15, 20, 5]
    
       expected = 12.5/60
&gt;      actual  = calculate_mean_duration(durations)

tests/test_analyse.py:15: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

durations = [10, 15, 20, 5]

    def calculate_mean_duration(durations):
        """
        Calculate the mean of a list of durations.
        """
        total_duration = sum(durations)/60
&gt;       mean_duration = total_duration / length(durations)
E       NameError: name 'length' is not defined

Spacetravel.py:45: NameError
=========================================================================== short test summary info 
FAILED tests/test_analyse.py::test_total_duration - assert 8.333333333333334 == 0.8333333333333334 ± 8.3e-07
FAILED tests/test_analyse.py::test_mean_duration - NameError: name 'length' is not defined
============================================================== 2 failed, 6 passed, 1 skipped in 0.02s 
</code></pre>
</div>
<ol style="list-style-type: lower-alpha">
<li>How many tests has our colleague included in the test suite?</li>
<li>The first test in test_prepare.py has a status of s; what does this
mean?</li>
<li>How many tests failed?</li>
<li>Why did “test_total_duration” fail?</li>
<li>Why did “test_mean_duration” fail?</li>
</ol>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<ol style="list-style-type: lower-alpha">
<li>9 tests were detected in the test suite</li>
<li>s - stands for “skipped”,</li>
<li>2 tests failed: the first and second tests in test file
<code>test_analyse.py</code>
</li>
<li>
<code>test_total_duration</code> failed because the calculated total
duration differs from the expected value by a factor of 10 i.e. the
assertion <code>actual == pytest.approx(expected)</code> evaluated to
<code>False</code>
</li>
<li>
<code>test_mean_duration</code> failed because there is a syntax
error in <code>calculate_mean_duration</code>. Our colleague has used
the command <code>length</code> (not a python command) instead of
<code>len</code>. As a result, running the function returns a
<code>NameError</code> rather than a calculated value and the test
assertion evaluates to <code>False</code>.</li>
</ol>
</div>
</div>
</div>
</div>
</section><section id="test-suite-design"><h2 class="section-heading">Test Suite Design<a class="anchor" aria-label="anchor" href="#test-suite-design"></a>
</h2>
<hr class="half-width">
<p>Now that we have tooling in place to automatically run our test
suite. What makes a good test suite?</p>
<div class="section level3">
<h3 id="good-tests">Good Tests<a class="anchor" aria-label="anchor" href="#good-tests"></a>
</h3>
<p>We should aim to test that our function behaves as expected with the
full range of inputs that it might encounter. It is helpful to consider
each argument of a function in turn and identify the range of typical
values it can take. Once we have identified this typical range or ranges
(where a function takes more than one argument), we should:</p>
<ul>
<li>Test at least one interior point</li>
<li>Test all values at the edge of the range</li>
<li>Test invalid values</li>
</ul>
<p>Let’s revisit the <code>crew_size</code> functions from our
colleague’s codebase. First let’s add the the additional functions to
<code>eva_data_analysis.py</code>:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a>...</span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a><span class="kw">def</span> calculate_crew_size(crew):</span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a><span class="co">    Calculate crew_size for a single crew entry</span></span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a><span class="co">        crew (str): The text entry in the crew column</span></span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a></span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb24-16"><a href="#cb24-16" tabindex="-1"></a><span class="co">        int: The crew size</span></span>
<span id="cb24-17"><a href="#cb24-17" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb24-18"><a href="#cb24-18" tabindex="-1"></a>    <span class="cf">if</span> crew.split() <span class="op">==</span> []:</span>
<span id="cb24-19"><a href="#cb24-19" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb24-20"><a href="#cb24-20" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb24-21"><a href="#cb24-21" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">len</span>(re.split(<span class="vs">r';'</span>, crew))<span class="op">-</span><span class="dv">1</span></span>
<span id="cb24-22"><a href="#cb24-22" tabindex="-1"></a></span>
<span id="cb24-23"><a href="#cb24-23" tabindex="-1"></a></span>
<span id="cb24-24"><a href="#cb24-24" tabindex="-1"></a><span class="kw">def</span> add_crew_size_variable(df_):</span>
<span id="cb24-25"><a href="#cb24-25" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb24-26"><a href="#cb24-26" tabindex="-1"></a><span class="co">    Add crew size (crew_size) variable to the dataset</span></span>
<span id="cb24-27"><a href="#cb24-27" tabindex="-1"></a></span>
<span id="cb24-28"><a href="#cb24-28" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb24-29"><a href="#cb24-29" tabindex="-1"></a><span class="co">        df_ (pd.DataFrame): The input data frame.</span></span>
<span id="cb24-30"><a href="#cb24-30" tabindex="-1"></a></span>
<span id="cb24-31"><a href="#cb24-31" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb24-32"><a href="#cb24-32" tabindex="-1"></a><span class="co">        df_copy (pd.DataFrame): A copy of df_ with the new crew_size variable added</span></span>
<span id="cb24-33"><a href="#cb24-33" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb24-34"><a href="#cb24-34" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Adding crew size variable (crew_size) to dataset'</span>)</span>
<span id="cb24-35"><a href="#cb24-35" tabindex="-1"></a>    df_copy <span class="op">=</span> df_.copy()</span>
<span id="cb24-36"><a href="#cb24-36" tabindex="-1"></a>    df_copy[<span class="st">"crew_size"</span>] <span class="op">=</span> df_copy[<span class="st">"crew"</span>].<span class="bu">apply</span>(</span>
<span id="cb24-37"><a href="#cb24-37" tabindex="-1"></a>        calculate_crew_size</span>
<span id="cb24-38"><a href="#cb24-38" tabindex="-1"></a>    )</span>
<span id="cb24-39"><a href="#cb24-39" tabindex="-1"></a>    <span class="cf">return</span> df_copy</span>
<span id="cb24-40"><a href="#cb24-40" tabindex="-1"></a></span>
<span id="cb24-41"><a href="#cb24-41" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb24-42"><a href="#cb24-42" tabindex="-1"></a></span>
<span id="cb24-43"><a href="#cb24-43" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">&lt;</span> <span class="dv">3</span>:</span>
<span id="cb24-44"><a href="#cb24-44" tabindex="-1"></a>        input_file <span class="op">=</span> <span class="st">'./eva-data.json'</span></span>
<span id="cb24-45"><a href="#cb24-45" tabindex="-1"></a>        output_file <span class="op">=</span> <span class="st">'./eva-data.csv'</span></span>
<span id="cb24-46"><a href="#cb24-46" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'Using default input and output filenames'</span>)</span>
<span id="cb24-47"><a href="#cb24-47" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb24-48"><a href="#cb24-48" tabindex="-1"></a>        input_file <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb24-49"><a href="#cb24-49" tabindex="-1"></a>        output_file <span class="op">=</span> sys.argv[<span class="dv">2</span>]</span>
<span id="cb24-50"><a href="#cb24-50" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Using custom input and output filenames'</span>)</span>
<span id="cb24-51"><a href="#cb24-51" tabindex="-1"></a></span>
<span id="cb24-52"><a href="#cb24-52" tabindex="-1"></a>    graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb24-53"><a href="#cb24-53" tabindex="-1"></a></span>
<span id="cb24-54"><a href="#cb24-54" tabindex="-1"></a>    eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb24-55"><a href="#cb24-55" tabindex="-1"></a></span>
<span id="cb24-56"><a href="#cb24-56" tabindex="-1"></a>    eva_data_prepared <span class="op">=</span> add_crew_size_variable(eva_data)  <span class="co"># Add this line</span></span>
<span id="cb24-57"><a href="#cb24-57" tabindex="-1"></a></span>
<span id="cb24-58"><a href="#cb24-58" tabindex="-1"></a>    write_dataframe_to_csv(eva_data_prepared, output_file)  <span class="co"># Modify this line</span></span>
<span id="cb24-59"><a href="#cb24-59" tabindex="-1"></a></span>
<span id="cb24-60"><a href="#cb24-60" tabindex="-1"></a>    plot_cumulative_time_in_space(eva_data_prepared, graph_file) <span class="co"># Modify this line</span></span>
<span id="cb24-61"><a href="#cb24-61" tabindex="-1"></a></span>
<span id="cb24-62"><a href="#cb24-62" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>Now, let’s write some tests for <code>calculate_crew_size</code>.</p>
<div id="unit-tests-for-calculate_crew_size" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="unit-tests-for-calculate_crew_size" class="callout-inner">
<h3 class="callout-title">Unit Tests for calculate_crew_size<a class="anchor" aria-label="anchor" href="#unit-tests-for-calculate_crew_size"></a>
</h3>
<div class="callout-content">
<p>Implement unit tests for the <code>calculate_crew_size</code>
function. Cover typical cases and edge cases.</p>
<p>Hint: use the following template:</p>
<pre><code>def test_MYFUNCTION (): # FIXME
    """
    Test that ...   #FIXME
    """
    
    # Typical value 1
    actual_result =  _______________ #FIXME
    expected_result = ______________ #FIXME
    assert actual_result == expected_result
    
    # Typical value 2
    actual_result =  _______________ #FIXME
    expected_result = ______________ #FIXME
    assert actual_result == expected_result
    </code></pre>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> (</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>    text_to_duration,</span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>    calculate_crew_size</span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a>)</span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a><span class="co">    Test that text_to_duration returns expected ground truth values</span></span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a><span class="co">    for typical whole hour durations</span></span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb26-12"><a href="#cb26-12" tabindex="-1"></a>    actual_result <span class="op">=</span>  text_to_duration(<span class="st">"10:00"</span>)</span>
<span id="cb26-13"><a href="#cb26-13" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb26-14"><a href="#cb26-14" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb26-15"><a href="#cb26-15" tabindex="-1"></a></span>
<span id="cb26-16"><a href="#cb26-16" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb26-17"><a href="#cb26-17" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb26-18"><a href="#cb26-18" tabindex="-1"></a><span class="co">    Test that text_to_duration returns expected ground truth values</span></span>
<span id="cb26-19"><a href="#cb26-19" tabindex="-1"></a><span class="co">    for typical durations with a non-zero minute component</span></span>
<span id="cb26-20"><a href="#cb26-20" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb26-21"><a href="#cb26-21" tabindex="-1"></a>    actual_result <span class="op">=</span> text_to_duration(<span class="st">"10:20"</span>)</span>
<span id="cb26-22"><a href="#cb26-22" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="fl">10.33333333</span></span>
<span id="cb26-23"><a href="#cb26-23" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> pytest.approx(expected_result)</span>
<span id="cb26-24"><a href="#cb26-24" tabindex="-1"></a></span>
<span id="cb26-25"><a href="#cb26-25" tabindex="-1"></a><span class="kw">def</span> test_calculate_crew_size():</span>
<span id="cb26-26"><a href="#cb26-26" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb26-27"><a href="#cb26-27" tabindex="-1"></a><span class="co">    Test that calculate_crew_size returns expected ground truth values</span></span>
<span id="cb26-28"><a href="#cb26-28" tabindex="-1"></a><span class="co">    for typical crew values</span></span>
<span id="cb26-29"><a href="#cb26-29" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb26-30"><a href="#cb26-30" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">"Valentina Tereshkova;"</span>)</span>
<span id="cb26-31"><a href="#cb26-31" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb26-32"><a href="#cb26-32" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb26-33"><a href="#cb26-33" tabindex="-1"></a></span>
<span id="cb26-34"><a href="#cb26-34" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">"Judith Resnik; Sally Ride;"</span>)</span>
<span id="cb26-35"><a href="#cb26-35" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb26-36"><a href="#cb26-36" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb26-37"><a href="#cb26-37" tabindex="-1"></a></span>
<span id="cb26-38"><a href="#cb26-38" tabindex="-1"></a></span>
<span id="cb26-39"><a href="#cb26-39" tabindex="-1"></a><span class="co"># Edge cases</span></span>
<span id="cb26-40"><a href="#cb26-40" tabindex="-1"></a><span class="kw">def</span> test_calculate_crew_size_edge_cases():</span>
<span id="cb26-41"><a href="#cb26-41" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb26-42"><a href="#cb26-42" tabindex="-1"></a><span class="co">    Test that calculate_crew_size returns expected ground truth values</span></span>
<span id="cb26-43"><a href="#cb26-43" tabindex="-1"></a><span class="co">    for edge case where crew is an empty string</span></span>
<span id="cb26-44"><a href="#cb26-44" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb26-45"><a href="#cb26-45" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">""</span>)</span>
<span id="cb26-46"><a href="#cb26-46" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="kw">is</span> <span class="va">None</span></span>
<span id="cb26-47"><a href="#cb26-47" tabindex="-1"></a></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>========================================================== test session starts 
platform darwin -- Python 3.12.3, pytest-8.2.2, pluggy-1.5.0
rootdir: /Users/AnnResearcher/Desktop/Spacewalks
plugins: cov-5.0.0
collected 4 items                                                                                                                        

tests/test_eva_data_analysis.py .F..                                                                                               [100%]

================================================================ FAILURES 
______________________________________________________ test_text_to_duration_float 

    def test_text_to_duration_float():
        """
        Test that text_to_duration returns expected ground truth values
        for typical durations with a non-zero minute component
        """
        actual_result = text_to_duration("10:20")
        expected_result = 10.33333333
&gt;       assert actual_result == pytest.approx(expected_result)
E       assert 13.333333333333334 == 10.33333333 ± 1.0e-05
E         
E         comparison failed
E         Obtained: 13.333333333333334
E         Expected: 10.33333333 ± 1.0e-05

tests/test_eva_data_analysis.py:23: AssertionError
======================================================== short test summary info 
FAILED tests/test_eva_data_analysis.py::test_text_to_duration_float - assert 13.333333333333334 == 10.33333333 ± 1.0e-05
====================================================== 1 failed, 3 passed in 0.33s 
</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="enough-tests">Enough Tests<a class="anchor" aria-label="anchor" href="#enough-tests"></a>
</h3>
<p>In this episode, so far we’ve (only) written tests for two individual
functions <code>text_to_duration</code> and
<code>calculate_crew_size</code>.</p>
<p>We can quantify the proportion of our code base that is run (also
referred to as “exercised”) by a given test suite using a metric called
code coverage:</p>
<p><span class="math display">\[ \text{Line Coverage} = \left(
\frac{\text{Number of Executed Lines}}{\text{Total Number of Executable
Lines}} \right) \times 100 \]</span></p>
<p>We can calculate our test coverage using the pytest-cov library.
Before we do so, let’s fix our bug so that our output is cleaner and we
can focus on the code coverage information.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="co">    Convert a text format duration "HH:MM" to duration in hours</span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a><span class="co">        duration (str): The text format duration</span></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a><span class="co">        duration (float): The duration in hours</span></span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a>    hours, minutes <span class="op">=</span> duration.split(<span class="st">":"</span>)</span>
<span id="cb28-12"><a href="#cb28-12" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">60</span> <span class="co"># Bug-free line</span></span>
<span id="cb28-13"><a href="#cb28-13" tabindex="-1"></a>    <span class="cf">return</span> duration_hours</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pytest <span class="at">--cov</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>========================================================== test session starts 
platform darwin -- Python 3.12.3, pytest-8.2.2, pluggy-1.5.0
rootdir: /Users/AnnResearcher/Desktop/Spacewalks
plugins: cov-5.0.0
collected 4 items                                                                                                                        

tests/test_eva_data_analysis.py ....                                                                                               [100%]

---------- coverage: platform darwin, python 3.12.3-final-0 ----------
Name                              Stmts   Miss  Cover
-----------------------------------------------------
eva_data_analysis.py                 56     38    32%
tests/test_eva_data_analysis.py      20      0   100%
-----------------------------------------------------
TOTAL                                76     38    50%


=========================================================== 4 passed in 1.04s
</code></pre>
</div>
<p>To get an in-depth report about which parts of our code are tested
and which are not, we can add the option
<code>--cov-report=html</code>.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pytest <span class="at">--cov</span> <span class="at">--cov-report</span><span class="op">=</span>html </span></code></pre>
</div>
<p>This option generates a folder <code>htmlcov</code> which contains a
html code coverage report. This provides structured information about
our test coverage including (a) a table showing the proportion of lines
in each function that are currently tested (b) an annotated copy of our
code where untested lines are highlighted in red.</p>
<p>Ideally, all the lines of code in our code base should be exercised
by at least one test. However, if we lack the time and resources to test
every line of our code we should:</p>
<ul>
<li>Avoid testing Python’s built-in functions or functions imported from
well-known and well-test libraries like Pandas or numpy.</li>
<li>Focus on the the parts of our code that carry the greatest
“reputational risk” i.e. that could affect the accuracy of our reported
results.</li>
</ul>
<p>One the other hand, it is also important to realise that althought
coverage of less than 100% indicates that more testing may be helpful,
test coverage of 100% does not mean that our code is bug-free!</p>
<div id="evaluating-code-coverage" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="evaluating-code-coverage" class="callout-inner">
<h3 class="callout-title">Evaluating Code Coverage<a class="anchor" aria-label="anchor" href="#evaluating-code-coverage"></a>
</h3>
<div class="callout-content">
<p>Generate a code coverage report for the <code>Spacewalks</code> test
suite and extract the following information:</p>
<ol style="list-style-type: lower-alpha">
<li>What proportion of the code base is currently NOT exercised by the
test suite?</li>
<li>Which functions in our code base are currently untested?</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pytest <span class="at">--cov</span> <span class="at">--cov-report</span><span class="op">=</span>html</span></code></pre>
</div>
<ol style="list-style-type: lower-alpha">
<li>The proportion of the code base NOT covered by our tests is
<code>100 - 32%</code> = 68%</li>
<li>The following functions in our code base are currently untested:
<ul>
<li>read_json_to_dataframe</li>
<li>write_dataframe_to_csv</li>
<li>add_duration_hours_variable</li>
<li>plot_cumulative_time_in_space</li>
<li>add_crew_size_variable</li>
</ul>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="implementing-a-minimal-test-suite">Implementing a minimal test suite<a class="anchor" aria-label="anchor" href="#implementing-a-minimal-test-suite"></a>
</h3>
<p>A member of our research team shares the following code with us to
add to the Spacewalks codebase:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="kw">def</span> summarise_categorical(df_, varname_):</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="co">    Tabulate the distribution of a categorical variable</span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a><span class="co">        df_ (pd.DataFrame): The input dataframe.</span></span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a><span class="co">        varname_ (str): The name of the variable</span></span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a></span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a><span class="co">        pd.DataFrame: dataframe containing the count and percentage of</span></span>
<span id="cb33-11"><a href="#cb33-11" tabindex="-1"></a><span class="co">        each unique value of varname_</span></span>
<span id="cb33-12"><a href="#cb33-12" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb33-13"><a href="#cb33-13" tabindex="-1"></a><span class="co">    Examples:</span></span>
<span id="cb33-14"><a href="#cb33-14" tabindex="-1"></a><span class="co">        &gt;&gt;&gt; df_example  = pd.DataFrame({</span></span>
<span id="cb33-15"><a href="#cb33-15" tabindex="-1"></a><span class="co">            'vehicle': ['Apollo 16', 'Apollo 17', 'Apollo 17'],</span></span>
<span id="cb33-16"><a href="#cb33-16" tabindex="-1"></a><span class="co">            }, index=[0, 1, 2)</span></span>
<span id="cb33-17"><a href="#cb33-17" tabindex="-1"></a><span class="co">        &gt;&gt;&gt; summarise_categorical(df_example, "vehicle")</span></span>
<span id="cb33-18"><a href="#cb33-18" tabindex="-1"></a><span class="co">        Tabulating distribution of categorical variable vehicle</span></span>
<span id="cb33-19"><a href="#cb33-19" tabindex="-1"></a><span class="co">             vehicle  count  percentage</span></span>
<span id="cb33-20"><a href="#cb33-20" tabindex="-1"></a><span class="co">        0  Apollo 16      1        33.0</span></span>
<span id="cb33-21"><a href="#cb33-21" tabindex="-1"></a><span class="co">        1  Apollo 17      2        67.0</span></span>
<span id="cb33-22"><a href="#cb33-22" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb33-23"><a href="#cb33-23" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Tabulating distribution of categorical variable </span><span class="sc">{</span>varname_<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb33-24"><a href="#cb33-24" tabindex="-1"></a></span>
<span id="cb33-25"><a href="#cb33-25" tabindex="-1"></a>    <span class="co"># Prepare statistical summary</span></span>
<span id="cb33-26"><a href="#cb33-26" tabindex="-1"></a>    count_variable <span class="op">=</span> df_[[varname_]].copy()</span>
<span id="cb33-27"><a href="#cb33-27" tabindex="-1"></a>    count_summary <span class="op">=</span> count_variable.value_counts()</span>
<span id="cb33-28"><a href="#cb33-28" tabindex="-1"></a>    percentage_summary <span class="op">=</span> <span class="bu">round</span>(count_summary <span class="op">/</span> count_variable.size, <span class="dv">2</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb33-29"><a href="#cb33-29" tabindex="-1"></a></span>
<span id="cb33-30"><a href="#cb33-30" tabindex="-1"></a>    <span class="co"># Combine results into a summary data frame</span></span>
<span id="cb33-31"><a href="#cb33-31" tabindex="-1"></a>    df_summary <span class="op">=</span> pd.concat([count_summary, percentage_summary], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb33-32"><a href="#cb33-32" tabindex="-1"></a>    df_summary.columns <span class="op">=</span> [<span class="st">'count'</span>, <span class="st">'percentage'</span>]</span>
<span id="cb33-33"><a href="#cb33-33" tabindex="-1"></a>    df_summary.sort_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb33-34"><a href="#cb33-34" tabindex="-1"></a></span>
<span id="cb33-35"><a href="#cb33-35" tabindex="-1"></a></span>
<span id="cb33-36"><a href="#cb33-36" tabindex="-1"></a>    df_summary <span class="op">=</span> df_summary.reset_index()</span>
<span id="cb33-37"><a href="#cb33-37" tabindex="-1"></a>    <span class="cf">return</span> df_summary</span></code></pre>
</div>
<p>This looks like a useful tool for creating summary statistics tables,
so let’s integrate this into our <code>eva_data_analysis.py</code>code
and then write a minimal test suite to check that this code is behaving
as expected.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" tabindex="-1"></a>...</span>
<span id="cb34-8"><a href="#cb34-8" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" tabindex="-1"></a><span class="kw">def</span> add_crew_size_variable(df_):</span>
<span id="cb34-10"><a href="#cb34-10" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb34-11"><a href="#cb34-11" tabindex="-1"></a><span class="co">    Add crew size (crew_size) variable to the dataset</span></span>
<span id="cb34-12"><a href="#cb34-12" tabindex="-1"></a></span>
<span id="cb34-13"><a href="#cb34-13" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb34-14"><a href="#cb34-14" tabindex="-1"></a><span class="co">        df_ (pd.DataFrame): The input dataframe.</span></span>
<span id="cb34-15"><a href="#cb34-15" tabindex="-1"></a></span>
<span id="cb34-16"><a href="#cb34-16" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb34-17"><a href="#cb34-17" tabindex="-1"></a><span class="co">        pd.DataFrame: A copy of df_ with the new crew_size variable added</span></span>
<span id="cb34-18"><a href="#cb34-18" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb34-19"><a href="#cb34-19" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Adding crew size variable (crew_size) to dataset'</span>)</span>
<span id="cb34-20"><a href="#cb34-20" tabindex="-1"></a>    df_copy <span class="op">=</span> df_.copy()</span>
<span id="cb34-21"><a href="#cb34-21" tabindex="-1"></a>    df_copy[<span class="st">"crew_size"</span>] <span class="op">=</span> df_copy[<span class="st">"crew"</span>].<span class="bu">apply</span>(</span>
<span id="cb34-22"><a href="#cb34-22" tabindex="-1"></a>        calculate_crew_size</span>
<span id="cb34-23"><a href="#cb34-23" tabindex="-1"></a>    )</span>
<span id="cb34-24"><a href="#cb34-24" tabindex="-1"></a>    <span class="cf">return</span> df_copy</span>
<span id="cb34-25"><a href="#cb34-25" tabindex="-1"></a></span>
<span id="cb34-26"><a href="#cb34-26" tabindex="-1"></a></span>
<span id="cb34-27"><a href="#cb34-27" tabindex="-1"></a><span class="kw">def</span> summarise_categorical(df_, varname_):</span>
<span id="cb34-28"><a href="#cb34-28" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb34-29"><a href="#cb34-29" tabindex="-1"></a><span class="co">    Tabulate the distribution of a categorical variable</span></span>
<span id="cb34-30"><a href="#cb34-30" tabindex="-1"></a></span>
<span id="cb34-31"><a href="#cb34-31" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb34-32"><a href="#cb34-32" tabindex="-1"></a><span class="co">        df_ (pd.DataFrame): The input dataframe.</span></span>
<span id="cb34-33"><a href="#cb34-33" tabindex="-1"></a><span class="co">        varname_ (str): The name of the variable</span></span>
<span id="cb34-34"><a href="#cb34-34" tabindex="-1"></a></span>
<span id="cb34-35"><a href="#cb34-35" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb34-36"><a href="#cb34-36" tabindex="-1"></a><span class="co">        pd.DataFrame: dataframe containing the count and percentage of</span></span>
<span id="cb34-37"><a href="#cb34-37" tabindex="-1"></a><span class="co">        each unique value of varname_</span></span>
<span id="cb34-38"><a href="#cb34-38" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb34-39"><a href="#cb34-39" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Tabulating distribution of categorical variable </span><span class="sc">{</span>varname_<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb34-40"><a href="#cb34-40" tabindex="-1"></a></span>
<span id="cb34-41"><a href="#cb34-41" tabindex="-1"></a>    <span class="co"># Prepare statistical summary</span></span>
<span id="cb34-42"><a href="#cb34-42" tabindex="-1"></a>    count_variable <span class="op">=</span> df_[[varname_]].copy()</span>
<span id="cb34-43"><a href="#cb34-43" tabindex="-1"></a>    count_summary <span class="op">=</span> count_variable.value_counts() <span class="co"># There is a bug here that we will fix later!</span></span>
<span id="cb34-44"><a href="#cb34-44" tabindex="-1"></a>    percentage_summary <span class="op">=</span> <span class="bu">round</span>(count_summary <span class="op">/</span> count_variable.size, <span class="dv">2</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb34-45"><a href="#cb34-45" tabindex="-1"></a></span>
<span id="cb34-46"><a href="#cb34-46" tabindex="-1"></a>    <span class="co"># Combine results into a summary data frame</span></span>
<span id="cb34-47"><a href="#cb34-47" tabindex="-1"></a>    df_summary <span class="op">=</span> pd.concat([count_summary, percentage_summary], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb34-48"><a href="#cb34-48" tabindex="-1"></a>    df_summary.columns <span class="op">=</span> [<span class="st">'count'</span>, <span class="st">'percentage'</span>]</span>
<span id="cb34-49"><a href="#cb34-49" tabindex="-1"></a>    df_summary.sort_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb34-50"><a href="#cb34-50" tabindex="-1"></a></span>
<span id="cb34-51"><a href="#cb34-51" tabindex="-1"></a></span>
<span id="cb34-52"><a href="#cb34-52" tabindex="-1"></a>    df_summary <span class="op">=</span> df_summary.reset_index()</span>
<span id="cb34-53"><a href="#cb34-53" tabindex="-1"></a>    <span class="cf">return</span> df_summary</span>
<span id="cb34-54"><a href="#cb34-54" tabindex="-1"></a></span>
<span id="cb34-55"><a href="#cb34-55" tabindex="-1"></a></span>
<span id="cb34-56"><a href="#cb34-56" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb34-57"><a href="#cb34-57" tabindex="-1"></a></span>
<span id="cb34-58"><a href="#cb34-58" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">&lt;</span> <span class="dv">3</span>:</span>
<span id="cb34-59"><a href="#cb34-59" tabindex="-1"></a>        input_file <span class="op">=</span> <span class="st">'./eva-data.json'</span></span>
<span id="cb34-60"><a href="#cb34-60" tabindex="-1"></a>        output_file <span class="op">=</span> <span class="st">'./eva-data.csv'</span></span>
<span id="cb34-61"><a href="#cb34-61" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'Using default input and output filenames'</span>)</span>
<span id="cb34-62"><a href="#cb34-62" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb34-63"><a href="#cb34-63" tabindex="-1"></a>        input_file <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb34-64"><a href="#cb34-64" tabindex="-1"></a>        output_file <span class="op">=</span> sys.argv[<span class="dv">2</span>]</span>
<span id="cb34-65"><a href="#cb34-65" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Using custom input and output filenames'</span>)</span>
<span id="cb34-66"><a href="#cb34-66" tabindex="-1"></a></span>
<span id="cb34-67"><a href="#cb34-67" tabindex="-1"></a>    graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb34-68"><a href="#cb34-68" tabindex="-1"></a></span>
<span id="cb34-69"><a href="#cb34-69" tabindex="-1"></a>    eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb34-70"><a href="#cb34-70" tabindex="-1"></a></span>
<span id="cb34-71"><a href="#cb34-71" tabindex="-1"></a>    eva_data_prepared <span class="op">=</span> add_crew_size_variable(eva_data)</span>
<span id="cb34-72"><a href="#cb34-72" tabindex="-1"></a></span>
<span id="cb34-73"><a href="#cb34-73" tabindex="-1"></a>    write_dataframe_to_csv(eva_data_prepared, output_file)</span>
<span id="cb34-74"><a href="#cb34-74" tabindex="-1"></a></span>
<span id="cb34-75"><a href="#cb34-75" tabindex="-1"></a>    table_crew_size <span class="op">=</span> summarise_categorical(eva_data_prepared, <span class="st">"crew_size"</span>)</span>
<span id="cb34-76"><a href="#cb34-76" tabindex="-1"></a></span>
<span id="cb34-77"><a href="#cb34-77" tabindex="-1"></a>    write_dataframe_to_csv(table_crew_size, <span class="st">"./table_crew_size.csv"</span>)</span>
<span id="cb34-78"><a href="#cb34-78" tabindex="-1"></a></span>
<span id="cb34-79"><a href="#cb34-79" tabindex="-1"></a>    plot_cumulative_time_in_space(eva_data_prepared, graph_file)</span>
<span id="cb34-80"><a href="#cb34-80" tabindex="-1"></a></span>
<span id="cb34-81"><a href="#cb34-81" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>To write tests for this function, we’ll need to be able to compare
dataframes. The pandas.testing module in the pandas library provides
functions and utilities for testing pandas objects and includes a
function <code>assert_frame_equal</code> that we can use to compare two
dataframes.</p>
<div id="exercise-1---typical-inputs" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-1---typical-inputs" class="callout-inner">
<h3 class="callout-title">Exercise 1 - Typical Inputs<a class="anchor" aria-label="anchor" href="#exercise-1---typical-inputs"></a>
</h3>
<div class="callout-content">
<p>First, check that the function behaves as expected with typical input
values. Fill in the gaps in the skeleton test below:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="im">import</span> pandas.testing <span class="im">as</span> pdt</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="kw">def</span> test_summarise_categorical_typical():</span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a><span class="co">    Test that summarise_categorical correctly tabulates</span></span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a><span class="co">    distribution of values (counts, percentages) for a ground truth</span></span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a><span class="co">    example (typical values)</span></span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a>    test_input <span class="op">=</span> pd.DataFrame({</span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a>        <span class="st">'country'</span>: _________________________________________, <span class="co"># FIX-ME</span></span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a>    }, index<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb35-12"><a href="#cb35-12" tabindex="-1"></a></span>
<span id="cb35-13"><a href="#cb35-13" tabindex="-1"></a>    expected_result <span class="op">=</span> pd.DataFrame({</span>
<span id="cb35-14"><a href="#cb35-14" tabindex="-1"></a>        <span class="st">'country'</span>: [<span class="st">"Russia"</span>, <span class="st">"USA"</span>],</span>
<span id="cb35-15"><a href="#cb35-15" tabindex="-1"></a>        <span class="st">'count'</span>: [<span class="dv">2</span>, <span class="dv">3</span>],</span>
<span id="cb35-16"><a href="#cb35-16" tabindex="-1"></a>        <span class="st">'percentage'</span>: [<span class="fl">40.0</span>, <span class="fl">60.0</span>],</span>
<span id="cb35-17"><a href="#cb35-17" tabindex="-1"></a>    }, index<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>])</span>
<span id="cb35-18"><a href="#cb35-18" tabindex="-1"></a></span>
<span id="cb35-19"><a href="#cb35-19" tabindex="-1"></a>    actual_result <span class="op">=</span> ____________________________________________ <span class="co"># FIX-ME </span></span>
<span id="cb35-20"><a href="#cb35-20" tabindex="-1"></a>    </span>
<span id="cb35-21"><a href="#cb35-21" tabindex="-1"></a>    pdt.__________________(actual_result, _______________) <span class="co">#FIX-ME</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="im">import</span> pandas.testing <span class="im">as</span> pdt</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="kw">def</span> test_summarise_categorical():</span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a><span class="co">    Test that summarise_categorical correctly tabulates</span></span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a><span class="co">    distribution of values (counts, percentages) for a simple ground truth</span></span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a><span class="co">    example</span></span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a>    test_input <span class="op">=</span> pd.DataFrame({</span>
<span id="cb36-10"><a href="#cb36-10" tabindex="-1"></a>        <span class="st">'country'</span>: [<span class="st">'USA'</span>, <span class="st">'USA'</span>, <span class="st">'USA'</span>, <span class="st">"Russia"</span>, <span class="st">"Russia"</span>],</span>
<span id="cb36-11"><a href="#cb36-11" tabindex="-1"></a>    }, index<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb36-12"><a href="#cb36-12" tabindex="-1"></a></span>
<span id="cb36-13"><a href="#cb36-13" tabindex="-1"></a>    expected_result <span class="op">=</span> pd.DataFrame({</span>
<span id="cb36-14"><a href="#cb36-14" tabindex="-1"></a>        <span class="st">'country'</span>: [<span class="st">"Russia"</span>, <span class="st">"USA"</span>],</span>
<span id="cb36-15"><a href="#cb36-15" tabindex="-1"></a>        <span class="st">'count'</span>: [<span class="dv">2</span>, <span class="dv">3</span>],</span>
<span id="cb36-16"><a href="#cb36-16" tabindex="-1"></a>        <span class="st">'percentage'</span>: [<span class="fl">40.0</span>, <span class="fl">60.0</span>],</span>
<span id="cb36-17"><a href="#cb36-17" tabindex="-1"></a>    }, index<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>])</span>
<span id="cb36-18"><a href="#cb36-18" tabindex="-1"></a></span>
<span id="cb36-19"><a href="#cb36-19" tabindex="-1"></a>    actual_result <span class="op">=</span> summarise_categorical(test_input, <span class="st">"country"</span>)</span>
<span id="cb36-20"><a href="#cb36-20" tabindex="-1"></a></span>
<span id="cb36-21"><a href="#cb36-21" tabindex="-1"></a>    pdt.assert_frame_equal(actual_result, expected_result)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="exercise-2---edge-cases" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-2---edge-cases" class="callout-inner">
<h3 class="callout-title">Exercise 2 - Edge Cases<a class="anchor" aria-label="anchor" href="#exercise-2---edge-cases"></a>
</h3>
<div class="callout-content">
<p>Now let’s check that the function behaves as expected with edge
cases.<br>
Does the code behave as expected when the column of interest contains
one or more missing values (pd.NA)? (write a new test).</p>
<p>Fill in the gaps in the skeleton test below:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="im">import</span> pandas.testing <span class="im">as</span> pdt</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="kw">def</span> test_summarise_categorical_missvals():</span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a><span class="co">    Test that summarise_categorical correctly tabulates</span></span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a><span class="co">    distribution of values (counts, percentages) for a ground truth</span></span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a><span class="co">    example (edge case where all column contains missing values)</span></span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb37-9"><a href="#cb37-9" tabindex="-1"></a>    test_input <span class="op">=</span> _______________</span>
<span id="cb37-10"><a href="#cb37-10" tabindex="-1"></a>    _______________</span>
<span id="cb37-11"><a href="#cb37-11" tabindex="-1"></a>    _______________ <span class="co"># FIX-ME</span></span>
<span id="cb37-12"><a href="#cb37-12" tabindex="-1"></a>    </span>
<span id="cb37-13"><a href="#cb37-13" tabindex="-1"></a>    expected_result <span class="op">=</span> _______________</span>
<span id="cb37-14"><a href="#cb37-14" tabindex="-1"></a>    _______________</span>
<span id="cb37-15"><a href="#cb37-15" tabindex="-1"></a>    _______________ <span class="co"># FIX-ME</span></span>
<span id="cb37-16"><a href="#cb37-16" tabindex="-1"></a>    </span>
<span id="cb37-17"><a href="#cb37-17" tabindex="-1"></a>    actual_result <span class="op">=</span> summarise_categorical(test_input, <span class="st">"country"</span>)</span>
<span id="cb37-18"><a href="#cb37-18" tabindex="-1"></a></span>
<span id="cb37-19"><a href="#cb37-19" tabindex="-1"></a>    pdt.assert_frame_equal(actual_result, expected_result)</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="im">import</span> pandas.testing <span class="im">as</span> pdt</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="kw">def</span> test_summarise_categorical_missvals():</span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a><span class="co">    Test that summarise_categorical correctly tabulates</span></span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a><span class="co">    distribution of values (counts, percentages) for a ground truth</span></span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a><span class="co">    example (edge case where column contains missing values)</span></span>
<span id="cb38-8"><a href="#cb38-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb38-9"><a href="#cb38-9" tabindex="-1"></a>    test_input <span class="op">=</span> pd.DataFrame({</span>
<span id="cb38-10"><a href="#cb38-10" tabindex="-1"></a>        <span class="st">'country'</span>: [<span class="st">'USA'</span>, <span class="st">'USA'</span>, <span class="st">'USA'</span>, <span class="st">"Russia"</span>, pd.NA],</span>
<span id="cb38-11"><a href="#cb38-11" tabindex="-1"></a>    }, index<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb38-12"><a href="#cb38-12" tabindex="-1"></a></span>
<span id="cb38-13"><a href="#cb38-13" tabindex="-1"></a>    expected_result <span class="op">=</span> pd.DataFrame({</span>
<span id="cb38-14"><a href="#cb38-14" tabindex="-1"></a>        <span class="st">'country'</span>: [<span class="st">"Russia"</span>, <span class="st">"USA"</span>, np.nan], <span class="co"># np.nan because pd.NA is cast to np.nan</span></span>
<span id="cb38-15"><a href="#cb38-15" tabindex="-1"></a>        <span class="st">'count'</span>: [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>],</span>
<span id="cb38-16"><a href="#cb38-16" tabindex="-1"></a>        <span class="st">'percentage'</span>: [<span class="fl">20.0</span>, <span class="fl">60.0</span>, <span class="fl">20.0</span>],</span>
<span id="cb38-17"><a href="#cb38-17" tabindex="-1"></a>    }, index<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>])</span>
<span id="cb38-18"><a href="#cb38-18" tabindex="-1"></a>    actual_result <span class="op">=</span> summarise_categorical(test_input, <span class="st">"country"</span>)</span>
<span id="cb38-19"><a href="#cb38-19" tabindex="-1"></a></span>
<span id="cb38-20"><a href="#cb38-20" tabindex="-1"></a>    pdt.assert_frame_equal(actual_result, expected_result)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="exercise-3---invalid-inputs" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-3---invalid-inputs" class="callout-inner">
<h3 class="callout-title">Exercise 3 - Invalid inputs<a class="anchor" aria-label="anchor" href="#exercise-3---invalid-inputs"></a>
</h3>
<div class="callout-content">
<p>Now write a test to check that the <code>summarise_categorical</code>
function raises an appropriate error when asked to tabulate a column
that does not exist in the data frame.</p>
<p>Hint: lookup <code>pytest.raises</code> in the pytest
documentation.</p>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Show me the solution </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a><span class="kw">def</span> test_summarise_categorical_invalid():</span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a><span class="co">    Test that summarise_categorical raises an</span></span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a><span class="co">    error when a non-existent column is input</span></span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a>    test_input <span class="op">=</span> pd.DataFrame({</span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a>        <span class="st">'country'</span>: [<span class="st">'USA'</span>, <span class="st">'USA'</span>, <span class="st">'USA'</span>, <span class="st">"Russia"</span>, <span class="st">"Russia"</span>],</span>
<span id="cb39-9"><a href="#cb39-9" tabindex="-1"></a>    }, index<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb39-10"><a href="#cb39-10" tabindex="-1"></a></span>
<span id="cb39-11"><a href="#cb39-11" tabindex="-1"></a>    <span class="cf">with</span> pytest.raises(<span class="pp">KeyError</span>):</span>
<span id="cb39-12"><a href="#cb39-12" tabindex="-1"></a>        summarise_categorical(test_input, <span class="st">"vehicle"</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section id="improving-our-code"><h2 class="section-heading">Improving Our Code<a class="anchor" aria-label="anchor" href="#improving-our-code"></a>
</h2>
<hr class="half-width">
<p>At the end of this episode, our test suite in <code>tests</code>
should look like this:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="im">import</span> pandas.testing <span class="im">as</span> pdt</span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> (</span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a>    text_to_duration,</span>
<span id="cb40-8"><a href="#cb40-8" tabindex="-1"></a>    calculate_crew_size,</span>
<span id="cb40-9"><a href="#cb40-9" tabindex="-1"></a>    summarise_categorical</span>
<span id="cb40-10"><a href="#cb40-10" tabindex="-1"></a>)</span>
<span id="cb40-11"><a href="#cb40-11" tabindex="-1"></a></span>
<span id="cb40-12"><a href="#cb40-12" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb40-13"><a href="#cb40-13" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb40-14"><a href="#cb40-14" tabindex="-1"></a><span class="co">    Test that text_to_duration returns expected ground truth values</span></span>
<span id="cb40-15"><a href="#cb40-15" tabindex="-1"></a><span class="co">    for typical whole hour durations</span></span>
<span id="cb40-16"><a href="#cb40-16" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb40-17"><a href="#cb40-17" tabindex="-1"></a>    actual_result <span class="op">=</span>  text_to_duration(<span class="st">"10:00"</span>)</span>
<span id="cb40-18"><a href="#cb40-18" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb40-19"><a href="#cb40-19" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb40-20"><a href="#cb40-20" tabindex="-1"></a></span>
<span id="cb40-21"><a href="#cb40-21" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb40-22"><a href="#cb40-22" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb40-23"><a href="#cb40-23" tabindex="-1"></a><span class="co">    Test that text_to_duration returns expected ground truth values</span></span>
<span id="cb40-24"><a href="#cb40-24" tabindex="-1"></a><span class="co">    for typical durations with a non-zero minute component</span></span>
<span id="cb40-25"><a href="#cb40-25" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb40-26"><a href="#cb40-26" tabindex="-1"></a>    actual_result <span class="op">=</span> text_to_duration(<span class="st">"10:20"</span>)</span>
<span id="cb40-27"><a href="#cb40-27" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="fl">10.33333333</span></span>
<span id="cb40-28"><a href="#cb40-28" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> pytest.approx(expected_result)</span>
<span id="cb40-29"><a href="#cb40-29" tabindex="-1"></a></span>
<span id="cb40-30"><a href="#cb40-30" tabindex="-1"></a><span class="kw">def</span> test_calculate_crew_size():</span>
<span id="cb40-31"><a href="#cb40-31" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb40-32"><a href="#cb40-32" tabindex="-1"></a><span class="co">    Test that calculate_crew_size returns expected ground truth values</span></span>
<span id="cb40-33"><a href="#cb40-33" tabindex="-1"></a><span class="co">    for typical crew values</span></span>
<span id="cb40-34"><a href="#cb40-34" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb40-35"><a href="#cb40-35" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">"Valentina Tereshkova;"</span>)</span>
<span id="cb40-36"><a href="#cb40-36" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb40-37"><a href="#cb40-37" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb40-38"><a href="#cb40-38" tabindex="-1"></a></span>
<span id="cb40-39"><a href="#cb40-39" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">"Judith Resnik; Sally Ride;"</span>)</span>
<span id="cb40-40"><a href="#cb40-40" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb40-41"><a href="#cb40-41" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb40-42"><a href="#cb40-42" tabindex="-1"></a></span>
<span id="cb40-43"><a href="#cb40-43" tabindex="-1"></a></span>
<span id="cb40-44"><a href="#cb40-44" tabindex="-1"></a><span class="kw">def</span> test_calculate_crew_size_edge_cases():</span>
<span id="cb40-45"><a href="#cb40-45" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb40-46"><a href="#cb40-46" tabindex="-1"></a><span class="co">    Test that calculate_crew_size returns expected ground truth values</span></span>
<span id="cb40-47"><a href="#cb40-47" tabindex="-1"></a><span class="co">    for edge case where crew is an empty string</span></span>
<span id="cb40-48"><a href="#cb40-48" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb40-49"><a href="#cb40-49" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">""</span>)</span>
<span id="cb40-50"><a href="#cb40-50" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="kw">is</span> <span class="va">None</span></span>
<span id="cb40-51"><a href="#cb40-51" tabindex="-1"></a></span>
<span id="cb40-52"><a href="#cb40-52" tabindex="-1"></a></span>
<span id="cb40-53"><a href="#cb40-53" tabindex="-1"></a><span class="kw">def</span> test_summarise_categorical():</span>
<span id="cb40-54"><a href="#cb40-54" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb40-55"><a href="#cb40-55" tabindex="-1"></a><span class="co">    Test that summarise_categorical correctly tabulates</span></span>
<span id="cb40-56"><a href="#cb40-56" tabindex="-1"></a><span class="co">    distribution of values (counts, percentages) for a simple ground truth</span></span>
<span id="cb40-57"><a href="#cb40-57" tabindex="-1"></a><span class="co">    example</span></span>
<span id="cb40-58"><a href="#cb40-58" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb40-59"><a href="#cb40-59" tabindex="-1"></a>    test_input <span class="op">=</span> pd.DataFrame({</span>
<span id="cb40-60"><a href="#cb40-60" tabindex="-1"></a>        <span class="st">'country'</span>: [<span class="st">'USA'</span>, <span class="st">'USA'</span>, <span class="st">'USA'</span>, <span class="st">"Russia"</span>, <span class="st">"Russia"</span>],</span>
<span id="cb40-61"><a href="#cb40-61" tabindex="-1"></a>    }, index<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb40-62"><a href="#cb40-62" tabindex="-1"></a></span>
<span id="cb40-63"><a href="#cb40-63" tabindex="-1"></a>    expected_result <span class="op">=</span> pd.DataFrame({</span>
<span id="cb40-64"><a href="#cb40-64" tabindex="-1"></a>        <span class="st">'country'</span>: [<span class="st">"Russia"</span>, <span class="st">"USA"</span>],</span>
<span id="cb40-65"><a href="#cb40-65" tabindex="-1"></a>        <span class="st">'count'</span>: [<span class="dv">2</span>, <span class="dv">3</span>],</span>
<span id="cb40-66"><a href="#cb40-66" tabindex="-1"></a>        <span class="st">'percentage'</span>: [<span class="fl">40.0</span>, <span class="fl">60.0</span>],</span>
<span id="cb40-67"><a href="#cb40-67" tabindex="-1"></a>    }, index<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>])</span>
<span id="cb40-68"><a href="#cb40-68" tabindex="-1"></a></span>
<span id="cb40-69"><a href="#cb40-69" tabindex="-1"></a>    actual_result <span class="op">=</span> summarise_categorical(test_input, <span class="st">"country"</span>)</span>
<span id="cb40-70"><a href="#cb40-70" tabindex="-1"></a></span>
<span id="cb40-71"><a href="#cb40-71" tabindex="-1"></a>    pdt.assert_frame_equal(actual_result, expected_result)</span>
<span id="cb40-72"><a href="#cb40-72" tabindex="-1"></a></span>
<span id="cb40-73"><a href="#cb40-73" tabindex="-1"></a></span>
<span id="cb40-74"><a href="#cb40-74" tabindex="-1"></a><span class="kw">def</span> test_summarise_categorical_missvals():</span>
<span id="cb40-75"><a href="#cb40-75" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb40-76"><a href="#cb40-76" tabindex="-1"></a><span class="co">    Test that summarise_categorical correctly tabulates</span></span>
<span id="cb40-77"><a href="#cb40-77" tabindex="-1"></a><span class="co">    distribution of values (counts, percentages) for a ground truth</span></span>
<span id="cb40-78"><a href="#cb40-78" tabindex="-1"></a><span class="co">    example (edge case where column contains missing values)</span></span>
<span id="cb40-79"><a href="#cb40-79" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb40-80"><a href="#cb40-80" tabindex="-1"></a>    test_input <span class="op">=</span> pd.DataFrame({</span>
<span id="cb40-81"><a href="#cb40-81" tabindex="-1"></a>        <span class="st">'country'</span>: [<span class="st">'USA'</span>, <span class="st">'USA'</span>, <span class="st">'USA'</span>, <span class="st">"Russia"</span>, pd.NA],</span>
<span id="cb40-82"><a href="#cb40-82" tabindex="-1"></a>    }, index<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb40-83"><a href="#cb40-83" tabindex="-1"></a></span>
<span id="cb40-84"><a href="#cb40-84" tabindex="-1"></a>    expected_result <span class="op">=</span> pd.DataFrame({</span>
<span id="cb40-85"><a href="#cb40-85" tabindex="-1"></a>        <span class="st">'country'</span>: [<span class="st">"Russia"</span>, <span class="st">"USA"</span>, np.nan],</span>
<span id="cb40-86"><a href="#cb40-86" tabindex="-1"></a>        <span class="st">'count'</span>: [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>],</span>
<span id="cb40-87"><a href="#cb40-87" tabindex="-1"></a>        <span class="st">'percentage'</span>: [<span class="fl">20.0</span>, <span class="fl">60.0</span>, <span class="fl">20.0</span>],</span>
<span id="cb40-88"><a href="#cb40-88" tabindex="-1"></a>    }, index<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>])</span>
<span id="cb40-89"><a href="#cb40-89" tabindex="-1"></a>    actual_result <span class="op">=</span> summarise_categorical(test_input, <span class="st">"country"</span>)</span>
<span id="cb40-90"><a href="#cb40-90" tabindex="-1"></a></span>
<span id="cb40-91"><a href="#cb40-91" tabindex="-1"></a>    pdt.assert_frame_equal(actual_result, expected_result)</span>
<span id="cb40-92"><a href="#cb40-92" tabindex="-1"></a>    </span>
<span id="cb40-93"><a href="#cb40-93" tabindex="-1"></a></span>
<span id="cb40-94"><a href="#cb40-94" tabindex="-1"></a></span>
<span id="cb40-95"><a href="#cb40-95" tabindex="-1"></a><span class="kw">def</span> test_summarise_categorical_invalid():</span>
<span id="cb40-96"><a href="#cb40-96" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb40-97"><a href="#cb40-97" tabindex="-1"></a><span class="co">    Test that summarise_categorical raises an</span></span>
<span id="cb40-98"><a href="#cb40-98" tabindex="-1"></a><span class="co">    error when a non-existent column is input</span></span>
<span id="cb40-99"><a href="#cb40-99" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb40-100"><a href="#cb40-100" tabindex="-1"></a>    test_input <span class="op">=</span> pd.DataFrame({</span>
<span id="cb40-101"><a href="#cb40-101" tabindex="-1"></a>        <span class="st">'country'</span>: [<span class="st">'USA'</span>, <span class="st">'USA'</span>, <span class="st">'USA'</span>, <span class="st">"Russia"</span>, <span class="st">"Russia"</span>],</span>
<span id="cb40-102"><a href="#cb40-102" tabindex="-1"></a>    }, index<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb40-103"><a href="#cb40-103" tabindex="-1"></a></span>
<span id="cb40-104"><a href="#cb40-104" tabindex="-1"></a>    <span class="cf">with</span> pytest.raises(<span class="pp">KeyError</span>):</span>
<span id="cb40-105"><a href="#cb40-105" tabindex="-1"></a>        summarise_categorical(test_input, <span class="st">"vehicle"</span>)</span></code></pre>
</div>
<p>Finally lets commit our test suite to our codebase and push the
changes to GitHub.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="fu">git</span> add eva_data_analysis.py </span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Add additional analysis functions"</span></span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a><span class="fu">git</span> add tests/</span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Add test suite"</span></span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a><span class="fu">git</span> push origin main</span></code></pre>
</div>
</section><section id="continuous-integration-optional"><h2 class="section-heading">Continuous Integration (Optional)<a class="anchor" aria-label="anchor" href="#continuous-integration-optional"></a>
</h2>
<hr class="half-width">
<div id="continuous-integration" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="continuous-integration" class="callout-inner">
<h3 class="callout-title">Continuous Integration<a class="anchor" aria-label="anchor" href="#continuous-integration"></a>
</h3>
<div class="callout-content">
<p>So far, we have run our tests locally using.</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pytest</span></code></pre>
</div>
<p>A limitation of this approach is that we must remember to run our
tests each time we make any changes.</p>
<p>Continuous integration services provide the infrastructure to
automatically run a<br>
code’s test suite every time changes are pushed to a remote
repository.</p>
<p>This means that each time we (or our colleagues) push to the remote,
the test suite will be run to verify that our tests still pass.</p>
<p>If we are using GitHub, we can use the continuous integration service
GitHub Actions to automatically run our tests.</p>
<p>To setup this up:</p>
<ul>
<li>Navigate to the spacewalks folder:</li>
</ul>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="bu">cd</span> ~/Desktop/Spacewalks</span></code></pre>
</div>
<ul>
<li>To setup continuous integration on GitHub actions, the dependencies
of our code must be recorded in a <code>requirements.txt</code> file in
the root of our repository.</li>
<li>You can find out more about creating requirements.txt files from
CodeRefinery’s tutorial on “Recording Dependencies”.</li>
<li>For now, add the following list of code dependencies to
requirements.txt in the root of the spacewalks repository:</li>
</ul>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="fu">touch</span> requirements.txt</span></code></pre>
</div>
<p>Content of <code>requirements.txt</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">numpy</span></span>
<span><span class="va">pandas</span></span>
<span><span class="va">matplotlib</span></span>
<span><span class="va">pytest</span></span>
<span><span class="va">pytest</span><span class="op">-</span><span class="va">cov</span></span></code></pre>
</div>
<ul>
<li>Commit the changes to your repository:</li>
</ul>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="fu">git</span> add requirements.txt</span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Add requirements.txt file"</span></span></code></pre>
</div>
<p>Now let’s define out continuous integration workflow:</p>
<ul>
<li>Create a hidden folder .github/workflows</li>
</ul>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> .github/workflows</span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a><span class="fu">touch</span> .github/workflows/main.yml</span></code></pre>
</div>
<ul>
<li>Define the continuous integration workflow to run on GitHub
actions.</li>
</ul>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> CI</span></span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a><span class="co"># We can specify which Github events will trigger a CI build</span></span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> push</span></span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a></span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a><span class="co"># now define a single job 'build' (but could define more)</span></span>
<span id="cb48-7"><a href="#cb48-7" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb48-8"><a href="#cb48-8" tabindex="-1"></a></span>
<span id="cb48-9"><a href="#cb48-9" tabindex="-1"></a><span class="at">  </span><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb48-10"><a href="#cb48-10" tabindex="-1"></a></span>
<span id="cb48-11"><a href="#cb48-11" tabindex="-1"></a><span class="co">    # we can also specify the OS to run tests on</span></span>
<span id="cb48-12"><a href="#cb48-12" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb48-13"><a href="#cb48-13" tabindex="-1"></a></span>
<span id="cb48-14"><a href="#cb48-14" tabindex="-1"></a><span class="co">    # a job is a sequence of steps</span></span>
<span id="cb48-15"><a href="#cb48-15" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb48-16"><a href="#cb48-16" tabindex="-1"></a></span>
<span id="cb48-17"><a href="#cb48-17" tabindex="-1"></a><span class="co">    # Next we need to checkout out repository, and set up Python</span></span>
<span id="cb48-18"><a href="#cb48-18" tabindex="-1"></a><span class="co">    # A 'name' is just an optional label shown in the log - helpful to clarify progress - and can be anything</span></span>
<span id="cb48-19"><a href="#cb48-19" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Checkout repository</span></span>
<span id="cb48-20"><a href="#cb48-20" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v4</span></span>
<span id="cb48-21"><a href="#cb48-21" tabindex="-1"></a></span>
<span id="cb48-22"><a href="#cb48-22" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Set up Python 3.12</span></span>
<span id="cb48-23"><a href="#cb48-23" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v4</span></span>
<span id="cb48-24"><a href="#cb48-24" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb48-25"><a href="#cb48-25" tabindex="-1"></a><span class="at">        </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="st">"3.12"</span></span>
<span id="cb48-26"><a href="#cb48-26" tabindex="-1"></a></span>
<span id="cb48-27"><a href="#cb48-27" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install Python dependencies</span></span>
<span id="cb48-28"><a href="#cb48-28" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb48-29"><a href="#cb48-29" tabindex="-1"></a>        python3 -m pip install --upgrade pip</span>
<span id="cb48-30"><a href="#cb48-30" tabindex="-1"></a>        python3 -m pip install -r requirements.txt</span>
<span id="cb48-31"><a href="#cb48-31" tabindex="-1"></a></span>
<span id="cb48-32"><a href="#cb48-32" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test with PyTest</span></span>
<span id="cb48-33"><a href="#cb48-33" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb48-34"><a href="#cb48-34" tabindex="-1"></a>        python3 -m pytest --cov</span></code></pre>
</div>
<p>This workflow definition file instructs GitHub Actions to run our
unit tests using python version 3.12 each time code is pushed to our
repository,</p>
<ul>
<li>Let’s push these changes to our repository and see if the tests are
run on GitHub.</li>
</ul>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="fu">git</span> add .github/workflows/main.yml</span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Add GitHub actions workflow"</span></span>
<span id="cb49-3"><a href="#cb49-3" tabindex="-1"></a><span class="fu">git</span> push origin main</span></code></pre>
</div>
<ul>
<li>To find out if the workflow has run, navigate to the following page
in your browser:</li>
</ul>
<pre><code>https://github.com/YOUR-REPOSITORY/actions</code></pre>
<ul>
<li>On the left of this page a sidebar titled “Actions” lists all the
workflows that are active in our repository. You should “CI” here (the
<code>name</code> of the workflow we just added to our repository
).</li>
<li>The body of the page lists the outcome of all historic workflow
runs. If the workflow was triggered successfully when we pushed to the
repository, you should see one workflow run listed here.</li>
</ul>
</div>
</div>
</div>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>During this episode, we have covered how to use software tests to
verify the correctness of our code. We have seen how to write a unit
test, how to manage and run our tests using the pytest framework and how
identify which parts of our code require additional testing using test
coverage reports.</p>
<p>These skills reduce the probability that there will be a “mistake in
our code” and support reproducible research by giving us the confidence
to engage in open research practices. Tests also document the intended
behaviour of our code for other developers and mean that we can
experiment with changes to our code knowing that our tests will let us
know if we break any existing functionality. In other words, software
testing suppors FAIR software by making our code more Accessible and
Reusable.</p>
<p>To find out more about this topic, please see the “Further reading”
section below.</p>
</div>
</section><section id="further-reading"><h2 class="section-heading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li>
<a href="https://swcarpentry.github.io/python-novice-inflammation/10-defensive.html" class="external-link">The
Defensive Programming episode</a> from the Software Carpentry Python
Programming lesson</li>
<li>
<a href="https://www.software.ac.uk/blog/using-python-double-check-your-work" class="external-link">Using
Python to double check your work</a> (Software Sustainability Blog Post)
by Peter Inglesby</li>
<li>
<a href="https://carpentries-incubator.github.io/python-testing/" class="external-link">The
Python Testing and Continuous Integration</a> lesson on The Carpentries
Incubator by François Michonneau</li>
<li>[Test Driven Development][<a href="https://researchcodingclub.github.io/2019-11-13-test-driven-development/" class="external-link">york-tdd-blog</a>
(University of York Research Coding Club Blog Post) by Peter Hill and
Stephen Biggs-Fox</li>
<li>
<a href="https://coderefinery.github.io/testing/" class="external-link">Automated testing
- Preventing yourself and others from breaking your functioning code</a>
Coderefinery lesson</li>
<li>
<a href="https://carpentries-incubator.github.io/python-intermediate-development/21-automatically-testing-software/index.html" class="external-link">The
Automatically Testing Software episode</a> from the Intermediate
Research Software Development lesson on The Carpentries Incubator by
Aleksandra Nenadic et al.</li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Code testing supports the FAIR principles by improving the
accessibility and re-usability of research code.</li>
<li>Unit testing is crucial as it ensures each functions works
correctly.</li>
<li>Using the <code>pytest</code> framework, you can write basic unit
tests for Python functions to verify their correctness.</li>
<li>Identifying and handling edge cases in unit tests is essential to
ensure your code performs correctly under a variety of conditions.</li>
<li>Test coverage can help you to identify parts of your code that
require additional testing.</li>
</ol>
</div>
</div>
</div>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</section></section><section id="aio-07-documenting-code"><p>Content from <a href="07-documenting-code.html">Documenting code</a></p>
<hr>
<p>Last updated on 2024-07-04 |
        
        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/07-documenting-code.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How should we document our code?</li>
<li>Why are documentation and repository metadata important and how they
support FAIR software?</li>
<li>What are the minimum elements of documentation needed to support
FAIR software?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Use a <code>README</code> file to provide an overview and a
<code>CITATION.cff</code> file to add citation instructions to a code
repository</li>
<li>Describe the main types of software documentation (tutorials, how to
guides, reference and explanation).</li>
<li>Apply a documentation framework to write effective documentation of
any type.</li>
<li>Describe the different formats available for delivering software
documentation (Markdown files, wikis, static webpages).</li>
<li>Implement MkDocs to generate and manage comprehensive project
documentation</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="motivation-for-documenting-code"><h2 class="section-heading">Motivation for Documenting Code<a class="anchor" aria-label="anchor" href="#motivation-for-documenting-code"></a>
</h2>
<hr class="half-width">
<p>The purpose of software documentation is to communicate important
information about our code to the people who need it – users and
developers.</p>
<div class="section level3">
<h3 id="better-research">Better Research<a class="anchor" aria-label="anchor" href="#better-research"></a>
</h3>
<p>Software documentation is often perceived as a thankless task with
few tangible benefits and is often neglected in research projects.
However, like software testing, documenting our code can help us become
more productive researchers. Here are some advantages of documenting our
code:</p>
<ul>
<li>Good documentation captures important methodological details ready
for when we come to publish our research</li>
<li>Good documentation can help us return to a project seamlessly after
time away.</li>
<li>Documentation can facilitate collaborations by helping to onboard
new project members</li>
<li>Good documentation can save us time by answering FAQs about our code
for us.</li>
</ul>
</div>
<div class="section level3">
<h3 id="fair-software">FAIR Software<a class="anchor" aria-label="anchor" href="#fair-software"></a>
</h3>
<p>Software documentation supports FAIR software by improving the
re-usability of our code.</p>
<ul>
<li><p>How-to guides and Tutorials ensure that users can install our
software independently and make use of its basic features</p></li>
<li><p>Reference guides and background information can help developers
understand our code sufficiently to modify / extend / repurpose
it.</p></li>
</ul>
</div>
</section><section id="software-level-documentation"><h2 class="section-heading">Software-level Documentation<a class="anchor" aria-label="anchor" href="#software-level-documentation"></a>
</h2>
<hr class="half-width">
<p>In previous episodes we encountered several different forms of
in-code documentation including in-line comments and docstrings.</p>
<p>These are an excellent way to improve the readability of our code,
but by themselves are insufficient to ensure that our code is easy to
use, understand and modify - this requires additional software-level
documentation.</p>
<div class="section level3">
<h3 id="types-of-documentation">Types of Documentation<a class="anchor" aria-label="anchor" href="#types-of-documentation"></a>
</h3>
<p>There are many different types of software-level documentation.</p>
<div class="section level4">
<h4 id="technical-documentation">Technical Documentation<a class="anchor" aria-label="anchor" href="#technical-documentation"></a>
</h4>
<p>Software-level technical documentation encompasses:</p>
<ul>
<li>Tutorials - lessons that guide learners through a series of
exercises to build proficiency as using the code<br>
</li>
<li>How-To Guides - step by step instructions on how to accomplish
specific goals using the code.</li>
<li>Reference - a lookup manual to help users find relevant information
about the software e.g. functions and their parameters.</li>
<li>Explanation - conceptual discussion of the code to help users
understand implementation decisions</li>
</ul>
</div>
<div class="section level4">
<h4 id="repository-metadata-files">Repository Metadata Files<a class="anchor" aria-label="anchor" href="#repository-metadata-files"></a>
</h4>
<p>In addition to software-level technical documentation, it is also
common to see repository metadata files included in a code repository.
Many of these files can be described as “social documentation” i.e. they
indicate how users should “behave” in relation to our software project.
Some common examples of repository metadata files and their role are
tabulated below:</p>
<table class="table">
<colgroup>
<col width="14%">
<col width="85%">
</colgroup>
<thead><tr class="header">
<th>File</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>CONTRIBUTING.md</td>
<td>Explains to developers how to contribute code to the project
including processes and standards that should be followed.</td>
</tr>
<tr class="even">
<td>CODE_OF_CONDUCT.md</td>
<td>Defines expected standards of conduct when engaging in a software
project.</td>
</tr>
<tr class="odd">
<td>LICENSE</td>
<td>Defines the (legal) terms of use of a piece of code.</td>
</tr>
<tr class="even">
<td>CITATION.cff</td>
<td>Provides instructions on how and when to cite the code</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section id="just-enough-documentation"><h2 class="section-heading">Just Enough Documentation<a class="anchor" aria-label="anchor" href="#just-enough-documentation"></a>
</h2>
<hr class="half-width">
<p>However, for many small projects the following three pieces of
documentation will be sufficient:</p>
<ul>
<li>README - A document that provides an overview of the project,
including installation, usage instructions, and dependencies. A README
may include one or more of the technical documentation types - tutorial
/ how-to / explanation / reference.</li>
<li>LICENSE - A file that outlines the legal terms for using, modifying,
and distributing the project.</li>
<li>CITATION.cff - A file that provides instructions on how to properly
cite the project in academic or professional work.</li>
</ul>
<p>Let’s look at each of these in turn.</p>
<div class="section level4">
<h4 id="readme">README<a class="anchor" aria-label="anchor" href="#readme"></a>
</h4>
<p>A README file acts as a “landing page” for your code repository on
GitHub and should provide sufficient information for users to and
developers to get started using your code.</p>
<div id="readmes-and-the-fair-principles" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="readmes-and-the-fair-principles" class="callout-inner">
<h3 class="callout-title">READMEs and The FAIR Principles<a class="anchor" aria-label="anchor" href="#readmes-and-the-fair-principles"></a>
</h3>
<div class="callout-content">
<p>Think about the question below. Your instructors may ask you to share
your answer in a shared notes document and/or discuss them with other
participants.</p>
<p>Here are some of the major sections you might find in a typical
README. Which are <strong>essential</strong> to support the FAIR
principles? Which are optional?</p>
<ul>
<li>Purpose of the code</li>
<li>Audience (who the code is intended for)</li>
<li>Installation Instructions</li>
<li>Contribution Guide</li>
<li>How to Get Help</li>
<li>License</li>
<li>Software Citation</li>
<li>Usage Example</li>
<li>Dependencies and their versions</li>
<li>FAQs</li>
<li>Code of Conduct</li>
</ul>
</div>
</div>
</div>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Discussion Spoilers </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<p>To support the FAIR principles (Findability, Accessibility,
Interoperability, and Reusability), certain sections in a README file
are more important than others. Below is a breakdown of the sections
that are ESSENTIAL / OPTIONAL in a README to align with these
principles.</p>
<div class="section level3">
<h3 id="essential">Essential<a class="anchor" aria-label="anchor" href="#essential"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Purpose of the code</strong>
<ul>
<li>
<strong>Explanation:</strong> Clearly explains what the code does.
This is essential for findability and reusability.</li>
</ul>
</li>
<li>
<strong>Installation Instructions</strong>
<ul>
<li>
<strong>Explanation:</strong> Provides step-by-step instructions on
how to install the software, ensuring accessibility.</li>
</ul>
</li>
<li>
<strong>Usage Example</strong>
<ul>
<li>
<strong>Explanation:</strong> Provides examples of how to use the
code, helping users understand its functionality and enhancing
reusability.</li>
</ul>
</li>
<li>
<strong>License</strong>
<ul>
<li>
<strong>Explanation:</strong> Specifies the terms under which the
code can be used, which is crucial for legal clarity and
reusability.</li>
</ul>
</li>
<li>
<strong>Dependencies and their versions</strong>
<ul>
<li>
<strong>Explanation:</strong> Lists the external libraries and tools
required to run the code, including their versions. This is essential
for reproducibility and interoperability.</li>
</ul>
</li>
<li>
<strong>Software Citation</strong>
<ul>
<li>
<strong>Explanation:</strong> Provides citation information for
academic use, ensuring proper attribution and reusability.</li>
</ul>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="optional">Optional<a class="anchor" aria-label="anchor" href="#optional"></a>
</h3>
<ol start="7" style="list-style-type: decimal">
<li>
<strong>Audience (who the code is intended for)</strong>
<ul>
<li>
<strong>Explanation:</strong> Helps users identify if the code is
relevant to them, improving findability and usability.</li>
</ul>
</li>
<li>
<strong>How to Get Help</strong>
<ul>
<li>
<strong>Explanation:</strong> Informs users where they can get help,
ensuring better accessibility.</li>
</ul>
</li>
<li>
<strong>Contribution Guide</strong>
<ul>
<li>
<strong>Explanation:</strong> Encourages and guides contributions
from the community, enhancing the code’s development and
reusability.</li>
</ul>
</li>
<li><strong>FAQs</strong></li>
</ol>
<ul>
<li>
<strong>Explanation:</strong> Provides answers to common questions,
aiding in troubleshooting and improving accessibility.</li>
</ul>
<ol start="11" style="list-style-type: decimal">
<li><strong>Code of Conduct</strong></li>
</ol>
<ul>
<li>
<strong>Explanation:</strong> Sets expectations for behaviour in the
community, fostering a welcoming environment and enhancing
accessibility.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Let’s create a simple README for our repository.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/Spacewalks</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> touch README.md</span></code></pre>
</div>
<p>Let’s start by adding a one-liner that explains the purpose of our
code and who it is for.</p>
<pre class="code"><code># Spacewalks

## Overview
Spacewalks is a python-based analysis tool for researchers to generate visualisations
and statistical summaries of NASA's extravehicular activity datasets.</code></pre>
<p>Now let’s add a list of Spacewalk’s key features:</p>
<pre class="code"><code>## Features
Key features of Spacewalks:
- Generates a CSV table of summary statistics of extravehicular activity crew sizes
- Generates a line plot to show the cumulative duration of space walks over time</code></pre>
<p>Now let’s tell users about any Pre-requisites required to run the
software:</p>
<pre class="code"><code>## Pre-requisites

Spacewalks was developed using Python version 3.12

To install and run Spacewalks you will need have Python &gt;=3.12 
installed. You will also need the following libraries (minimum versions in brackets)

- [NumPy](https://www.numpy.org/) &gt;=2.0.0 - Spacewalk's test suite uses NumPy's statistical functions
- [Matplotlib](https://matplotlib.org/stable/index.html) &gt;=3.0.0  - Spacewalks uses Matplotlib to make plots
- [pytest](https://docs.pytest.org/en/8.2.x/#) &gt;=8.2.0  - Spacewalks uses pytest for testing
- [pandas](https://pandas.pydata.org/) &gt;= 2.2.0 - Spacewalks uses pandas for data frame manipulation </code></pre>
<div id="spacewalks-readme" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="spacewalks-readme" class="callout-inner">
<h3 class="callout-title">Spacewalks README<a class="anchor" aria-label="anchor" href="#spacewalks-readme"></a>
</h3>
<div class="callout-content">
<p>Extend the README for Spacewalks by adding a. Installation
instructions b. A simple usage example</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Installation instructions:</p>
<p>NB: In the solution below the back ticks of each code block have been
escaped to avoid rendering issues.</p>
<pre class="text"><code># Installation instructions

+ Clone the Spacewalks repository to your local machine using Git.
If you don't have Git installed, you can download it from the official Git website.

\`\`\`bash
git clone https://github.com/your-repository-url/spacewalks.git
cd spacewalks
\`\`\`

+ Install the necessary dependencies:
\`\`\`bash
pip install pandas==2.2.2 matplotlib==3.8.4 numpy==2.0.0 pytest==7.4.2
\`\`\`

+ To ensure everything is working correctly, run the tests using pytest.

\`\`\`bash
python -m pytest
\`\`\`</code></pre>
<p>Usage instructions:</p>
<pre class="text"><code># Usage Example

To run an analysis using the eva_data_analysis.py script from the command line terminal,
launch the script using Python as follows:

\`\`\`python
# Usage Examples
python eva_data_analysis.py eva-data.json eva-data.csv
\`\`\`

The first argument is path to the Json data file.
The second argument is the path the CSV output file.</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="license">LICENSE<a class="anchor" aria-label="anchor" href="#license"></a>
</h4>
<p>A license file outlines the legal terms for using, modifying, and
distributing the project. We’ll talk about choosing a license in detail
in later episode.</p>
</div>
<div class="section level4">
<h4 id="citation-file">CITATION File<a class="anchor" aria-label="anchor" href="#citation-file"></a>
</h4>
<p>We can add a citation file to our repository to provide instructions
on how and when to cite our code.</p>
<p>Citation files use a special format called CFF - the Citation File
Format (CFF) and are a way to include metadata about software or
datasets in plain text files, making it easy for both humans and
machines to use this information.</p>
<p><strong>Why Use CFF?</strong></p>
<ul>
<li><p>For developers, using a CFF file can help to automate the process
of publishing new releases on Zenodo via GitHub.</p></li>
<li><p>For users, having a CFF file makes it easy to cite the software
or dataset. with formatted citation information available for copy-paste
and direct import into reference managers like Zotero from
GitHub.</p></li>
</ul>
<p><strong>Creating a CFF File</strong></p>
<p>There are a few common formats used for citation files including
markdown and plain text. We will use the Citation File Format (CFF) for
our project. A CFF file is written in YAML format. At a minimum a CFF
file must contain the title of the software/data, the type of asset
(software/data) and at least one author:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># This CITATION.cff file was generated with cffinit.</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co"># Visit https://bit.ly/cffinit to generate yours today!</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">cff-version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.2.0</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> My Software</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="fu">message</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  If you use this software, please cite it using the</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>  metadata from this file.</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> software</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Anne</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Researcher</span></span></code></pre>
</div>
<p>Additional, optional metadata includes an Abstract, repository URL
and more.</p>
<p><strong>Steps to Make Your Software Citable</strong></p>
<p>We can create (and update) a CFF file for our software using an
online Web App called <a href="https://bit.ly/cffinit" class="external-link"><code>cffinit</code></a>.</p>
<p>Let’s create a dummy citation file for a project called “Spacetravel”
with Author “Max Hypothesis”, follow these steps:</p>
<ol style="list-style-type: decimal">
<li>First, head to <code>cffinit</code> online at <a href="https://bit.ly/cffinit" class="external-link"><code>cffinit</code></a>.</li>
<li>Then, let’s work through the metadata input form to complete the
minimum information needed to generate a CFF. We’ll also add the
following abstract:</li>
</ol>
<p>“Spacetravel - a simple python script to calculate time spent in
Space by individual NASA astronauts”</p>
<ol start="3" style="list-style-type: decimal">
<li>At the end of the process, download the CFF file and inspect it. It
should look like this:</li>
</ol>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># This CITATION.cff file was generated with cffinit.</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co"># Visit https://bit.ly/cffinit to generate yours today!</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="fu">cff-version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.2.0</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Spacetravel</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="fu">message</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  If you use this software, please cite it using the</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  metadata from this file.</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> software</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Hypothesis</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="at">    </span><span class="fu">name-particle</span><span class="kw">:</span><span class="at"> Max</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="fu">abstract</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>    A simple python script to calculate time spent in Space by individual NASA astronauts</span></code></pre>
</div>
<p><strong>Updating and citing</strong></p>
<p>CFF files can also be updated using <code>cffinit</code>.</p>
<p>To cite our software (or dataset), once a CFF file has been pushed to
our remote repository, GitHub’s “Cite this repository” button can be
used to generate a citation in various formats (APA, BibTeX).</p>
<p><strong>Tools</strong> Command line tools are also available for
creating, validating, and converting CFF files. Further information is
available from the <a href="https://book.the-turing-way.org/communication/citable/citable-cff.html" class="external-link">Turing
Way’s guide to software citation</a>.</p>
<div id="spacewalks-software-citation" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="spacewalks-software-citation" class="callout-inner">
<h3 class="callout-title">
<code>Spacewalks</code> Software Citation<a class="anchor" aria-label="anchor" href="#spacewalks-software-citation"></a>
</h3>
<div class="callout-content">
<p>Write a software citation file for the Spacewalks code and add it to
the root folder of our project.</p>
<ul>
<li>Add the URL of the code repository as a “Related Resources”</li>
<li>Add a one-line description of the code under the “Abstract”
section</li>
<li>Add at least two key words under the “Keywords” section</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Use <a href="https://citation-file-format.github.io/cff-initializer-javascript/#/version-specific" class="external-link">cffinit</a>,
a web application to create your citation file using a series of online
forms.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># This CITATION.cff file was generated with cffinit.</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co"># Visit https://bit.ly/cffinit to generate yours today!</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="fu">cff-version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.2.0</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Spacewalks</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="fu">message</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>  If you use this software, please cite it using the</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>  metadata from this file.</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> software</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Jaffa</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="at">    </span><span class="fu">name-particle</span><span class="kw">:</span><span class="at"> Sara</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Aleksandra</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Nenadic</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> </span><span class="st">'Kamilla'</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Kopec-Harding</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> YOUR</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> NAME-HERE</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="fu">repository-code</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>  https://github.com/YOUR-REPOSITORY-URL/spacewalks.git</span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a><span class="fu">abstract</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a>  A python script to analyse NASA extravehicular activity</span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a>  data</span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a><span class="fu">keywords</span><span class="kw">:</span></span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> NASA</span></span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> Extravehicular Activity</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section id="documentation-tools"><h2 class="section-heading">Documentation Tools<a class="anchor" aria-label="anchor" href="#documentation-tools"></a>
</h2>
<hr class="half-width">
<p>Once our project reaches a certain size or level of complexity we may
want to add additional documentation such as a standalone tutorial or
“Background” explaining our methodological choices.</p>
<p>Once we move beyond using a README as our primary source of
documentation, we need to consider how we will distribute our
documentation to our users.</p>
<p>Options include:</p>
<ul>
<li>A <code>docs/</code> folder of Markdown files.</li>
<li>Adding a Wiki to our repository.</li>
<li>Creating a set of web pages for our documentation using a static
site generator for our documentation such as Sphinx or MkDocs</li>
</ul>
<p>Creating a static site is a popular solution as it has the key
benefit being able to automatically generate a reference manual from any
docstrings we have added to our code.</p>
<div class="section level3">
<h3 id="mkdocs">MkDocs<a class="anchor" aria-label="anchor" href="#mkdocs"></a>
</h3>
<p>Let’s setup MkDocs.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install mkdocs</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install <span class="st">"mkdocstrings[python]"</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip install mkdocs-material</span></code></pre>
</div>
<p>Let’s check that MkDocs has been setup correctly:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">python</span> <span class="at">-m</span> pip list</span></code></pre>
</div>
<p>Let’s creates a new mkdocs project in the current directory</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># In ~/Desktop/spacewalks</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="ex">mkdocs</span> new .    </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>INFO    -  Writing config file: ./mkdocs.yml
INFO    -  Writing initial docs: ./docs/index.md</code></pre>
</div>
<p>This command creates a new mkdocs project in the current directory
with a <code>docs</code> folder containing an <code>index.md</code> file
and a <code>mkdocs.yml</code> configuration file.</p>
<p>Now, let’s fill in the configuration file for our project.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">site_name</span><span class="kw">:</span><span class="at"> Spacewalks Documentation</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="fu">theme</span><span class="kw">:</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"material"</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="fu">font</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="fu">nav</span><span class="kw">:</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Spacewalks Documentation</span><span class="kw">:</span><span class="at"> index.md</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Tutorials</span><span class="kw">:</span><span class="at"> tutorials.md</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">How-To Guides</span><span class="kw">:</span><span class="at"> how-to-guides.md</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Reference</span><span class="kw">:</span><span class="at"> reference.md</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Background</span><span class="kw">:</span><span class="at"> explanation.md</span></span></code></pre>
</div>
<p>Note font-false is for GDPR compliance</p>
<p>Let’s add support for <code>mkdocstrings</code> - this will allow us
to automatically our docstrings into our documentation using a simple
tag.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">site_name</span><span class="kw">:</span><span class="at"> Spacewalks Documentation</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">use_directory_urls</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="fu">theme</span><span class="kw">:</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"material"</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="fu">nav</span><span class="kw">:</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Spacewalks Documentation</span><span class="kw">:</span><span class="at"> index.md</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Tutorials</span><span class="kw">:</span><span class="at"> tutorials.md</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">How-To Guides</span><span class="kw">:</span><span class="at"> how-to-guides.md</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Reference</span><span class="kw">:</span><span class="at"> reference.md</span></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Background</span><span class="kw">:</span><span class="at"> explanation.md</span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a><span class="fu">plugins</span><span class="kw">:</span></span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> mkdocstrings</span></span></code></pre>
</div>
<p>Let’s populate our <code>docs/</code> folder to match our
configuration file.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">touch</span> docs/tutorials.md</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="fu">touch</span> docs/how-to-guides.md</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="fu">touch</span> docs/reference.md</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="fu">touch</span> docs/explanation.md</span></code></pre>
</div>
<p>Let’s populate our reference file with some preamble to include
before the reference manual that will be generated from the docstrings
we created.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>This file documents the key functions in the Spacewalks tool.</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>It is provided as a reference manual.</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>::: eva_data_analysis</span></code></pre>
</div>
<p>Finally, let’s build our documentation.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">mkdocs</span> build</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>INFO    -  Cleaning site directory
INFO    -  Building documentation to directory: /Users/AnnResearcher/Desktop/Spacewalks/site
WARNING -  griffe: eva_data_analysis.py:105: No type or annotation for returned value 'int'
WARNING -  griffe: eva_data_analysis.py:84: No type or annotation for returned value 1
WARNING -  griffe: eva_data_analysis.py:33: No type or annotation for returned value 1
INFO    -  Documentation built in 0.31 seconds</code></pre>
</div>
<p>Once the build step is completed, our documentation site is saved to
a <code>site</code> folder in the root of our project folder.</p>
<p>These files will be distributed with our code. We can either direct
users to read these files locally on their own device using their
browser, or we can choose to host our documentation as a website that
our uses can navigate to.</p>
<p>Note that we used the setting <code>use_directory_urls: false</code>
in the <code>mkdocs.yml</code> file. This setting ensures that the
documentation site is generated with URLs that are easy to navigate
locally on a user’s device.</p>
<p>Finally let us commit our documentation to the main branch of our git
repository and push the changes to GitHub</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">git</span> add mkdocs.yml </span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="fu">git</span> add docs/</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="fu">git</span> add site/</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Add project-level documentation"</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="fu">git</span> push origin main</span></code></pre>
</div>
</div>
</section><section id="hosting-documentation-optional"><h2 class="section-heading">Hosting Documentation (Optional)<a class="anchor" aria-label="anchor" href="#hosting-documentation-optional"></a>
</h2>
<hr class="half-width">
<div id="hosting-documentation" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="hosting-documentation" class="callout-inner">
<h3 class="callout-title">Hosting Documentation<a class="anchor" aria-label="anchor" href="#hosting-documentation"></a>
</h3>
<div class="callout-content">
<p>In the previous section, we saw how mkdocs documentation can be
distributed with our repository and viewed “offline” using a
browser.</p>
<p>We can also make our documentation available as a live website by
deploying our documentation to a hosting service.</p>
<div class="section level3">
<h3 id="github-pages">GitHub Pages<a class="anchor" aria-label="anchor" href="#github-pages"></a>
</h3>
<p>As our repository is hosted in GitHub, we can use GitHub Pages - a
service that allows GitHub users to host websites directly from their
GitHub repositories.</p>
<p>There are two types of GitHub Pages: project pages and
user/organization Pages. While similar, they have different deployment
workflows, and we will only discuss project pages here. For information
about deploying to user/organisational pages, see [MkDocs Deployment
pages][mkdocs-deploy].</p>
<p>Project Pages deploy site files to a branch within the project
repository (default is gh-pages). To deploy our documentation:</p>
<blockquote>
<p><strong>Warning!</strong> Before we proceed to the next step, we MUST
ensure that there are no uncommitted changes or untracked files in our
repository.</p>
<p>If there are, the commands used in the upcoming steps will include
them in our documentation!</p>
</blockquote>
<ol style="list-style-type: decimal">
<li>(If not done already), let us commit our documentation to the main
branch of our git repository and push the changes to GitHub</li>
</ol>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">git</span> add mkdocs.yml </span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="fu">git</span> add docs/</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="fu">git</span> add site/</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Add project-level documentation"</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="fu">git</span> push origin main</span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Once we are on the main branch and all our changes are up to date,
run the following command to deploy our documentation to GitHub.</li>
</ol>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co"># Important: </span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="co"># - This command will push the documentation to the gh-pages branch of your repository</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="co"># - It will ALSO include uncommitted changes and untracked files (read the warning above!!) &lt;- VERY IMPORTANT!!</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="ex">mkdocs</span> gh-deploy</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>INFO    -  Cleaning site directory
INFO    -  Building documentation to directory: /Users/AnnResearch/Desktop/Spacewalks/site
WARNING -  griffe: eva_data_analysis.py:105: No type or annotation for returned value 'int'
WARNING -  griffe: eva_data_analysis.py:84: No type or annotation for returned value 1
WARNING -  griffe: eva_data_analysis.py:33: No type or annotation for returned value 1
INFO    -  Documentation built in 0.37 seconds
WARNING -  Version check skipped: No version specified in previous deployment.
INFO    -  Copying '/Users/AnnResearcher/Desktop/Spacewalks/site' to 'gh-pages' branch and pushing to
           GitHub.
Enumerating objects: 63, done.
Counting objects: 100% (63/63), done.
Delta compression using up to 11 threads
Compressing objects: 100% (60/60), done.
Writing objects: 100% (63/63), 578.91 KiB | 7.93 MiB/s, done.
Total 63 (delta 7), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (7/7), done.
remote: 
remote: Create a pull request for 'gh-pages' on GitHub by visiting:
remote:      https://github.com/kkh451/spacewalks/pull/new/gh-pages
remote: 
To https://github.com/kkh451/spacewalks-dev.git
 * [new branch]      gh-pages -&gt; gh-pages
INFO    -  Your documentation should shortly be available at: https://kkh451.github.io/spacewalks/</code></pre>
</div>
<p>This command will build our documentation with MkDocs, then commit
and push the files to the gh-pages branch using the GitHub ghp-import
tool which is installed as a dependency of MkDocs.</p>
<p>For more options, use:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">mkdocs</span> gh-deploy <span class="at">--help</span></span></code></pre>
</div>
<p>Notice that the deploy command did not allow us to preview the site
before it was pushed to GitHub; so, it is a good idea to check changes
locally with the build commands before deploying.</p>
</div>
<div class="section level3">
<h3 id="other-options">Other Options<a class="anchor" aria-label="anchor" href="#other-options"></a>
</h3>
<p>You can find out about other deployment options including free
documentation hosting service ReadTheDocs on the [MkDocs deployment
pages][mkdocs-deploy].</p>
</div>
</div>
</div>
</div>
</section><section id="documentation-guides"><h2 class="section-heading">Documentation Guides<a class="anchor" aria-label="anchor" href="#documentation-guides"></a>
</h2>
<hr class="half-width">
<p>Once we start to consider other forms of documentation beyond the
README, we can also increase the re-usability of our code by ensuring
that the content and style of our documentation matches its purpose.</p>
<p>Documentation guides such as <a href="https://www.writethedocs.org/" class="external-link">Write the Docs</a>, <a href="https://www.thegooddocsproject.dev/" class="external-link">The Good Docs Project</a> and
the <a href="https://diataxis.fr/" class="external-link">Diataxis framework</a> provide a
range of resources including documentation templates to help to help us
do this.</p>
<div id="a-spacewalks-how-to-guide" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="a-spacewalks-how-to-guide" class="callout-inner">
<h3 class="callout-title">A Spacewalks How-to Guide<a class="anchor" aria-label="anchor" href="#a-spacewalks-how-to-guide"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: lower-alpha">
<li><p>Review the Diataxis guidance page on writing a How-to guide.
Identify three features of an effective how-to guide.</p></li>
<li><p>Following the Diataxis guidelines, add a How-to Guide to the
<code>docs</code> folder that show users how to change the destination
filename for the output dataset generated by Spacewalks.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>An effective How-to guide should:</p>
<ul>
<li>be goal oriented and focus on action.</li>
<li>avoid teaching or explanation</li>
<li>use appropriate language e.g. conditional imperatives</li>
<li>have an informative title</li>
</ul>
<pre class="text"><code># How to change the file path of Spacewalk's output dataset

This guide shows you how to set the file path for Spacewalk's output
data set to a location of your choice.

By default, the cleaned data set generated by Spacewalk is saved to the current
working directory with file name `eva-data.csv`.

If you would like to modify the name or location of the output dataset, set the
second command line argument to your chosen file path.

\`\`\`python
python eva_data_analysis.py eva-data.json data/clean/eva-data-clean.csv
\`\`\`

The specified destination folder must exist before running spacewalks.
</code></pre>
</div>
</div>
</div>
</div>
<p>The Diataxis framework provides guidance for developing technical
documentation for different purposes. Tutorials differ in purpose and
scope to How-to Guides, and as a result, differ in content and
style.</p>
<p>We have adapted the How-to guide from the previous challenge into the
example tutorial below.</p>
<div class="section level3">
<h3 id="example-tutorial-changing-the-file-path-for-the-spacewalks-output-dataset">Example Tutorial: Changing the File Path for the Spacewalks Output
Dataset<a class="anchor" aria-label="anchor" href="#example-tutorial-changing-the-file-path-for-the-spacewalks-output-dataset"></a>
</h3>
<div class="section level4">
<h4 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h4>
<p>In this tutorial, we will learn how to change the file path for the
output dataset generated by Spacewalk. By the end of this tutorial, you
will be able to specify a custom file path for the cleaned dataset.</p>
</div>
<div class="section level4">
<h4 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h4>
<p>Before you start, ensure you have the following:</p>
<ul>
<li>Python installed on your system</li>
<li>The Spacewalk script (eva_data_analysis.py)</li>
<li>An input dataset (eva-data.json)</li>
</ul>
</div>
<div class="section level4">
<h4 id="prepare-the-destination-directory">Prepare the Destination Directory<a class="anchor" aria-label="anchor" href="#prepare-the-destination-directory"></a>
</h4>
<p>First, let us decide where we want to save the cleaned dataset. and
make sure the directory exists.</p>
<p>For this tutorial, we will use data/clean as the destination
folder.</p>
<p>Let’s create the directory if it doesn’t exist:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> data/clean</span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="run-the-spacewalk-script-with-custom-path">Run the Spacewalk Script with Custom Path<a class="anchor" aria-label="anchor" href="#run-the-spacewalk-script-with-custom-path"></a>
</h4>
<p>Next, execute the Spacewalk script and specify the custom file path
for the output dataset:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">python</span> eva_data_analysis.py <span class="op">&lt;</span>input-file<span class="op">&gt;</span> <span class="op">&lt;</span>output-file<span class="op">&gt;</span></span></code></pre>
</div>
<p>Replace <input-file> with your input dataset (eva-data.json) and
<output-file> with your desired output path
(data/clean/eva-data-clean.csv).</output-file></input-file></p>
<p>Here is the complete command:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">python</span> eva_data_analysis.py eva-data.json data/clean/eva-data-clean.csv</span></code></pre>
</div>
<p>Notice how the output to the command line clearly indicates that we
are using a custom output file path.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Using custom input and output filenames
Reading JSON file eva-data.json
Saving to CSV file data/clean/eva-data-clean.csv
Adding crew size variable (crew_size) to dataset
Saving to CSV file data/clean/eva-data-clean.csv
Plotting cumulative spacewalk duration and saving to ./cumulative_eva_graph.png</code></pre>
</div>
<p>After running the script, let us check the data/clean directory to
ensure the cleaned dataset has been saved correctly.</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="fu">ls</span> data/clean</span></code></pre>
</div>
<p>You should see eva-data-clean.csv listed in the data/clean folder</p>
</div>
<div class="section level4">
<h4 id="exercise-custom-output-path">Exercise: Custom Output Path<a class="anchor" aria-label="anchor" href="#exercise-custom-output-path"></a>
</h4>
<ul>
<li>Create a new directory named output/data in your working
directory.</li>
<li>Run the Spacewalk script to save the cleaned dataset in the newly
created output/data directory with the filename
cleaned-eva-data.csv.</li>
<li>Verify that the dataset has been saved correctly.</li>
</ul>
<div class="section level5">
<h5 id="solution">Solution<a class="anchor" aria-label="anchor" href="#solution"></a>
</h5>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="co"># Create the directory:</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> output/data</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="co"># Run the script:</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="ex">python</span> eva_data_analysis.py eva-data.json output/data/cleaned-eva-data.csv</span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a><span class="co"># Verify the output:</span></span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a><span class="fu">ls</span> output/data</span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" tabindex="-1"></a><span class="co"># You should see cleaned-eva-data.csv listed</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>Congratulations! You have successfully changed the file path for
Spacewalks output dataset and completed an exercise to practice the
process. You can now customize the output location and filename
according to your needs.</p>
<div id="a-spacewalks-tutorial" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="a-spacewalks-tutorial" class="callout-inner">
<h3 class="callout-title">A Spacewalks Tutorial<a class="anchor" aria-label="anchor" href="#a-spacewalks-tutorial"></a>
</h3>
<div class="callout-content">
<p>How does the content and language of our example tutorial differ from
our example how-to guide?</p>
</div>
</div>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Content </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler2" aria-labelledby="headingSpoiler2">
<div class="accordion-body">
<ul>
<li>The tutorial clearly signposts what will be covered</li>
<li>Includes a narrative of each step and the expected output</li>
<li>Highlights important behaviour the learner should notice</li>
<li>Includes an exercise to practice skills</li>
</ul>
<div class="section level3">
<h3 id="language">Language<a class="anchor" aria-label="anchor" href="#language"></a>
</h3>
<ul>
<li>Uses “we” language</li>
<li>Uses imperative to provide clear instructions “First do x, then do
y”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="summary-1">Summary<a class="anchor" aria-label="anchor" href="#summary-1"></a>
</h3>
<p>During this episode, we have covered the basics of documenting our
code including how to write an effective README and how to add citation
instructions to our repository. We saw that documentation frameworks
like Diataxis can help us to write high-quality documentation for
different purposes, while static site generators like MkDocs can help us
to distribute our documentation to our users.</p>
<p>To find out more about this topic, please see the “Further reading”
section below.</p>
</div>
</section><section id="further-reading"><h2 class="section-heading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li>
<a href="https://github.com/hackergrrl/art-of-readme#bonus-the-readme-checklist" class="external-link">“The
Art of Readme”</a> article by Kira Oakley - a useful discussion of best
practices for writing a high-quality README</li>
<li>
<a href="https://www.software.ac.uk/blog/what-are-best-practices-research-software-documentation" class="external-link">What
are best practices for research software documentation?</a> (Software
Sustainability blog post) by Stephan Druskat et al.</li>
<li>
<a href="https://carpentries-incubator.github.io/python-intermediate-development/42-software-reuse/index.html" class="external-link">Preparing
Software for Reuse and Release episode</a> from the Intermediate
Research Software Development lesson on The Carpentries Incubator by
Aleksandra Nenadic et al.</li>
<li><a href="https://coderefinery.github.io/documentation/" class="external-link">CodeRefinery
lesson: How to document your research software</a></li>
<li><a href="https://citation-file-format.github.io/" class="external-link">CITATION.cff file
format</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Documentation allows users to run and understand software without
having to work things out for themselves directly from the source
code.</li>
<li>Software documentation supports the FAIR principles by improving the
reusability of research code.</li>
<li>A (good) README, CITATION file and LICENSE file are the minimum
documentation elements required to support FAIR research code.</li>
<li>Documentation can be provided to users in a variety of formats
including a <code>docs</code> folder of Markdown files, a repository
Wiki and static webpages.</li>
<li>A static documentation site can be created using the tool
<code>mkdocs</code>.</li>
<li>Documentation frameworks such as Diataxis provide content and style
guidelines that can helps us write high quality documentation.</li>
</ul>
</div>
</div>
</div>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</section></section><section id="aio-08-open-collaboration"><p>Content from <a href="08-open-collaboration.html">Open project collaboration &amp; management</a></p>
<hr>
<p>Last updated on 2024-07-05 |
        
        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/08-open-collaboration.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What licensing information should I include with my code and
data?</li>
<li>How do I share my code on Github?</li>
<li>How do I ensure my code is citable?</li>
<li>How do I track bugs in Github repositories and ensure that multiple
developers can work on the same files simultaneously?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Explain why adding licensing information to a repository is
important.</li>
<li>Understand that some licenses are intended for code and others for
data.</li>
<li>Understand your rights and obligations under the GPL, MIT, BSD,
Apache 2 and Creative Commons licenses.</li>
<li>Recall that open source software can be sold and used in commercial
products but that license declaration will need to be included and any
other terms of the license adhered to.</li>
<li>Apply an appropriate open source license to a code repository that
is shared on Github.</li>
<li>Understand how to archive code to Zenodo and write a citation file
that can be included with code shared on Github.</li>
<li>Understand how to track issues with Github.</li>
<li>Understand how to use Git branches for working on code in parallel
and how to merge code back using pull requests.</li>
<li>Apply issue tracking, branching and pull requests together to fix
bugs while allowing other developers to work on the same code.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="licensing">Licensing<a class="anchor" aria-label="anchor" href="#licensing"></a>
</h1>
<div class="section level2">
<h2 id="what-is-licensing-and-why-is-it-important">What is licensing and why is it important?<a class="anchor" aria-label="anchor" href="#what-is-licensing-and-why-is-it-important"></a>
</h2>
<div class="section level3">
<h3 id="copyright-licenses">Copyright Licenses<a class="anchor" aria-label="anchor" href="#copyright-licenses"></a>
</h3>
<p>The authors of any creative work such as written text, photographs,
films, music and computer code are protected by Copyright law. This
allows them to set the terms under which their work can be copied or
reproduced. This often takes the form of the creator of the work selling
copies of it and receiving a fee from each person who obtains a copy.
Those receiving the copies are typically forbidden from making
additional copies without the permission of the creator. For example if
an author writes a book they will receive some money for each copy of
that book that’s sold and anybody who makes and sells a copy of that
book would need their permission to do so.</p>
<p>Copyright licenses don’t necessarily require any money to be charged
for copies and the creator might choose to let anybody copy their work,
providing they don’t change it and keep their name on it.</p>
<p>Copyright is automatically implied, any creative work which doesn’t
specify a license should be assumed to be copyrighted. If it were ever
to come to a court case then the author might have a problem proving
this and enforcing their copyright. Technically the work is copyrighted
the moment it is created, even without any kind of copyright statement,
registration or license agreement.</p>
</div>
<div class="section level3">
<h3 id="copyright-and-open-source">Copyright and Open Source<a class="anchor" aria-label="anchor" href="#copyright-and-open-source"></a>
</h3>
<p>An Open Source license is a form of copyright license that gives
anybody who receives a copy of a work the right to make additional
copies and distribute them to anybody else. It also allows anybody who
receives a copy to make changes to the original work and to redistribute
those. When applied to software this usually requires that anybody
supplying the executable binary of a program must also supply the source
code if requested.</p>
</div>
<div class="section level3">
<h3 id="copyright-statements">Copyright Statements<a class="anchor" aria-label="anchor" href="#copyright-statements"></a>
</h3>
<p>A common way to declare your copyright of a program and the license
you are distributing it under is to include a file called LICENSE in
your code repository, to display it in comments in a code file or to
display it on screen when the program is run. At the very least each
source file should state what license the code is under and tell the
reader to refer to the LICENSE file. This means that if the code ever
gets (accidentally) redistributed without the license file then the
reader will still know about the license that was used.</p>
</div>
<div class="section level3">
<h3 id="free-software">Free Software<a class="anchor" aria-label="anchor" href="#free-software"></a>
</h3>
<p>In the early history of computing there were often informal
agreements where programmers would share source code with each other,
but this was rarely backed up with any formal copyright license. As the
field grew this was first formalised in the 1980s by Richard Stallman
who formed the Free Software Foundation and defined “Free Software” as
software which which respects users freedoms by granting them four
freedoms:</p>
<ol style="list-style-type: decimal">
<li>The freedom to run the program as you wish, for any purpose.</li>
<li>The freedom to study how the program works, and change it so it does
your computing as you wish. Access to the source code is a precondition
for this.</li>
<li>The freedom to redistribute copies so you can help your
neighbor.</li>
<li>The freedom to distribute copies of your modified versions to
others. By doing this you can give the whole community a chance to
benefit from your changes. Access to the source code is a precondition
for this.</li>
</ol>
<p>The term “Free” in English often causes some confusion here as it can
mean both “free as in freedom” and “free as in beer” (no charge). The
term “Libre” software is sometimes used instead of “Free” to help
clarify this.</p>
</div>
<div class="section level3">
<h3 id="open-source-definition">Open Source Definition<a class="anchor" aria-label="anchor" href="#open-source-definition"></a>
</h3>
<p>In the 1990s the “Open Source” movement wanted to make a more
business friendly term and thought using the term “Free” might lead to
confusion when people wanted to charge for software. Despite “Free
Software” often being given away for no charge (or just a small
charge/suggested donation to cover media or distribution costs), nothing
in the four freedoms and the software licenses that were designed around
it prohibits charging for software.</p>
<p>In 1998 the Open Source Definition was created and says that software
which is open source must be distributed under the a license which
allows the following:</p>
<ol style="list-style-type: decimal">
<li>Free Redistribution must be allowed</li>
<li>Source Code must be included</li>
<li>Derived Works must be allowed</li>
<li>Integrity of The Author’s Source Code - There can only be
restrictions on the distribution of modifications if patches can be
distributed instead. Must explicitly permit distribution of software
built from modified source code. The license may require derived works
to carry a different name or version number from the original
software.</li>
<li>No Discrimination Against Persons or Groups</li>
<li>No Discrimination Against Fields of Endeavor</li>
<li>Distribution of License - License applies to anyone the software is
distributed to</li>
<li>License Must Not Be Specific to a Product - the program can be
extracted from other software it is distributed with</li>
<li>License Must Not Restrict Other Software, e.g. can’t insist it is
only distributed alongside other open source software.</li>
<li>License Must Be Technology-Neutral</li>
</ol>
</div>
<div class="section level3">
<h3 id="free-and-open-source-software">Free and Open Source Software<a class="anchor" aria-label="anchor" href="#free-and-open-source-software"></a>
</h3>
<p>Because of these two terms many people use the term “Free and Open
Source Software” (FOSS), while other’s simple say “Open Source Software”
and some will say “Free Software”. In reality these all have very
similar meanings that will respect the four freedoms and the open source
definition. For the rest of this chapter we will refer to “Open Source”,
but could have equally said “Free and Open Source Software” or “Free
Software”.</p>
</div>
</div>
<div class="section level2">
<h2 id="types-of-licenses">Types of licenses<a class="anchor" aria-label="anchor" href="#types-of-licenses"></a>
</h2>
<p>A number licenses have been written that conform to the Four Freedoms
and/or the Open Source definition. Each of these set out the rights of
anybody receiving software that is distributed under that license. We
will look at a few of the most popular ones.</p>
<div class="section level3">
<h3 id="public-domain">Public Domain<a class="anchor" aria-label="anchor" href="#public-domain"></a>
</h3>
<p>Before we look at any licenses in detail, one other thing to consider
is Public Domain. This is a concept in some countries (but not all)
where a work is not protected by copyright. These works have no license
from their creators and typically anybody can do anything they like with
them. Copyrights are usually time limited to between 50 and 100 years
and in many jurisdictions when Copyrights expire the works enter the
public domain. It is for this reason that the works of Charles Dickens
are no longer subject to Copyright and anybody can make a copy of them.
In some jurisdictions works can be placed straight into the public
domain simply with a declaration within the work. In the USA works
produced by the federal government are automatically public domain. But
in other countries works need to be registered as public domain. For
this reason it isn’t recommended to simply make work public domain if
you want to release it for use across the world.</p>
<p>If you really want to release code under something very similar to
public domain then the <a href="https://unlicense.org/" class="external-link">unlicense</a>
could be for you. It states that anybody is free to use the software in
any way they like. In jurisdictions with public domain, it “dedicates”
the software into the public domain.</p>
</div>
<div class="section level3">
<h3 id="permissive-licenses">Permissive Licenses<a class="anchor" aria-label="anchor" href="#permissive-licenses"></a>
</h3>
<p>Some of the simplest open source licenses are known as the
“permissive licenses”. Broadly speaking these require anybody
redistributing the code to include the license text and a copyright
statement crediting the authors. But they do not require any
modifications to release their source code alongside the executable
program. This allows software released under these licenses to be made
into part of a closed source program and all the creator of the closed
source program needs to do is distribute the license text and perhaps
some crediting statement to the original author, but they don’t need to
redistribute the source code with their closed source program.</p>
<div class="section level4">
<h4 id="mit-license">MIT License<a class="anchor" aria-label="anchor" href="#mit-license"></a>
</h4>
<p>The MIT License is very simple and a very popular choice of license,
it is only three paragraphs long. It states that:</p>
<ul>
<li>Anybody receiving the software can copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the software to anybody
they like.</li>
<li>That they must include the license text and copyright statement when
they redistribute it.</li>
<li>That there’s no warranty included and you can’t hold the authors
liable for any problems or damages that might arise.</li>
</ul>
</div>
<div class="section level4">
<h4 id="bsd">BSD<a class="anchor" aria-label="anchor" href="#bsd"></a>
</h4>
<p>The BSD license is very similar to the MIT license, but it has
several variants. The oldest is the 4 clause version which requires:</p>
<ul>
<li>Source code redistributions must include the copyright statement and
license text.</li>
<li>Binary redistributions must include the copyright notice and license
text in their documentation.</li>
<li>Any advertising for the software incorporating this software must
include a statement saying that it includes software written by the
author.</li>
<li>That the author doesn’t endorse any derived products.</li>
<li>That the author doesn’t provide a warranty. (this is written in a
separate section and isn’t one of the 4 clauses)</li>
</ul>
<p>The acknowledgement/advertising clause caused some controversy and
some people thought that it didn’t meet the open source definition or
comply with the four freedoms. It also became impractical and lead to
very long statements where there were multiple authors of large pieces
of software.</p>
<p>To address this a new version of the license known as the 3 clause
BSD license was created. This removed the acknowledgement clause. An
even simpler 2 clause version removes the endorsement clause.</p>
</div>
<div class="section level4">
<h4 id="apache-2-0">Apache 2.0<a class="anchor" aria-label="anchor" href="#apache-2-0"></a>
</h4>
<p>Another popular permissive license is the Apache 2.0 license. It is
very similar to the MIT and BSD licenses, but also includes some clauses
about patent licensing. These require any contributor to a program which
is licensed under Apache 2.0 to allow their patents to be used free of
charge by any user of the software. This was done to head off some
concerns about software patent legislation at the time the license was
developed.</p>
</div>
</div>
<div class="section level3">
<h3 id="copyleft-licenses">Copyleft Licenses<a class="anchor" aria-label="anchor" href="#copyleft-licenses"></a>
</h3>
<p>The other common form of open source licenses are the “Copyleft”
licenses. These require that any modifications to the program are also
released under a compatible copyleft license. This can cause
complications when combining code that’s under copyleft with other
licenses as now the entire codebase must be released under the copyleft
license. If there are any incompatible terms in the other license then
this can prevent the two codebases from being combined.</p>
<p>The main advantage of copyleft licenses is that anybody else who
incorporates the code into another product must also keep that product
open and this makes it harder for it to be subsumed into a commercial
product that doesn’t contribute improvements to the code back to the
community which created it.</p>
<div class="section level4">
<h4 id="gpl-version-2">GPL version 2<a class="anchor" aria-label="anchor" href="#gpl-version-2"></a>
</h4>
<p>The mostly commonly known copyleft license is the GNU Public License
or GPL. There are several versions of the GPL available, the oldest GPL
version 1.0, but this version was quickly replaced with version 2.0 and
was rarely used. Version 2 is much more common and is used by a lot of
popular software including the Linux Kernel. Compared with the
permissive license the GPL is quite a long license agreement and many of
its clauses can be quite difficult for non-lawyers to fully
understand.</p>
</div>
<div class="section level4">
<h4 id="gpl-version-3">GPL version 3<a class="anchor" aria-label="anchor" href="#gpl-version-3"></a>
</h4>
<p>The GPL version 3 was introduced to try and prevent patenting of
software under the license and to require that people distributing GPL
code on embedded systems must also give users the ability to rebuild
that software and use it in their device. It is an even longer document
than GPL version 2 and has proved controversial with some and despite
coming out in 2007 hasn’t been adopted by many projects which used GPL
version 2.</p>
</div>
<div class="section level4">
<h4 id="lgpl">LGPL<a class="anchor" aria-label="anchor" href="#lgpl"></a>
</h4>
<p>In order to allow library software to be combined with (“linked” in
technical terms) other software that is not GPLed, a special version of
the GPL called the LGPL (L for “Lesser” or “Library”) was created. This
is used by many popular libraries including the GNU C library that is
linked to every C program compiled on a Linux system.</p>
</div>
<div class="section level4">
<h4 id="agpl">AGPL<a class="anchor" aria-label="anchor" href="#agpl"></a>
</h4>
<p>One problem for the GPL is that a lot of modern software doesn’t run
on user’s own computers, but on remote web servers that they connect to
through their web browser. When a user run’s one of these web
applications they aren’t receiving a copy of the software’s executable
binaries, but are interacting with them over a computer network such as
the internet. This doesn’t meet the GPL’s definition of distributing the
binaries, so even if the web application is under the GPL, the person
running the server has no obligation to supply users with the source
code. The Affero GPL or AGPL requires that people running web
applications licensed under the AGPL make the source code available to
the users of those web applications.</p>
</div>
</div>
<div class="section level3">
<h3 id="choosing-a-license">Choosing a License<a class="anchor" aria-label="anchor" href="#choosing-a-license"></a>
</h3>
<p>When choosing a license for your code there’s a number of things you
might want to consider:</p>
<ul>
<li>Do you want to ensure that anybody modifying and redistributing your
code will release the source code of their changes?</li>
<li>Or would you prefer to ensure the least number of restrictions and
that your code will be used as widely as possible? Even if that means it
might end up in commercial products that don’t release their source
code.</li>
<li>Are you reusing code which is already under an open source license?
What obligations do you have under those licenses?</li>
<li>Is there a preferred license in your research community?</li>
</ul>
<p>Don’t be tempted to write you’re own license (or modify an existing
one) unless you are a copyright lawyer. The common open source licenses
have been carefully written by copyright lawyers, many of them have
undergone multiple iterations in response to cases that have arisen and
the implications of many different legal jurisidcitons has been
considered. The common licenses are also well known, meaning that
potential users and contributors have a better understanding of what
their rights and responsibilities are leaving less room for
misunderstanding.</p>
<div class="section level4">
<h4 id="tools-to-help-you-choose">Tools to help you choose<a class="anchor" aria-label="anchor" href="#tools-to-help-you-choose"></a>
</h4>
<p>The website <a href="https://choosealicense.com" class="external-link">choosealicense.com</a> has some great
resources to help you choose a license that’s appropriate for your
needs.</p>
<div id="license-selection-exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="license-selection-exercise" class="callout-inner">
<h3 class="callout-title">License selection exercise<a class="anchor" aria-label="anchor" href="#license-selection-exercise"></a>
</h3>
<div class="callout-content">
<p>Q: You have created a library of functions that are commonly used by
researchers in your field. You would like to share this code with your
research community and ensure that the code remains as open as possible
to benefit the community. But you would also like to see it being
integrated into as many different research codes and even commercial
products as possible. What would be a good choice of license? (hint: You
can use the <a href="https://choosealicense.com" class="external-link">choosealicense.com</a>
website to help you)</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>A: The LGPL license could be a good choice for library code. It can
be linked to software that isn’t GPL licensed but any modifications to
the library itself must be released under a GPL compatible license.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="creative-commons-licenses">Creative Commons Licenses<a class="anchor" aria-label="anchor" href="#creative-commons-licenses"></a>
</h3>
<p>All of the licenses we’ve discussed so far are really only intended
for source code. They are not suitable for documentation, datasets,
drawings, logos, music, maps etc. To solve this problem there are the
Creative Commons licenses, which are expressly built for anything other
than source code. Creative commons has now gone through four versions
with the latest being version 4.0, generally you should use version 4.0
as this is more suited for use around the world</p>
<p>There are several different types of Creative Commons licenses:</p>
<div class="section level4">
<h4 id="cc0">CC0<a class="anchor" aria-label="anchor" href="#cc0"></a>
</h4>
<p>Creative Commons Zero or CC0 is the simplest license and is
effectively a public domain license, but is suitable for use world
wide.</p>
</div>
<div class="section level4">
<h4 id="attribution-by">Attribution (BY)<a class="anchor" aria-label="anchor" href="#attribution-by"></a>
</h4>
<p>All the Creative Commons licenses apart from CC0 require you to give
credit to the original creator. This is very similar to what is required
by all of the permissive code licenses.</p>
</div>
<div class="section level4">
<h4 id="share-a-like-sa">Share-a-like (SA)<a class="anchor" aria-label="anchor" href="#share-a-like-sa"></a>
</h4>
<p>Share-a-Like Creative Commons licenses requires any derivative works
to be released under a compatible creative commons license. This is very
similar to the way that Copyleft licenses work.</p>
</div>
<div class="section level4">
<h4 id="non-commercial-nc">Non-Commercial (NC)<a class="anchor" aria-label="anchor" href="#non-commercial-nc"></a>
</h4>
<p>Non-commercial creative commons licenses only allow for
non-commercial use of the work.</p>
</div>
<div class="section level4">
<h4 id="no-derivatives-nd">No Derivatives (ND)<a class="anchor" aria-label="anchor" href="#no-derivatives-nd"></a>
</h4>
<p>No derivatives creative commons licenses require that users of the
work can’t redistribute modified versions of it.</p>
</div>
<div class="section level4">
<h4 id="combinations-of-creative-commons-licenses">Combinations of Creative Commons Licenses<a class="anchor" aria-label="anchor" href="#combinations-of-creative-commons-licenses"></a>
</h4>
<p>Under these rules the following combinations are possible:</p>
<ul>
<li>CC-BY - Creative Commons Attribution</li>
<li>CC-BY-SA - Creative Commons Attribution Share Alike</li>
<li>CC-BY-NC - Creative Commons Non Commercial</li>
<li>CC-BY-NC-SA - Creative Commons Non Commercial Share Alike</li>
<li>CC BY-ND - Creative Commons No Derivatives</li>
<li>CC BY-ND-NC - Creative Commons No Derivatives Non Commercial</li>
</ul>
<div id="license-selection-exercise-2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="license-selection-exercise-2" class="callout-inner">
<h3 class="callout-title">License selection exercise 2<a class="anchor" aria-label="anchor" href="#license-selection-exercise-2"></a>
</h3>
<div class="callout-content">
<p>Choose a license for your code and data from the pervious exercises.
Discuss with your neighbour or the group your choice of license and
reason for choosing it.</p>
</div>
</div>
</div>
<div id="adding-a-license-to-your-code" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="adding-a-license-to-your-code" class="callout-inner">
<h3 class="callout-title">Adding a license to your code<a class="anchor" aria-label="anchor" href="#adding-a-license-to-your-code"></a>
</h3>
<div class="callout-content">
<p>Add a LICENSE file containing the full text of the license you’ve
chosen to the Git repository of your code from previous chapters of this
lesson. Add a copyright statement, the name of the license you are using
and a mention of the LICENSE file to at least one source file<br>
Push your changes to your Github repository. Check the “About” section
of your repository’s Github webpage and see if there is now a license
listed.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="relicensing">Relicensing<a class="anchor" aria-label="anchor" href="#relicensing"></a>
</h2>
<div class="section level3">
<h3 id="license-compatibility">License Compatibility<a class="anchor" aria-label="anchor" href="#license-compatibility"></a>
</h3>
<p>Generally, you can relicense someone else’s code under more
permissive licenses to less permissive ones without their permission.
For example, you could relicense code from the MIT license to the GPL.
This is because nothing in the GPL contradicts anything in the MIT
license, but you’ll still have to display the MIT license for the
original code and the GPL for your modifications.</p>
<p>This doesn’t work the other way though, you can’t take code released
under GPL and relicense it as MIT since MIT is a more liberal license
that doesn’t match the terms of the GPL.</p>
<p>Creative commons zero or public domain code can usually be relicensed
to any open source license (or a commercial license for that
matter).</p>
<p>Sometimes there are contradictory statements in licenses which
prevent relicensing. For example Apache 2 has some provisions about
software patents, you won’t be able to relicense Apache 2 code under MIT
since it doesn’t have an equivalent patent clause.</p>
<p>The GNU project has a [useful guide][gnu-license-guide] to license
compatibility on their website.</p>
</div>
<div class="section level3">
<h3 id="getting-agreement-to-relicense">Getting agreement to relicense<a class="anchor" aria-label="anchor" href="#getting-agreement-to-relicense"></a>
</h3>
<p>Sometimes the developers of a program will wish to change the license
it is distributed under. In order to do this they’ll need the agreement
of all the copyright holders of the program and typically this will mean
everyone who contributed code to it. This is fine if you only have a
handful of contributors to your project, but gets harder when the
project starts to grow bigger.</p>
<p>Some projects work around this by having contributors agree to a
“contributor license agreement”. This will set out the terms under which
the code is contributed to the project. It might include a copyright
assignment or just granting certain rights to the project. This usually
allows the company (or non-profit foundation as many open source
projects are based on non-profit foundations) running the project to
relicense the code in future and to take legal action against people who
violate the license.</p>
</div>
<div class="section level3">
<h3 id="going-commercial">Going commercial<a class="anchor" aria-label="anchor" href="#going-commercial"></a>
</h3>
<p>It is possible to sell software that is licensed under an open source
license commercially, you will need to supply the source code along with
the binaries. However, under any license meeting the Open Source
Definition or the Four Freedoms the person receiving the software can
make copies and give (or sell) them to anybody else.</p>
<p>It is also possible to release software under two licenses, one open
source and one commercial. This has been done by a few open source
projects who wish to sell the software to some customers (sometimes with
extra custom modifications) and give it to others.</p>
<div id="relicensing-exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="relicensing-exercise" class="callout-inner">
<h3 class="callout-title">Relicensing exercise<a class="anchor" aria-label="anchor" href="#relicensing-exercise"></a>
</h3>
<div class="callout-content">
<p>Q: Find the webpage of a major open source project that is relevant
to your research or the <code>Spacewalks</code> codebase we have been
working with. See if you can find a contributor license agreement. Add a
link to this in the chat/etherpad/hackmd.</p>
<p>Hint: try looking at Matplotlib - <a href="https://matplotlib.org" class="external-link uri">https://matplotlib.org</a> which Spacewalks uses for
plotting</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>A: Here are a few examples:</p>
<p>Python - <a href="https://www.python.org/psf/contrib/" class="external-link uri">https://www.python.org/psf/contrib/</a></p>
<p>Scipy - <a href="https://github.com/scipy/scipy/blob/main/CONTRIBUTING.rst" class="external-link uri">https://github.com/scipy/scipy/blob/main/CONTRIBUTING.rst</a></p>
<p>Matplotlib - <a href="https://matplotlib.org/stable/project/license.html" class="external-link uri">https://matplotlib.org/stable/project/license.html</a></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="sharing-your-code-to-encourage-collaboration">Sharing your code to encourage collaboration<a class="anchor" aria-label="anchor" href="#sharing-your-code-to-encourage-collaboration"></a>
</h1>
<div class="section level2">
<h2 id="getting-code-ready-to-share">Getting Code Ready to Share<a class="anchor" aria-label="anchor" href="#getting-code-ready-to-share"></a>
</h2>
<p>In addition to adding a license to our code there are several other
important steps to consider before sharing it publicly.</p>
<div class="section level3">
<h3 id="making-the-code-public">Making the code public<a class="anchor" aria-label="anchor" href="#making-the-code-public"></a>
</h3>
<p>By default repositories created on Github are private and only their
creator can see them. If we’re going to be adding an open source license
to our repository we probably want to make sure people can actually
access it too!</p>
<p>Go to the Github webpage of your repository
(<code>https://github.com/&lt;yourusername&gt;/&lt;yourrepsoitoryname&gt;</code>)
and click on the Settings link near the top right corner. Then scroll
down to the bottom of the page and the “Danger Zone” settings. Click on
“Change Visibility” and you should see a message saying “Change to
public”, if it says “Change to private” then the repository is already
public. You’ll then be asked to confirm that you want to make the
repository public and agree to the warning that the code will now be
publicly visible. As a security measure you’ll then have to put in your
Github password.</p>
</div>
<div class="section level3">
<h3 id="transferring-to-an-organisation">Transferring to an organisation<a class="anchor" aria-label="anchor" href="#transferring-to-an-organisation"></a>
</h3>
<p>Currently our repository is under the Github “namespace” of our
individual user. This is ok for individual projects where we are the
sole or at least main author, but for bigger and more complex projects
it is common to use a Github organisation named after our project. If we
are a member of an organisation and have the appropriate permissions
then we can transfer a repository from our personal namespace to the
organisation’s. This can be done with another option in the “Danger
Zone” settings, the “Transfer ownership” button. Pressing this will then
prompt us as to which organisation we want to transfer the repository
to.</p>
</div>
<div class="section level3">
<h3 id="archiving-to-zenodo-and-obtaining-a-doi">Archiving to Zenodo and Obtaining a DOI<a class="anchor" aria-label="anchor" href="#archiving-to-zenodo-and-obtaining-a-doi"></a>
</h3>
<p>Zenodo is a data archive run by CERN. Anybody can upload datasets up
to 50GB to it and receive a Digital Object Identifier (DOI). Zenodo’s
definition of a dataset is quite broad and can include code. This gives
us a way to obtain a DOI for our code. We can archive our Github
repository to Zenodo by doing the following:</p>
<ol style="list-style-type: decimal">
<li>Go to the <a href="https://zenodo.org/login" class="external-link">Zenodo Login page</a>
and choose to login with Github.</li>
<li>Authorise Zenodo to connect to Github.</li>
<li>Go to the <a href="https://zenodo.org/account/settings/github/" class="external-link">Github page</a> in
your Zenodo account. This can be found in the pull down menu with your
user name in the top right corner of the screen.</li>
<li>You’ll now have a list of all of your Github repositories. Next to
each will be an “On” button. If you have created a new repository you
might need to press the “Sync” button to update the list of repositories
Zenodo knows about.</li>
<li>Press the “On” button for the repository you want to archive. If
this was successful you’ll be told to refresh the page.</li>
<li>The repository should now appear in the list of Enabled repositories
at the top of the screen. But it doesn’t yet have a DOI. To get one we
have to make a release on Github. Click on the repository and then press
the green button to create a release. This will take you to Github’s
release page where you’ll be asked to give a title and description of
the release. You will also have to create a tag, this is a way of having
a friendly name for the version of some code in Git instead of using a
long hash code. Often we’ll create a sequential version number for each
release of the software and have the tag name match this, for example
v1.0 or just 1.0.</li>
<li>If we now refresh the Zenodo page for this repository we will see
that it has been assigned a DOI.</li>
</ol>
<p>The DOI doesn’t just link to Github, Zenodo will have taken a copy of
our repository at the point where we tagged the release. This means that
even if we delete it from Github or even if Github were ever to go away
or remove it, they’ll still be a copy on Zenodo. Zenodo will allow
people to download the entire repository as a single Zip file.</p>
<p>Zenodo will have actually created two DOIs for you. One represents
the latest version of the software and will always represent the latest
if you make more releases. The other is specfic to the release you made
and will always point to that version. We can see both of these by
clicking on the DOI link in the Zenodo page for the repository. One of
the things which is displayed on this page is a badge image that you can
copy the link for and add to the README file in your Git repository so
that people can find the Zenodo version of the repository. If you click
on the DOI image in the Details section of the Zenodo page then you will
be shown instructions for obtaining a link to the DOI badge in various
formats including Markdown. Here is the badge for this repository and
the corresponding Markdown:</p>
<p><a href="https://doi.org/10.5281/zenodo.11869450" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.11869450.svg" alt="DOI" class="figure"></a></p>
<pre class="text"><code>[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.11869450.svg)](https://doi.org/10.5281/zenodo.11869450)</code></pre>
<div id="archive-your-repository-to-zenodo" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="archive-your-repository-to-zenodo" class="callout-inner">
<h3 class="callout-title">Archive your repository to Zenodo<a class="anchor" aria-label="anchor" href="#archive-your-repository-to-zenodo"></a>
</h3>
<div class="callout-content">
<ul>
<li>Create an account on Zenodo that is linked to your Github
account.</li>
<li>Use Zenodo to create a release for your repository and obtain a DOI
for it.</li>
<li>Get the link to the DOI badge for your repository and add a link to
this image to your README file in Markdown format. Check that this is
the DOI for the latest version and not the DOI for a specific version,
if not you’ll be updating this every time you make a release.</li>
</ul>
</div>
</div>
</div>
<div id="problems-with-github-and-zenodo-integration" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="problems-with-github-and-zenodo-integration" class="callout-inner">
<h3 class="callout-title">Problems with Github and Zenodo integration<a class="anchor" aria-label="anchor" href="#problems-with-github-and-zenodo-integration"></a>
</h3>
<div class="callout-content">
<p>The integration between Github and Zenodo does not interact well with
some browser privacy features and extensions. Firefox can be
particularly problematic with this and might open new tabs to login to
Github and then give an error saying:
<code>Your browser did something unexpected.  Please try again. If the error continues, try disabling all browser extensions.</code>
If this happens try disabling the extra privacy features/extensions or
using another browser such as Chrome.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="adding-a-doi-and-orcid-to-the-citation-file">Adding a DOI and ORCID to the citation file<a class="anchor" aria-label="anchor" href="#adding-a-doi-and-orcid-to-the-citation-file"></a>
</h3>
<p>Now that we have our DOI it is good practice to include this
information in our citation file. In the previous part of this lesson we
created a <code>CITATION.cff</code> file with information about how to
cite our code. There are a few fields we can add which are related to
the DOI, one of these is the <code>version</code> file which covers the
version number of the software. We can add a DOI to the file in the
<code>identifiers</code> section with a type of <code>doi</code> and
<code>value</code> with the URL. Optionally we can also add a
<code>date-released</code> field indicating the date we released this
software. Here is an updated version of our CITATION.cff from the
previous episode with a version number, DOI and release date added.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># This CITATION.cff file was generated with cffinit.</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co"># Visit https://bit.ly/cffinit to generate yours today!</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">cff-version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.2.0</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> My Software</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="fu">message</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  If you use this software, please cite it using the</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  metadata from this file.</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> software</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Anne</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Researcher</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.0.1</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="fu">identifiers</span><span class="kw">:</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">type</span><span class="kw">:</span><span class="at"> doi</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="at">    </span><span class="fu">value</span><span class="kw">:</span><span class="at"> 10.5281/zenodo.1234</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="fu">date-released</span><span class="kw">:</span><span class="at"> 2024-06-01</span></span></code></pre>
</div>
<div id="add-a-doi-to-your-citation-file" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="add-a-doi-to-your-citation-file" class="callout-inner">
<h3 class="callout-title">Add a DOI to your citation file<a class="anchor" aria-label="anchor" href="#add-a-doi-to-your-citation-file"></a>
</h3>
<div class="callout-content">
<p>Add the DOI you were allocated in the previous exercise to your
CITATION.cff file and commit/push the updated version to your Github
repository. You can remove the <code>commit</code> field from the
CITATION.cff file as the DOI is a better way to point to given version
of the code.</p>
</div>
</div>
</div>
<div id="going-further-with-publishing-code" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="going-further-with-publishing-code" class="callout-inner">
<h3 class="callout-title">Going further with publishing code<a class="anchor" aria-label="anchor" href="#going-further-with-publishing-code"></a>
</h3>
<div class="callout-content">
<p>We now have our code published online, licensed as open source,
archived with Zenodo, accessible via a DOI and with a citation file to
encourage people to cite it. What else might we want to do in order to
improve how findable, accessible or reusable it is? One further step we
could take is to publish the code with a peer reviewed journal. Some
traditional journals will accept software submissions, although these
are usually as a supplementary material for a paper. There also journals
which specialise in research software such as the <a href="https://openresearchsoftware.metajnl.com/" class="external-link">Journal of Open
Research Software</a>, <a href="https://joss.theoj.org/" class="external-link">The Jornal of
Open Source Software</a> or <a href="https://www.sciencedirect.com/journal/softwarex" class="external-link">SoftwareX</a>.
With these venues, the submission will be the software itself and not a
paper, although a short abstract or description of the software is often
required.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="working-with-collaborators">Working with collaborators<a class="anchor" aria-label="anchor" href="#working-with-collaborators"></a>
</h1>
<p>The strength of online collaboration tools such as Github doesn’t
just lie in the ability to share code. They also allow us to track
problems with that code, for multiple developers to work on it
independently and bring their changes together and to review those
changes before they are accepted.</p>
<div class="section level2">
<h2 id="tracking-issues-with-code">Tracking Issues with Code<a class="anchor" aria-label="anchor" href="#tracking-issues-with-code"></a>
</h2>
<p>A key feature of Github (as opposed to Git itself) is the issue
tracker. This provides us with a place to keep track of any problems or
bugs in the code and to discuss them with other developers. Sometimes
advanced users will also use issue trackers of public projects to report
problems they are having (and sometimes this is misused by users seeking
help using documented features of the program).</p>
<p>The code from the testing chapter earlier has a bug with an extra
bracket in eva_data_analysis.py (and if you’ve fixed that a missing
import of summarise_categorical in the test). Let’s go ahead and create
a new issue in our Github repository to describe this problem. We can
find the issue tracker on the “Issues” tab in the top left of the Github
page for the repository. Click on this and then click on the green “New
Issue” button on the right hand side of the screen. We can then enter a
title and description of our issue.</p>
<p>A good issue description should include:</p>
<ul>
<li>What the problem is, including any error messages that are
displayed.</li>
<li>What version of the software it occurred with.</li>
<li>Any relevant information about the system running it, for example
the operating system being used.</li>
<li>Versions of any dependent libraries.</li>
<li>How to reproduce it.</li>
</ul>
<p>After the issue is created it will be assigned a sequential ID
number.</p>
<div id="write-an-issue-to-describe-our-bug" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="write-an-issue-to-describe-our-bug" class="callout-inner">
<h3 class="callout-title">Write an issue to describe our bug<a class="anchor" aria-label="anchor" href="#write-an-issue-to-describe-our-bug"></a>
</h3>
<div class="callout-content">
<p>Create a new issue in your repository’s issue tracker by doing the
following:</p>
<ul>
<li>Go to the Github webpage for your code</li>
<li>Click on the Issues tab</li>
<li>Click on the “New issue” button</li>
<li>Enter a title and description for the issue</li>
<li>Click the “Submit Issue” button to create the issue.</li>
</ul>
</div>
</div>
</div>
<div class="section level3">
<h3 id="discussing-an-issue">Discussing an issue<a class="anchor" aria-label="anchor" href="#discussing-an-issue"></a>
</h3>
<p>Once the issue is created, further discussion can take place with
additional comments. These can include code snippets and file
attachments such as screenshots or logfiles. We can also reference other
issues by writing a # symbol and the number of the other issue. This is
sometimes used to identify related issues or if an issue is a
duplicate.</p>
</div>
<div class="section level3">
<h3 id="closing-an-issue">Closing an issue<a class="anchor" aria-label="anchor" href="#closing-an-issue"></a>
</h3>
<p>Once an issue is solved then it can be closed. This can be done
either by pressing the “Close” button in the Github web interface or by
making a commit which includes the word “fixes”, “fixed”, “close”,
“closed” or “closes” followed by a # symbol and the issue number.</p>
</div>
</div>
<div class="section level2">
<h2 id="working-in-parallel-with-git-branches">Working in Parallel with Git Branches<a class="anchor" aria-label="anchor" href="#working-in-parallel-with-git-branches"></a>
</h2>
<p>Branching is a feature of Git that allows two or more parallel
streams of work. Commits can be made to one branch without interfering
with another. Branches are commonly used as a way for one developer to
work on a new feature or a bug fix while other developers work on other
features. When those new features or bug fixes are complete, the branch
will be merged back with the main (sometimes called master) branch.</p>
<div class="section level3">
<h3 id="creating-a-new-branch">Creating a new Branch<a class="anchor" aria-label="anchor" href="#creating-a-new-branch"></a>
</h3>
<p>New git branches are created with the <code>git branch</code>
command. This should be followed by the name of the branch to create. It
is common practice when the bug we are fixing has a corresponding issue
to name the branch after the issue number and name. For example, we
might call the branch <code>01-extra-brakcet-bug</code> instead of
something less descriptive like <code>bugfix</code>.</p>
<p>For example, the command:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">git</span> branch 01-extra-brakcet-bug</span></code></pre>
</div>
<p>will create a new branch called <code>01-extra-brakcet-bug</code>. We
can view the names of all the branches, by default there should be one
branch called <code>main</code> or perhaps <code>master</code> and our
new <code>01-extra-brakcet-bug</code> branch. by running
<code>git branch</code> with no parameters. This will put <code>*</code>
next to the currently active branch.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">git</span> branch</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  01-extra-brakcet-bug
* main</code></pre>
</div>
<p>We can see that creating a new branch has not activated that branch.
To switch branches we can either use the <code>git switch</code> or
<code>git checkout</code> command followed by the branch name. For
example:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">git</span> switch 01-extra-brakcet-bug</span></code></pre>
</div>
<p>To create a branch and change to it in a single command we can use
<code>git switch</code> with the <code>-c</code> option (or
<code>git checkout</code> with the <code>-b</code> option,
<code>git switch</code> is only found in more recent versions of
Git).</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">git</span> switch <span class="at">-c</span> 02-another-bug</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="committing-to-a-branch">Committing to a branch<a class="anchor" aria-label="anchor" href="#committing-to-a-branch"></a>
</h3>
<p>Once we have switched to a branch any further commits that are made
will go to that branch. When we run a <code>git commit</code> command
we’ll see the name of the branch we’re committing to in the output of
<code>git commit</code>. Let’s edit our code and fix the lack of default
values bug that we entered into the issue tracker earlier on.</p>
<p>Change your code from</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="op">&lt;</span>call to pandas without checks identified <span class="kw">in</span> testing section<span class="op">&gt;</span></span></code></pre>
</div>
<p>to:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="op">&lt;</span>call to pandas <span class="cf">with</span> checks identified <span class="kw">in</span> testing section<span class="op">&gt;</span></span></code></pre>
</div>
<p>and now commit it.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"fixed bug"</span> eva_data_analysis.py</span></code></pre>
</div>
<p>In the output of <code>git commit -m</code> the first part of the
output line will show the name of the branch we just made the commit
to.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[01-extra-brakcet-bug 330a2b1] fixes missing values bug, closes #01 </code></pre>
</div>
<p>If we now switch back to the <code>main</code> branch our new commit
will no longer be there in the source file or the output of
<code>git log</code>.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">git</span> switch main</span></code></pre>
</div>
<p>And if we go back to the <code>01-extra-brakcet-bug</code> branch it
will re-appear.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">git</span> switch 01-extra-brakcet-bug</span></code></pre>
</div>
<p>If we want to push our changes to a remote such as GitHub we have to
tell the <code>git push</code> command which branch to push to. If the
branch doesn’t exist on the remote (as it currently won’t) then it will
be created.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">git</span> push origin 01-extra-brakcet-bug</span></code></pre>
</div>
<p>If we now refresh the Github webpage for this repository we should
see the bugfix branch has appeared in the list of branches.</p>
<p>If we needed to pull changes from a branch on a remote (for example
if we’ve made changes on another computer or via Github’s web based
editor), then we can specify a branch on a <code>git pull</code>
command.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">git</span> pull origin 01-extra-brakcet-bug</span></code></pre>
</div>
</div>
</div>
<div class="section level2">
<h2 id="merging-branches">Merging Branches<a class="anchor" aria-label="anchor" href="#merging-branches"></a>
</h2>
<p>When we have completed working on a branch (for example fixing a bug)
then we can merge our branch back into the main one (or any other
branch). This is done with the <code>git merge</code> command.</p>
<p>This must be run on the <em>TARGET</em> branch of the merge, so we’ll
have to use a <code>git switch</code> command to set this.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">git</span> switch main</span></code></pre>
</div>
<p>Now we’re back on the main branch we can go ahead and merge the
changes from the bugfix branch:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">git</span> merge 01-extra-bracket-bug</span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="pull-requests">Pull Requests<a class="anchor" aria-label="anchor" href="#pull-requests"></a>
</h2>
<p>On larger projects we might need to have a code review process before
changes are merged, especially before they are merged onto the main
branch that might be what is being released as the public version of the
software. Github has a process for this that it calls a “Pull Request”,
other Git services such as GitLab have different names for this, GitLab
calls them “Merge Requests”. Pull requests are where one developer
requests that another merge code from a branch (or “pull” it from
another copy of the repository). The person receiving the request then
has the chance to review the code, write comments suggesting changes or
even change the code themselves before merging it. It is also very
common for automated checks of code to be run on a pull request to
ensure the code is of good quality and is passing automated tests.</p>
<p>As a simple example of a pull request, we can now create a pull
request for the changes we made on our <code>01-extra-bracket-bug</code>
branch and pushed to Github earlier on. The Github webpage for our
repository will now be saying something like “bugfix had recent pushes n
minutes ago - Compare &amp; Pull request”. Click on this button and
create a new pull request.</p>
<p>Give the pull request a title and write a brief description of it,
then click the green “Create pull request” button. Github will then
check if we can merge this pull request without any problems. We’ll look
at what to do when this isn’t possible later on.</p>
<p>There should be a green “Merge pull request” button, but if we click
on the down arrow inside this button there are three options on how to
handle this request:</p>
<ol style="list-style-type: decimal">
<li>Create a merge commit</li>
<li>Squash and merge</li>
<li>Rebase and merge</li>
</ol>
<p>The default is option 1, which will keep all of the commits made on
our branch intact. This can be useful for seeing the whole history of
our work, but if we’ve done a lot of minor edits or attempts at fixing a
problem to fix one bug it can be excessive to have all of this history
saved. This is where the second option comes in, this will place all of
our changes from the branch into just a single commit, this might be
much more obvious to other developers who will now see our bugfix as a
single commit in the history. The third option merges the branch
histories together in a different way that doesn’t make merges as
obvious, this can make the history easier to read but effectively
rewrites the commit history and will change the commit hash IDs. Some
projects that you contribute to might have their own rules about what
kind of merge they will prefer. For the purposes of this exercise we’ll
stick with the default merge commit.</p>
<p>Go ahead and click on “Merge pull request”, then “Confirm merge”. The
changes will now be merged together. Github gives us the option to
delete the branch we were working on, since it’s history is preserved in
the main branch there isn’t any reason to keep it.</p>
<div class="section level3">
<h3 id="using-forks-instead-of-branches">Using Forks Instead of Branches<a class="anchor" aria-label="anchor" href="#using-forks-instead-of-branches"></a>
</h3>
<p>A fork is similar to a branch, but instead of it being part of the
same repository it is a entirely new copy of the repository. Forks are
commonly used by Github users who wish to work on a project that they’re
not a member of. Typically forking will copy the repository to our own
namespace (e.g. github.com/username/reponame instead of
github.com/projectname/reponame)</p>
<p>To create a fork on github use the “Fork” button to the right of the
repository name. After we create our fork we can make some changes and
these could even be on the main branch inside our forked repository.
Github will track that a fork has been made displays a “Contribute”
button to create a pull request back to the original repository. Using
this we can request that the changes on our fork are incorporated by the
upstream project.</p>
<div id="pull-request-exercise" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="pull-request-exercise" class="callout-inner">
<h3 class="callout-title">Pull Request Exercise<a class="anchor" aria-label="anchor" href="#pull-request-exercise"></a>
</h3>
<div class="callout-content">
<p>Q: Work in pairs for this exercise. Share the Github link of your
repository with your partner. If you have set your repository to
private, you’ll need to add them as a collaborator. Go to the settings
page on your Github repository’s webpage, click on Collaborators from
the left hand menu and then click the green “Add People” button and
enter the Github username or email address of your partner. They will
get an email and an alert within Github to accept your invitation to
work on this repository, without doing this they won’t be able to access
it.</p>
<ul>
<li>Now make a fork of your partners repository.</li>
<li>Edit the CITATION.cff file and add your name to it.</li>
<li>Commit these changes to your fork</li>
<li>Create a pull request back to the original repository</li>
<li>Your partner will now receive your pull request and can review</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h2>
<p>The content of this episode was inspired / heavily borrowed from the
following resources:</p>
<ul>
<li>Software carpentry git lesson licensing and citation sections - <a href="https://swcarpentry.github.io/git-novice/11-licensing.html" class="external-link uri">https://swcarpentry.github.io/git-novice/11-licensing.html</a>
and <a href="https://swcarpentry.github.io/git-novice/12-citation.html" class="external-link uri">https://swcarpentry.github.io/git-novice/12-citation.html</a>
</li>
<li>Carpentries Github Skill up - <a href="https://carpentries-incubator.github.io/github-skill-up-instructors/" class="external-link uri">https://carpentries-incubator.github.io/github-skill-up-instructors/</a>
and <a href="https://carpentries.github.io/github-skill-up-maintainers/" class="external-link uri">https://carpentries.github.io/github-skill-up-maintainers/</a>
</li>
<li>RSG Soton Git lesson - <a href="https://southampton-rsg.github.io/swc-git-novice/06-collab/index.html" class="external-link uri">https://southampton-rsg.github.io/swc-git-novice/06-collab/index.html</a>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li>Licencing and citation episodes from the <a href="https://swcarpentry.github.io/git-novice" class="external-link">Software Carpentry’s Git
Novice lesson</a>
</li>
<li>
<a href="https://opensource.org/osd/" class="external-link">Open source definition</a>, by
the <a href="https://opensource.org" class="external-link">Open Source Initiative</a>
</li>
<li><a href="https://www.gnu.org/philosophy/free-sw.en.html" class="external-link">What is
free software?</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Open source applies Copyright licenses permitting others to reuse
and adapt your code or data.</li>
<li>Permissive licenses allow code to be used in other products
providing the copyright statement is displayed.</li>
<li>Copyleft licenses require the source code of any modifications to be
released under a copyleft license.</li>
<li>Creative commons licenses are suitable for non-code files such as
documentation and images.</li>
<li>Open source software can be sold, but you must supply the source
code and the people you sell it to can give it away to somebody
else.</li>
<li>Add license file to your repository and add a license to each file
in case it gets detached.</li>
<li>Zenodo can be used to archive a Github repository and obtain a DOI
for it.</li>
<li>We can include a CITATION file to tell people how to cite our
code.</li>
<li>Github can track bugs or issues with a program.</li>
<li>Git branches can be used to allow multiple developers to work on the
same part of a program in parallel.</li>
<li>The <code>git branch</code> command shows the list of branches and
can create new branches.</li>
<li>The <code>git switch</code> command changes which branch we are
working on.</li>
<li>The <code>git merge</code> command merges another branch into the
current one.</li>
<li>Pull requests allow developers to work on their own branch/fork and
then request other developers review their changes before they are
merged.</li>
</ul>
</div>
</div>
</div>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</div>
</div></section><section id="aio-09-code-ethics"><p>Content from <a href="09-code-ethics.html">Ethical considerations for research software</a></p>
<hr>
<p>Last updated on 2024-07-04 |
        
        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/09-code-ethics.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What ethical considerations are there when using and writing
research software?</li>
<li>How can our research software impact the rights and well-being of
others?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Understand some ethical issues around research software development
and usage and how they impact others.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Research software development and its use (along with data it
handles) does not happen in a vacuum - it can pose a number of ethical
concerns and challenges for society and the environment, such as
contributing to social inequality, compromising privacy and security,
increasing environmental impact, and creating social and psychological
issues. While these concerns do not strictly fall under the FAIR
principles, they all contribute to research software quality,
reliability and responsibility.</p>
<p>Some of the ethical considerations around software are listed
below.</p>
<div class="section level3">
<h3 id="software-development-practices">Software development practices<a class="anchor" aria-label="anchor" href="#software-development-practices"></a>
</h3>
<ul>
<li>Transparency: openly sharing source code and methodologies to allow
for scrutiny and replication of research.</li>
<li>Software quality and reliability: rigorous testing to ensure that
software performs as documented and produces reliable results.</li>
<li>Accountability: ensuring that developers are accountable for the
software they create, particularly in terms of accuracy and
reliability.</li>
</ul>
<div id="ethical-software-reuse" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ethical-software-reuse" class="callout-inner">
<h3 class="callout-title">Ethical software reuse<a class="anchor" aria-label="anchor" href="#ethical-software-reuse"></a>
</h3>
<div class="callout-content">
<p>Good research software practices apply not only when we develop
software ourselves, but also when we reuse other people’s software.
Discuss as group and write down in the shared document your thoughts
about what ethical considerations should we have in mind and pros and
cons we should weigh in when choosing other people’s software for
reuse.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Here are some considerations:</p>
<ul>
<li>How is software shared? Is it openly available on some code sharing
platform or given to us on a memory stick?</li>
<li>Are developers of the software credited for their work?</li>
<li>Are software developers respectful to each other and other external
contributors to or users of the codebase in their communication? Does
the project have a code of conduct and contribution guidelines?</li>
<li>How is the project funded? Are there any concerns about who is
financing the work?</li>
<li>Is the project active? How many open issues are there and how long
have they been opened for?</li>
<li>When we are selecting tools and libraries to include in our research
pipelines or software, we do have a duty to check the quality and
reliability of those components. Are they well tested? Is the project
using outdated methods? We can also look to other indicators of
reliability - e.g. does the project have many open unresolved issues for
bugs that might signal unreliability?</li>
<li>Do they support they users of their code and how is that support
handled?</li>
<li>Are we respecting licenses and giving proper attribution to the
developers of the code we are reusing?</li>
<li>When incorporating other researchers’ software into our research
workflows we should not do it blindly but should inspect it critically
and look closely at how the results of that component are
generated.</li>
</ul>
<p>Note: tools such as <a href="https://snyk.io/" class="external-link">Snyk</a> are available
to help you check software projects that you intend to reuse in your
work - they are designed to help you identify find weaknesses,
violations, vulnerabilities and security issues in open-source software
libraries and can help you make a decision whether or not you should use
some software.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="intellectual-property-and-licensing">Intellectual property and licensing<a class="anchor" aria-label="anchor" href="#intellectual-property-and-licensing"></a>
</h3>
<ul>
<li>Open vs closed source: balancing the benefits of open-source
software and data with the rights of creators to protect their
intellectual property and data privacy.</li>
<li>License compliance: ensuring that software use complies with
licensing agreements and avoiding unlicensed (and illegal) use of
software and data.</li>
</ul>
<div id="intellectual-property-and-licensing-of-ai-generated-code" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="intellectual-property-and-licensing-of-ai-generated-code" class="callout-inner">
<h3 class="callout-title">Intellectual property and licensing of AI-generated code<a class="anchor" aria-label="anchor" href="#intellectual-property-and-licensing-of-ai-generated-code"></a>
</h3>
<div class="callout-content">
<p>The licensing and intellectual property (IP) of code generated by
large language models (LLMs) and <a href="https://www.codium.ai/glossary/pair-programming/#:~:text=Ethics%20in%20AI%20Pair%20Programming" class="external-link">AI
pair programmers</a> (such as <a href="https://www.codegen.com/" class="external-link">CodeGen</a> or <a href="https://github.com/features/copilot" class="external-link">Google Copilot</a> which
operate with an AI system as one of the code developers) raise complex
legal and ethical questions that are not clear cut. Discuss as group and
write down in the shared document some considerations and pros and cons
of using AI-generated code.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Here are some considerations:</p>
<ul>
<li>Intellectual Property (IP) ownership of the AI-generated code -
typically, IP laws assign authorship to humans, not machines. However,
the authorship of AI-generated code is ambiguous - it could belong to
the developer who directs the AI, the developer’s employer or the entity
owning the AI. Furthermore, AI pair programmers can generate results
that match or closely match code that is publicly available and
potentially already licensed. As a result, you might end up
incorporating someone else’s (licensed) code into your code base without
attribution or considering license implications. Some tools like GitHub
Copilot have taken steps to reduce the risk of this by filtering out
code completions that match publicly available code.</li>
<li>Intellectual Property (IP) ownership of the training data: if the AI
model was trained on copyrighted code, the output could potentially be
seen as a derivative work, raising IP issues regarding the training
data’s licenses.</li>
<li>Licensing terms of the AI-generated code - under what terms is the
generated code to be used, for example, if the AI model is trained on
open-source code, the generated code might need to comply with the
open-source licenses (e.g., GPL, MIT). How can we attribute the original
authors of the code used to train the AI model on? In addition,
ethically, it is good practice to acknowledge the use of AI tools in
generating code, even if not legally required.</li>
<li>Security and bias concerns of AI-generated code - AI tools can
generate code that is insecure, potentially destructive (e.g. deleting
files) or use biased algorithms and data (see the section below) - so we
should always try to understand and check any generated code before
running it.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="responsible-use-of-software-data">Responsible use of software &amp; data<a class="anchor" aria-label="anchor" href="#responsible-use-of-software-data"></a>
</h3>
<ul>
<li>Dual use: recognizing and mitigating the potential for software to
be used for harmful purposes (e.g. cybersecurity tools being used for
hacking).</li>
<li>Social impact: considering the broader social implications of
software applications and data used, e.g. the use of data that has been
collected without permission from the groups or individuals
(e.g. historically excluded and exploited groups), or data that contains
private or upsetting information.</li>
<li>Bias mitigation: implement measures to detect and mitigate biases in
algorithms and data, ensuring that the software treats all users
fairly.</li>
</ul>
<div id="scraping-publicly-available-data-responsibly" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="scraping-publicly-available-data-responsibly" class="callout-inner">
<h3 class="callout-title">Scraping publicly available data responsibly<a class="anchor" aria-label="anchor" href="#scraping-publicly-available-data-responsibly"></a>
</h3>
<div class="callout-content">
<p>You have been tasked with writing software to scrape a public forum
to collect personal data for your study - discuss as a group and write
down what ethical issues should you consider and how should you act in
this case?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Compliance with Terms of Service (ToS) - most websites, including
forums, have ToS that explicitly prohibit or restrict web scraping.
Violating these terms can lead to legal action and is considered
unethical.</li>
<li>User privacy concerns - scraping a forum can collect a vast amount
of user data, including personal information, opinions, and
conversations. Avoid collecting personally identifiable information
(PII) unless it is absolutely necessary and permissible and protecting
user privacy (e.g. do not de-anonymize users).</li>
<li>Lack of consent: users of the forum likely have not given explicit
consent for their posts and data to be scraped and used by third
parties. It’s ethical to inform users and seek consent where possible,
or at least be transparent about data usage.</li>
<li>Impact on website performance - scraping can put significant strain
on the forum’s servers, cause Denial of Service attacks amd potentially
disrupting service for regular users. Ensure your software is designed
to be non-disruptive.</li>
<li>Data use and sharing - clearly define and limit the purpose of data
collection, collect only the data necessary for the intended purpose,
and be cautious about how the scraped data is shared or sold. Ensure
that it is used responsibly and does not harm the users from whom the
data was collected.</li>
<li>Data accuracy and integrity - ensure that the scraped data is used
accurately and not misrepresented, avoid taking quotes out of context or
using data in misleading ways, avoid modifying or altering the data in
ways that could be deceptive.</li>
<li>Legal considerations - forum content is often copyrighted so
scraping content without permission can lead to copyright infringement
so seek permission where necessary.</li>
<li>Ethical purpose - consider the intent behind scraping the forum and
ensure that the purpose is constructive and beneficial (and not harmful
and unethical - e.g., for creating, fake profiles, spam, or
harassment).</li>
<li>Transparency and accountability - where possible, be transparent
about your research methodology, scraping activities and their purpose,
take responsibility for any negative consequences that may arise from
scraping and be prepared to address and mitigate any issues.</li>
</ol>
<p>Best Practices for ethical scraping:</p>
<ul>
<li>Respect <code>robots.txt</code>: Always check and respect the
robots.txt file of the forum, which indicates the site’s rules regarding
web crawling.</li>
<li>Rate limiting: implement rate limiting to avoid overwhelming the
server.</li>
<li>Data minimization: collect only the data that is necessary for your
purpose.</li>
<li>User-Agent identification: use a User-Agent string that identifies
your scraper and include contact information.</li>
<li>Ethical review: if you are scraping for research, consider
submitting your methodology for ethical review.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="environmental-impact-of-research-software">Environmental impact of research software<a class="anchor" aria-label="anchor" href="#environmental-impact-of-research-software"></a>
</h3>
<ul>
<li>Energy consumption: research software often relies on large-scale
data centers for storage and computation, or the use of HPC systems and
supercomputers for complex simulations and data analysis, which can
significantly increase energy usage (much of which may come from
non-renewable sources).</li>
<li>Carbon footprint: the electricity used to power data centers and HPC
systems contributes to CO2 emissions, particularly if the energy comes
from fossil fuels.</li>
</ul>
<div id="using-hpc-systems-in-a-more-environmentally-responsible-manner" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="using-hpc-systems-in-a-more-environmentally-responsible-manner" class="callout-inner">
<h3 class="callout-title">Using HPC systems in a more environmentally responsible manner<a class="anchor" aria-label="anchor" href="#using-hpc-systems-in-a-more-environmentally-responsible-manner"></a>
</h3>
<div class="callout-content">
<p>Often our research software is written for use on HPC systems.
Discuss as a group and write down in which way can we improve our
practices when writing, testing and running code on HPC system to
support more responsible and less wasteful use of resources.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Here are some thing to consider:</p>
<ul>
<li>To make best use of resources, part of our workflow should include
identifying the most appropriate job configurations, e.g. <a href="https://ri.itservices.manchester.ac.uk/csf3/batch/scaling/" class="external-link">job
scaling</a> or using workflow management tools like Snakemake to ensure
that we do not repeat expensive steps unless some upstream step in our
workflow has changed.</li>
<li>Avoid running untested code on a HPC system - test and debug locally
first</li>
<li>Run a test job on one case study or a small data set before running
on full data (consider setting up many jobs and finding 100s of jobs
crashed after a few hours)</li>
<li>Avoid including an expensive data processing step in every job when
it could be run once and set as a dependency for other jobs</li>
<li>Using many nodes for a job that is not designed to run in parallel -
consider refactoring your code</li>
<li>Optimise your code and use more efficient algorithms</li>
</ul>
<p>Technical topics:</p>
<ul>
<li>Work-flow management</li>
<li>Profiling jobs on HPC</li>
<li>Profiling Python code</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="further-reading"><h2 class="section-heading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://www.ucl.ac.uk/research-ethics/sites/research_ethics/files/research_using_apps_guidance_1.2.docx" class="external-link">Ethics
Issues in Custom Software and App-Based Research Experiments and Data
Collection</a></li>
<li><a href="https://medium.com/@zoyajahidshaikh/ethical-considerations-in-software-development-e1e4ebad2670" class="external-link">Ethical
Considerations in Software Development</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>To act ethically, we have to be both responsible producers and
consumers of research software.</li>
<li>Free and open source research software and data, along with FAIR,
ethical and environmental considerations, offer viable ways to make more
transparent, reliable and accountable science that not only advances
scientific knowledge but also respects and protects the rights and
well-being of all users.</li>
</ul>
</div>
</div>
</div>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</section></section><section id="aio-10-wrap-up"><p>Content from <a href="10-wrap-up.html">Wrap-up</a></p>
<hr>
<p>Last updated on 2024-07-04 |
        
        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/episodes/10-wrap-up.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are the wider <strong>Research Software Development
Principles</strong> and where does FAIR fit into them?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Reflect on the <strong>Research Software Development
Principles</strong> and their relevance to own research.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this course we have explored the significance of reproducible
research and how following the FAIR principles in our own work can help
us and others do <em>better research</em>. Reproducible research often
requires that researchers implement new practices and learn new tools -
in this course we taught you some of these as a starting point but you
will discover what works best for yourself, your group, community and
domain. Some of these practices may take a while to implement and may
require perseverance, others you can start practicing today.</p>
<figure><img src="fig/plant-a-tree.jpg" alt='An image of a Chinese proverb "The best time to plant a tree was 20 years ago. The second best time is now' class="figure mx-auto d-block"><div class="figcaption">An image of a Chinese proverb “The best time to
plant a tree was 20 years ago. The second best time is now” by CCNULL,
used under a CC-BY 2.0 licence</div>
</figure><section id="research-software-development-principles"><h2 class="section-heading">Research software development principles<a class="anchor" aria-label="anchor" href="#research-software-development-principles"></a>
</h2>
<hr class="half-width">
<p>Software and people who develop it have significance within the
research environment and a broader impact on society and the planet.
FAIR research software principles cover some aspects and operate within
the wider <a href="https://rsecon24.society-rse.org/about/research-software-development-principles/" class="external-link"><strong>Research
Software Development Principles</strong></a> - recommended by Software
Sustainability Institute’s Director Neil Chue Hong during his <a href="https://rsecon24.society-rse.org/about/research-software-development-principles/#neil-chue-hong-rse23-keynote" class="external-link">keynote
at RSECon23</a>. These principles can help us explore and reflect on our
own work and guide us on a path to better research.</p>
<div class="section level3">
<h3 id="helping-your-team">Helping your team<a class="anchor" aria-label="anchor" href="#helping-your-team"></a>
</h3>
<figure><img src="fig/help-the-team.png" alt="Help the team principles of writing FAIR, secure and maintainable code" class="figure mx-auto d-block"><div class="figcaption">Helping your team, image from RSECon2024, used
under CC BY 4.0</div>
</figure>
</div>
<div class="section level3">
<h3 id="helping-you-peers">Helping you peers<a class="anchor" aria-label="anchor" href="#helping-you-peers"></a>
</h3>
<figure><img src="fig/help-the-peers.png" alt="Help the peers principles of making your work reproducible, inclusive and credit everyone involved" class="figure mx-auto d-block"><div class="figcaption">Helping your peers, image from RSECon2024, used
under CC BY 4.0</div>
</figure>
</div>
<div class="section level3">
<h3 id="helping-the-world">Helping the world<a class="anchor" aria-label="anchor" href="#helping-the-world"></a>
</h3>
<figure><img src="fig/help-the-world.png" alt="Help the world principles of being responsible, open and global, and humanist when developing research software" class="figure mx-auto d-block"><div class="figcaption">Helping the world, image from RSECon2024, used
under CC BY 4.0</div>
</figure>
</div>
</section><section id="further-reading"><h2 class="section-heading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>Please check out <a href="reference.html#litref">the following
resources</a> for some additional reading on the topic of this course
and the full reference set.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>When developing software for your research, think about how it will
help you and your team, your peers and domain/community and the
world.</li>
</ul>
</div>
</div>
</div>
<!-- 
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use. 
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/softwaresaved/fair-research-software/edit/main/README.md" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/softwaresaved/fair-research-software/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/softwaresaved/fair-research-software/" class="external-link">Source</a></p>
				<p><a href="https://github.com/softwaresaved/fair-research-software/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:a.nenadic@software.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.5" class="external-link">sandpaper (0.16.5)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.3" class="external-link">varnish (1.0.3)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://softwaresaved.github.io/fair-research-software/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, FAIR, reproducibility, sustainability, open, research, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://softwaresaved.github.io/fair-research-software/aio.html",
  "identifier": "https://softwaresaved.github.io/fair-research-software/aio.html",
  "dateCreated": "2023-10-03",
  "dateModified": "2024-07-05",
  "datePublished": "2024-07-05"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

